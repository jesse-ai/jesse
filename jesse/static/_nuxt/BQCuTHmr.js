import{_ as Re}from"./rYy--hfq.js";import{g as ge,s as De,h as f,r as h,i as ve,v as pe,x as Ee,n as qe,c as u,o as i,b8 as $,T as A,d as s,w as S,F as j,$ as Le,C as Fe,b as t,k as F,l as c,K as M,p as D,m as K,t as d,L as G,q as Oe,N as Be,a2 as He,a1 as Pe,a3 as Ie,aU as We,b9 as Ae,a4 as Ke,e as _e,H as O,a8 as ee,I as J}from"./DJFabWt2.js";import{_ as Ge}from"./6U31nEDc.js";import{_ as Je}from"./DnOTdsOB.js";import{T as Ye,c as Qe,a as Xe,_ as Ze,b as es}from"./CH9BMetu.js";import{_ as ss}from"./Pth0Xzwm.js";import{s as ts,l as as,d as ls}from"./lA_J2Fq2.js";import{_ as os}from"./C_xcvSH_.js";import{_ as ns}from"./CEmI8QEC.js";import{u as rs}from"./CA5MjVLk.js";import{r as is,a as us}from"./CVQagRKh.js";import"./g6B19qhy.js";import"./wJSaJLkm.js";const ds=ge({__name:"MonteCarloEquityCurve",props:{data:{}},setup(se){const B=De(),r=f(()=>B.value),o=h();let _=null,b=[];const w=se;ve(r,y=>{T(y)}),pe(async()=>{await E()});async function E(){const y={...ts,width:o.value.clientWidth,rightPriceScale:{visible:!0}};_=Ye(o.value,y);const q=w.data.filter(v=>v.name==="Original"),x=[...w.data.filter(v=>v.name!=="Original"),...q];for(let v=0;v<x.length;v++){const z=x[v],k=z.name==="Original",V="#f97316",P="rgba(99, 102, 241, 0.08)",N=k?{lineWidth:2,color:V,priceLineVisible:!0,lastValueVisible:!0}:{lineWidth:2,color:P,priceLineVisible:!1,lastValueVisible:!1},R=_.addLineSeries(N),Q=(z.data||[]).map(I=>({time:I.time,value:I.value}));R.setData(Q),R.applyOptions({color:k?V:P}),b.push(R)}_.timeScale().fitContent(),T(r.value)}Ee(()=>{H()});function H(){_!==null&&(_.remove(),_=null),b&&(b=[])}function T(y){_===null||b===null||_.applyOptions(y==="light"?as.chart:ls.chart)}return ve(()=>w.data,async()=>{H(),await qe(),await E()},{deep:!0}),(y,q)=>(i(),u("div",{ref_key:"chartContainer",ref:o,class:"rounded overflow-hidden border-2 border-gray-100 dark:border-gray-600"},null,512))}}),cs={key:0,class:"divide-y divide-gray-200 dark:divide-gray-700"},ms={class:"grid grid-cols-12 text-center items-center gap-2"},vs={class:"col-span-3"},_s={class:"col-span-2"},gs={class:"col-span-2"},ps={class:"col-span-2"},fs={class:"col-span-1"},ys={class:"col-span-1"},hs={key:1,class:"divide-y divide-gray-200 dark:divide-gray-700"},bs=["onClick"],ws={class:"grid grid-cols-12 text-center items-center"},xs={class:"col-span-3 flex items-center text-sm"},ks={class:"text-gray-500 dark:text-gray-400"},Vs={class:"col-span-2 flex items-center justify-center text-sm"},Cs={class:"text-gray-500 dark:text-gray-400"},Ss={class:"col-span-2 text-sm"},Ms={class:"col-span-2 text-sm text-gray-500 dark:text-gray-400"},Ts={class:"col-span-1 flex justify-end items-center"},Us={key:2,class:"py-4 text-center text-gray-500 dark:text-gray-400"},$s={key:0,class:"mb-8"},js={key:1,class:"mb-8"},zs={key:2},Ns={key:0,class:"mb-8"},Rs={key:0,class:"mb-8"},Ds={class:"flex justify-between items-center mb-2"},Es={class:"text-sm text-gray-600 dark:text-gray-400"},qs={key:0,class:"text-sm text-gray-500 dark:text-gray-400"},Ls={class:"mb-8"},Fs={key:0},Os={key:1,class:"border-2 border-gray-100 dark:border-gray-600 rounded overflow-hidden p-4"},Bs={class:"space-y-2"},Hs={key:1,class:"mb-4"},Ps={class:"border border-gray-200 bg-white dark:border-gray-700 dark:bg-gray-700 rounded-lg overflow-hidden"},Is={class:"w-[25%] text-sm font-medium italic"},Ws={class:"w-[18%] text-sm"},As={class:"w-[19%] text-sm"},Ks={class:"w-[19%] text-sm"},Gs={class:"w-[19%] text-sm"},Js={key:2,class:"mb-4"},Ys={class:"border border-gray-200 bg-white dark:border-gray-700 dark:bg-gray-700 rounded-lg overflow-hidden"},Qs={class:"flex justify-between font-semibold p-4 bg-gray-100 dark:bg-gray-900 text-sm"},Xs={class:"w-[25%]"},Zs={class:"w-[18%]"},et={class:"w-[19%]"},st={class:"w-[19%]"},tt={class:"w-[19%]"},at={class:"w-[25%]"},lt={class:"w-[18%]"},ot={class:"w-[19%]"},nt={class:"w-[19%]"},rt={class:"w-[19%]"},it={key:1,class:"mb-8"},ut={key:0,class:"mb-8"},dt={class:"flex justify-between items-center mb-2"},ct={class:"text-sm text-gray-600 dark:text-gray-400"},mt={key:0,class:"text-sm text-gray-500 dark:text-gray-400"},vt={class:"mb-8"},_t={key:0},gt={key:1,class:"border-2 border-gray-100 dark:border-gray-600 rounded overflow-hidden p-4"},pt={class:"space-y-2"},ft={key:1,class:"mb-4"},yt={class:"border border-gray-200 bg-white dark:border-gray-700 dark:bg-gray-700 rounded-lg overflow-hidden"},ht={class:"w-[25%] text-sm font-medium italic"},bt={class:"w-[18%] text-sm"},wt={class:"w-[19%] text-sm"},xt={class:"w-[19%] text-sm"},kt={class:"w-[19%] text-sm"},Vt={key:2,class:"mb-4"},Ct={class:"border border-gray-200 bg-white dark:border-gray-700 dark:bg-gray-700 rounded-lg overflow-hidden"},St={class:"flex justify-between font-semibold p-4 bg-gray-100 dark:bg-gray-900 text-sm"},Mt={class:"w-[25%]"},Tt={class:"w-[18%]"},Ut={class:"w-[19%]"},$t={class:"w-[19%]"},jt={class:"w-[19%]"},zt={class:"w-[25%]"},Nt={class:"w-[18%]"},Rt={class:"w-[19%]"},Dt={class:"w-[19%]"},Et={class:"w-[19%]"},qt={key:3},Lt={class:"flex items-center select-none flex-1 mb-4"},Ft={class:"space-y-4"},Ot={class:"flex items-center"},Bt={class:"flex items-center"},Ht={key:0},Pt={class:"space-y-4"},It={key:0,class:"space-y-4"},Wt={class:"grid grid-cols-1 gap-6"},At={key:0},Kt={key:1,class:"flex flex-col items-center justify-center select-none"},Gt={class:"mb-8 w-full"},Jt={class:"flex flex-col gap-4 mt-4"},Yt={key:2},Qt={class:"mb-8 w-full"},Xt={class:"flex flex-col gap-4 mt-4"},Zt={key:3,class:"mt-8 w-full"},ea={class:"p-4"},sa={class:"mt-4 flex justify-end space-x-3"},ga=ge({__name:"index",setup(se){rs({title:"Monte Carlo - Jesse"});const B=$(),r=f(()=>B.form),o=f(()=>B.results),_=h(!1),b=h(!1),w=h([]),E=f({get:()=>{var e;const l=Number((e=o.value.trades.progressbar)==null?void 0:e.current);return Number.isFinite(l)?l:0},set:l=>{}}),H=f(()=>{var e;const l=Number((e=o.value.trades.progressbar)==null?void 0:e.total);return Number.isFinite(l)&&l>0?l:100}),T=f({get:()=>{var e;const l=Number((e=o.value.candles.progressbar)==null?void 0:e.current);return Number.isFinite(l)?l:0},set:l=>{}}),y=f(()=>{var e;const l=Number((e=o.value.candles.progressbar)==null?void 0:e.total);return Number.isFinite(l)&&l>0?l:100}),q=f(()=>{const l=[];return o.value.trades.original_equity_curve&&o.value.trades.original_equity_curve.data&&l.push({name:"Original",color:"#f97316",data:o.value.trades.original_equity_curve.data}),o.value.trades.scenario_equity_curves.forEach((e,m)=>{e&&e.data&&l.push({name:`Scenario ${m+1}`,color:"#6366f1",data:e.data})}),l}),Y=f(()=>{const l=[];return o.value.candles.original_equity_curve&&o.value.candles.original_equity_curve.data&&l.push({name:"Original",color:"#f97316",data:o.value.candles.original_equity_curve.data}),o.value.candles.scenario_equity_curves.forEach((e,m)=>{e&&e.data&&l.push({name:`Scenario ${m+1}`,color:"#6366f1",data:e.data})}),l}),x=h(!1),v=h([]),z=h(!1),k=h(!1),V=h(null),P=f(()=>A().jesseSupportedTimeframes.map(l=>({label:l,value:l})));pe(()=>{setTimeout(()=>{R()},50)});const N=h([]);async function R(){N.value=await A().getExchangeSupportedSymbols(r.value.exchange);for(let l=0;l<r.value.routes.length;l++)N.value.includes(r.value.routes[l].symbol)||(r.value.routes[l].symbol=N.value[0])}r.value.exchange=r.value.exchange||A().backtestingExchangeNames[0];function Q(){if(w.value.length){for(let l=0;l<w.value.length;l++)O("error",w.value[l]);return}if(!r.value.run_trades&&!r.value.run_candles){O("error","Please select at least one simulation type (Trades or Candles).");return}$().start()}function I(){G.copyToClipboard(o.value.infoLogs),O("success","Info logs copied successfully"),b.value=!0,setTimeout(()=>{b.value=!1},3e3)}async function fe(){await $().terminate(),await Z(r.value.id)}function X(){x.value=!0,te()}async function te(){try{z.value=!0;const e=(await ee("/monte-carlo/sessions",{},!0)).data.value;v.value=(e==null?void 0:e.sessions)||[]}catch(l){J(l)}finally{z.value=!1}}function ye(l){switch(l.toLowerCase()){case"running":return"blue";case"finished":return"green";case"stopped":return"red";case"terminated":return"yellow";default:return"gray"}}async function he(l){await $().loadSession(l)&&(await Z(l),x.value=!1)}const ae=f(()=>o.value.status==="terminated");async function be(){await $().resume(),await Z(r.value.id)}async function we(l){try{const e=await ee(`/monte-carlo/sessions/${l}`,{},!0);if(e.error.value)return null;const m=e.data.value;return m==null?void 0:m.session}catch(e){return J(e),null}}async function Z(l){if(!x.value||!v.value.length)return;const e=await we(l);if(!e)return;const m=v.value.findIndex(W=>W.id===l);m!==-1&&(v.value[m]=e)}function xe(l){V.value=l,k.value=!0}async function ke(){V.value&&(await Ce(V.value),await te()),k.value=!1,V.value=null}function Ve(){k.value=!1,V.value=null}async function Ce(l){if(l===r.value.id){O("error","You cannot delete the current session.");return}try{const e=await ee(`/monte-carlo/sessions/${l}/remove`,{},!0);if(e.error.value){J(e.error.value);return}O("success","Session deleted successfully.")}catch(e){J(e)}}const Se=l=>{const e=[];return l.forEach(m=>{e.push([{value:m.symbol,style:""},{value:m.timeframe,style:""},{value:m.strategy,style:""}])}),e},Me=l=>[["Start Date",l.start_date],["Finish Date",l.finish_date]];function le(l){return{total_return:"Return",max_drawdown:"Max Drawdown",sharpe_ratio:"Sharpe Ratio",calmar_ratio:"Calmar Ratio",net_profit_percentage:"Net Profit",win_rate:"Win Rate",total:"Total Trades",annual_return:"Annual Return"}[l]||l.replace(/_/g," ").replace(/\b\w/g,m=>m.toUpperCase())}function C(l,e){return e==null?"N/A":l==="total_return"||l==="net_profit_percentage"||l==="annual_return"?`${(e*100).toFixed(1)}%`:l==="max_drawdown"?`${(Math.abs(e)*100).toFixed(1)}%`:l==="win_rate"?`${(e*100).toFixed(1)}%`:l==="sharpe_ratio"||l==="calmar_ratio"?e.toFixed(2):l==="total"?Math.round(e).toString():e.toFixed(2)}return(l,e)=>{const m=Re,W=Le,n=Ge,Te=Je,g=Oe,oe=Ze,p=He,ne=ss,re=ds,ie=os,Ue=es,ue=Ie,de=We,L=Ae,$e=Ke,ce=Pe,me=ns,je=Xe,ze=Qe,Ne=Fe;return i(),u(j,null,[s(W,{modelValue:o.value.logsModal,"onUpdate:modelValue":e[0]||(e[0]=a=>o.value.logsModal=a),title:"Logs"},{default:S(()=>[s(m,{logs:o.value.infoLogs},null,8,["logs"])]),buttons:S(()=>[t("button",{class:"ml-2 p-2 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full text-gray-400 hover:text-gray-500 dark:hover:text-gray-300 focus:outline-none",onClick:I},[b.value?(i(),F(M(is),{key:0,class:"h-6 w-6","aria-hidden":"true"})):c("",!0),!b.value&&o.value.infoLogs.length!=0?(i(),F(M(us),{key:1,class:"h-6 w-6","aria-hidden":"true"})):c("",!0)])]),_:1},8,["modelValue"]),s(W,{modelValue:x.value,"onUpdate:modelValue":e[1]||(e[1]=a=>x.value=a),title:"Monte Carlo History"},{default:S(()=>[z.value?(i(),u("div",cs,[(i(),u(j,null,D(5,a=>t("div",{key:a,class:"py-3 px-2"},[t("div",ms,[t("div",vs,[s(n,{class:"h-4 w-full"})]),t("div",_s,[s(n,{class:"h-4 w-12 mx-auto"})]),t("div",gs,[s(n,{class:"h-6 w-16 mx-auto"})]),t("div",ps,[s(n,{class:"h-4 w-20 mx-auto"})]),t("div",fs,[s(n,{class:"h-4 w-4 mx-auto"})]),t("div",ys,[s(n,{class:"h-6 w-6 mx-auto"})])])])),64))])):v.value.length?(i(),u("div",hs,[(i(!0),u(j,null,D(v.value,a=>(i(),u("div",{key:a.id,class:K([o.value.showResults&&r.value.id===a.id?"bg-gray-100 dark:bg-gray-900":"cursor-pointer","py-3 px-2 hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors"]),onClick:U=>he(a.id)},[t("div",ws,[t("div",xs,[t("span",ks,d(a.id.substring(0,5))+"-"+d(Object.keys(a.state).length>0?a.state.form.routes[0].strategy:"strategy"),1)]),t("div",Vs,[t("span",Cs,d(a.has_trades?"ðŸ”€":"")+" "+d(a.has_candles?"ðŸ“ˆ":""),1)]),t("div",Ss,[s(Te,{color:ye(a.status),label:a.status,variant:"soft",size:"sm"},null,8,["color","label"])]),t("div",Ms,d(M(G).timestampToReadableDateTime(a.updated_at)),1),e[29]||(e[29]=t("div",{class:"col-span-1 flex items-center justify-center text-gray-400"},[t("i",{class:"i-heroicons-chevron-right h-5 w-5"})],-1)),t("div",Ts,[s(g,{icon:"i-heroicons-trash",size:"xs",color:"red",variant:"ghost","aria-label":"Delete session",onClick:Be(U=>xe(a.id),["stop"])},null,8,["onClick"])])])],10,bs))),128))])):(i(),u("div",Us," No Monte Carlo history found "))]),_:1},8,["modelValue"]),s(ze,null,{left:S(()=>[o.value.trades.exception.error&&o.value.executing?(i(),u("div",$s,[s(oe,{modelValue:_.value,"onUpdate:modelValue":e[2]||(e[2]=a=>_.value=a),title:"Trades Simulation Error",content:o.value.trades.exception.traceback||o.value.trades.exception.error,mode:"monte-carlo"},null,8,["modelValue","content"])])):c("",!0),o.value.candles.exception.error&&o.value.executing?(i(),u("div",js,[s(oe,{modelValue:_.value,"onUpdate:modelValue":e[3]||(e[3]=a=>_.value=a),title:"Candles Simulation Error",content:o.value.candles.exception.traceback||o.value.candles.exception.error,mode:"monte-carlo"},null,8,["modelValue","content"])])):c("",!0),o.value.executing||o.value.showResults?(i(),u("div",zs,[r.value.run_trades?(i(),u("div",Ns,[s(p,{title:"ðŸ”€ Monte Carlo Trades",class:"mb-4"}),o.value.trades.progressbar.total>0&&o.value.trades.progressbar.current<o.value.trades.progressbar.total?(i(),u("div",Rs,[t("div",Ds,[t("p",Es," Running Trades Simulation... ("+d(o.value.trades.progressbar.current)+"/"+d(o.value.trades.progressbar.total)+") ",1),o.value.trades.progressbar.estimated_remaining_seconds>0?(i(),u("p",qs,d(M(G).remainingTimeText(o.value.trades.progressbar.estimated_remaining_seconds)),1)):c("",!0)]),s(ne,{modelValue:E.value,"onUpdate:modelValue":e[4]||(e[4]=a=>E.value=a),max:H.value,status:"",size:"lg",color:"primary"},null,8,["modelValue","max"])])):c("",!0),t("div",Ls,[s(p,{title:"Equity Curve",class:"mb-4"}),q.value.length?(i(),u("div",Fs,[s(re,{data:q.value},null,8,["data"])])):(i(),u("div",Os,[t("div",Bs,[s(n,{class:"h-8 w-3/4"}),s(n,{class:"h-8 w-full"}),s(n,{class:"h-8 w-5/6"}),s(n,{class:"h-8 w-full"}),s(n,{class:"h-8 w-4/5"}),s(n,{class:"h-8 w-full"}),s(n,{class:"h-8 w-3/4"}),s(n,{class:"h-8 w-full"}),s(n,{class:"h-8 w-5/6"}),s(n,{class:"h-8 w-full"}),s(n,{class:"h-8 w-4/5"}),s(n,{class:"h-8 w-full"})])]))]),o.value.trades.summary_metrics.length?(i(),u("div",Hs,[t("div",Ps,[e[30]||(e[30]=t("div",{class:"flex justify-between font-semibold p-4 bg-gray-100 dark:bg-gray-900 text-sm"},[t("div",{class:"w-[25%]"},"Metric"),t("div",{class:"w-[18%]"},"Original"),t("div",{class:"w-[19%]"},"Worst 5%"),t("div",{class:"w-[19%]"},"Median"),t("div",{class:"w-[19%]"},"Best 5%")],-1)),(i(!0),u(j,null,D(o.value.trades.summary_metrics,(a,U)=>(i(),u("div",{key:U,class:K(["flex justify-between border-t border-gray-200 dark:border-gray-700 p-4",{"bg-gray-50 dark:bg-gray-800":U%2===0}])},[t("div",Is,d(le(a.metric)),1),t("div",Ws,d(C(a.metric,a.original)),1),t("div",As,d(C(a.metric,a.worst_5)),1),t("div",Ks,d(C(a.metric,a.median)),1),t("div",Gs,d(C(a.metric,a.best_5)),1)],2))),128))])])):(i(),u("div",Js,[t("div",Ys,[t("div",Qs,[t("div",Xs,[s(n,{class:"h-4 w-20"})]),t("div",Zs,[s(n,{class:"h-4 w-16"})]),t("div",et,[s(n,{class:"h-4 w-16"})]),t("div",st,[s(n,{class:"h-4 w-16"})]),t("div",tt,[s(n,{class:"h-4 w-16"})])]),(i(),u(j,null,D(4,a=>t("div",{key:a,class:"flex justify-between border-t border-gray-200 dark:border-gray-700 p-4"},[t("div",at,[s(n,{class:"h-4 w-24"})]),t("div",lt,[s(n,{class:"h-4 w-16"})]),t("div",ot,[s(n,{class:"h-4 w-16"})]),t("div",nt,[s(n,{class:"h-4 w-16"})]),t("div",rt,[s(n,{class:"h-4 w-16"})])])),64))])]))])):c("",!0),r.value.run_candles?(i(),u("div",it,[s(p,{title:"ðŸ“ˆ Monte Carlo Candles",class:"mb-4"}),o.value.candles.progressbar.total>0&&o.value.candles.progressbar.current<o.value.candles.progressbar.total?(i(),u("div",ut,[t("div",dt,[t("p",ct," Running Candles Simulation... ("+d(o.value.candles.progressbar.current)+"/"+d(o.value.candles.progressbar.total)+") ",1),o.value.candles.progressbar.estimated_remaining_seconds>0?(i(),u("p",mt,d(M(G).remainingTimeText(o.value.candles.progressbar.estimated_remaining_seconds)),1)):c("",!0)]),t("pre",null,d(T.value)+" "+d(y.value),1),t("pre",null,d(typeof T.value)+" "+d(typeof y.value),1),s(ne,{modelValue:T.value,"onUpdate:modelValue":e[5]||(e[5]=a=>T.value=a),max:y.value,status:"",size:"lg",color:"primary"},null,8,["modelValue","max"])])):c("",!0),t("div",vt,[s(p,{title:"Equity Curve",class:"mb-4"}),Y.value.length?(i(),u("div",_t,[s(re,{data:Y.value},null,8,["data"])])):(i(),u("div",gt,[t("div",pt,[s(n,{class:"h-8 w-3/4"}),s(n,{class:"h-8 w-full"}),s(n,{class:"h-8 w-5/6"}),s(n,{class:"h-8 w-full"}),s(n,{class:"h-8 w-4/5"}),s(n,{class:"h-8 w-full"}),s(n,{class:"h-8 w-3/4"}),s(n,{class:"h-8 w-full"}),s(n,{class:"h-8 w-5/6"}),s(n,{class:"h-8 w-full"}),s(n,{class:"h-8 w-4/5"}),s(n,{class:"h-8 w-full"})])]))]),o.value.candles.summary_metrics.length?(i(),u("div",ft,[t("div",yt,[e[31]||(e[31]=t("div",{class:"flex justify-between font-semibold p-4 bg-gray-100 dark:bg-gray-900 text-sm"},[t("div",{class:"w-[25%]"},"Metric"),t("div",{class:"w-[18%]"},"Original"),t("div",{class:"w-[19%]"},"Worst 5%"),t("div",{class:"w-[19%]"},"Median"),t("div",{class:"w-[19%]"},"Best 5%")],-1)),(i(!0),u(j,null,D(o.value.candles.summary_metrics,(a,U)=>(i(),u("div",{key:U,class:K(["flex justify-between border-t border-gray-200 dark:border-gray-700 p-4",{"bg-gray-50 dark:bg-gray-800":U%2===0}])},[t("div",ht,d(le(a.metric)),1),t("div",bt,d(C(a.metric,a.original)),1),t("div",wt,d(C(a.metric,a.worst_5)),1),t("div",xt,d(C(a.metric,a.median)),1),t("div",kt,d(C(a.metric,a.best_5)),1)],2))),128))])])):(i(),u("div",Vt,[t("div",Ct,[t("div",St,[t("div",Mt,[s(n,{class:"h-4 w-20"})]),t("div",Tt,[s(n,{class:"h-4 w-16"})]),t("div",Ut,[s(n,{class:"h-4 w-16"})]),t("div",$t,[s(n,{class:"h-4 w-16"})]),t("div",jt,[s(n,{class:"h-4 w-16"})])]),(i(),u(j,null,D(4,a=>t("div",{key:a,class:"flex justify-between border-t border-gray-200 dark:border-gray-700 p-4"},[t("div",zt,[s(n,{class:"h-4 w-24"})]),t("div",Nt,[s(n,{class:"h-4 w-16"})]),t("div",Rt,[s(n,{class:"h-4 w-16"})]),t("div",Dt,[s(n,{class:"h-4 w-16"})]),t("div",Et,[s(n,{class:"h-4 w-16"})])])),64))])]))])):c("",!0)])):c("",!0),!o.value.executing&&!o.value.showResults?(i(),u("div",qt,[s(p,{class:"mb-4",title:"Exchange"}),s(ie,{modelValue:r.value.exchange,"onUpdate:modelValue":e[6]||(e[6]=a=>r.value.exchange=a),placeholder:"Select an exchange...",searchable:"",options:M(A)().backtestingExchangeNames,size:"lg",class:"mt-2 mb-16",onChange:R},null,8,["modelValue","options"]),s(Ue,{"total-routes-error":w.value,form:r.value,results:o.value,mode:"monte-carlo",symbols:N.value,timeframes:P.value},null,8,["total-routes-error","form","results","symbols","timeframes"]),s(p,{class:"mt-16 mb-4",title:"Duration"}),t("div",Lt,[s(ue,{modelValue:r.value.start_date,"onUpdate:modelValue":e[7]||(e[7]=a=>r.value.start_date=a),type:"date",variant:"outline",size:"lg",class:"w-full mr-2"},null,8,["modelValue"]),s(ue,{modelValue:r.value.finish_date,"onUpdate:modelValue":e[8]||(e[8]=a=>r.value.finish_date=a),type:"date",variant:"outline",size:"lg",class:"w-full ml-2"},null,8,["modelValue"])]),s(p,{class:"mt-16 mb-4",title:"Simulation Types"}),t("div",Ft,[t("div",Ot,[s(de,{modelValue:r.value.run_trades,"onUpdate:modelValue":e[9]||(e[9]=a=>r.value.run_trades=a),label:"Run Trades Simulation"},null,8,["modelValue"])]),t("div",Bt,[s(de,{modelValue:r.value.run_candles,"onUpdate:modelValue":e[10]||(e[10]=a=>r.value.run_candles=a),label:"Run Candles Simulation"},null,8,["modelValue"])])]),s(p,{class:"mt-16 mb-4",title:"Scenarios"}),s(L,{modelValue:r.value.num_scenarios,"onUpdate:modelValue":e[11]||(e[11]=a=>r.value.num_scenarios=a),title:"Number of scenarios:"},null,8,["modelValue"]),r.value.run_candles?(i(),u("div",Ht,[s(p,{class:"mt-16 mb-4",title:"Pipeline Configuration"}),t("div",Pt,[t("div",null,[e[32]||(e[32]=t("label",{class:"text-sm font-medium text-gray-700 dark:text-gray-200 mb-2 block"},"Pipeline Type",-1)),s(ie,{modelValue:r.value.pipeline_type,"onUpdate:modelValue":e[12]||(e[12]=a=>r.value.pipeline_type=a),options:[{label:"Moving Block Bootstrap",value:"moving_block_bootstrap"},{label:"Gaussian Noise",value:"gaussian"}],size:"lg"},null,8,["modelValue"])]),t("div",null,[s(L,{modelValue:r.value.pipeline_params.batch_size,"onUpdate:modelValue":e[13]||(e[13]=a=>r.value.pipeline_params.batch_size=a),title:"Batch Size:"},null,8,["modelValue"])]),r.value.pipeline_type==="gaussian"?(i(),u("div",It,[s(L,{modelValue:r.value.pipeline_params.close_sigma,"onUpdate:modelValue":e[14]||(e[14]=a=>r.value.pipeline_params.close_sigma=a),title:"Close Sigma:",step:1e-4},null,8,["modelValue"]),s(L,{modelValue:r.value.pipeline_params.high_sigma,"onUpdate:modelValue":e[15]||(e[15]=a=>r.value.pipeline_params.high_sigma=a),title:"High Sigma:",step:1e-4},null,8,["modelValue"]),s(L,{modelValue:r.value.pipeline_params.low_sigma,"onUpdate:modelValue":e[16]||(e[16]=a=>r.value.pipeline_params.low_sigma=a),title:"Low Sigma:",step:1e-4},null,8,["modelValue"])])):c("",!0)])])):c("",!0),s(p,{class:"mt-16 mb-4",title:"Options"}),t("div",Wt,[s($e,{modelValue:r.value.fast_mode,"onUpdate:modelValue":e[17]||(e[17]=a=>r.value.fast_mode=a),title:"Fast Mode",description:"Runs the simulation faster using an improved algorithm. Use with caution as this is experimental."},null,8,["modelValue"])])])):c("",!0)]),right:S(()=>[!o.value.executing&&!o.value.showResults?(i(),u("div",At,[t("div",null,[s(g,{class:"w-full flex justify-center",icon:"i-heroicons-bolt",size:"xl",variant:"solid",label:"Start",trailing:!1,onClick:e[18]||(e[18]=a=>Q())}),s(g,{class:"w-full flex justify-center mt-4",icon:"i-heroicons-clock",size:"xl",variant:"solid",color:"gray",label:"History",trailing:!1,onClick:e[19]||(e[19]=a=>X())})])])):c("",!0),o.value.executing&&!o.value.showResults?(i(),u("div",Kt,[t("div",Gt,[o.value.trades.exception.error||o.value.candles.exception.error?(i(),F(g,{key:0,class:"w-full flex justify-center mt-4",icon:"i-heroicons-arrow-uturn-left",size:"xl",variant:"solid",color:"green",label:"New Session",trailing:!1,onClick:e[20]||(e[20]=a=>M($)().newSession())})):o.value.showResults?c("",!0):(i(),F(g,{key:1,color:"gray",ui:{color:{gray:{solid:"text-rose-500 dark:text-rose-400"}}},class:"w-full flex justify-center mt-4",icon:"i-heroicons-pause",size:"xl",variant:"solid",label:"Terminate",trailing:!1,onClick:e[21]||(e[21]=a=>fe())})),t("div",Jt,[s(g,{class:"w-full flex justify-center",color:"gray",size:"xl",variant:"solid",label:"Logs",icon:"i-heroicons-document-text",trailing:!1,onClick:e[22]||(e[22]=a=>o.value.logsModal=!0)}),s(g,{class:"w-full flex justify-center",color:"gray",size:"xl",variant:"solid",label:"History",icon:"i-heroicons-clock",trailing:!1,onClick:e[23]||(e[23]=a=>X())})])])])):c("",!0),o.value.showResults?(i(),u("div",Yt,[t("div",Qt,[ae.value?(i(),F(g,{key:0,class:"w-full flex justify-center",icon:"i-heroicons-play",size:"xl",variant:"solid",color:"primary",label:"Resume",trailing:!1,onClick:e[24]||(e[24]=a=>be())})):c("",!0),s(g,{class:K(["w-full flex justify-center",{"mt-4":ae.value}]),icon:"i-heroicons-arrow-uturn-left",size:"xl",variant:"solid",color:"green",label:"New Session",trailing:!1,onClick:e[25]||(e[25]=a=>M($)().newSession())},null,8,["class"]),t("div",Xt,[s(g,{class:"w-full flex justify-center",color:"gray",size:"xl",variant:"solid",label:"Logs",icon:"i-heroicons-document-text",trailing:!1,onClick:e[26]||(e[26]=a=>o.value.logsModal=!0)}),s(g,{class:"w-full flex justify-center",color:"gray",size:"xl",variant:"solid",label:"History",icon:"i-heroicons-clock",trailing:!1,onClick:e[27]||(e[27]=a=>X())})])])])):c("",!0),(o.value.executing||o.value.showResults)&&o.value.generalInfo.length?(i(),u("div",Zt,[s(p,{title:"Info",class:"mb-4"}),s(ce,{data:o.value.generalInfo},null,8,["data"]),s(me,{class:"mt-8 mb-4",size:"lg",label:"Duration"}),s(ce,{data:Me(r.value)},null,8,["data"]),s(me,{class:"mt-8 mb-4",size:"lg",label:"Routes"}),s(je,{data:Se(r.value.routes),"header-items":["Symbol","Timeframe","Strategy"],header:""},null,8,["data"])])):c("",!0)]),_:1}),s(Ne,{modelValue:k.value,"onUpdate:modelValue":e[28]||(e[28]=a=>k.value=a)},{default:S(()=>[t("div",ea,[e[35]||(e[35]=t("h3",{class:"text-lg font-medium leading-6 text-gray-900 dark:text-white"}," Confirm Deletion ",-1)),e[36]||(e[36]=t("div",{class:"mt-2"},[t("p",{class:"text-sm text-gray-500 dark:text-gray-400"}," Are you sure you want to delete this Monte Carlo session? This action cannot be undone. ")],-1)),t("div",sa,[s(g,{color:"gray",variant:"ghost",onClick:Ve},{default:S(()=>e[33]||(e[33]=[_e(" Cancel ")])),_:1}),s(g,{color:"red",onClick:ke},{default:S(()=>e[34]||(e[34]=[_e(" Delete ")])),_:1})])])]),_:1},8,["modelValue"])],64)}}});export{ga as default};
