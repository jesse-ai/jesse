import{z as u,g as c,j as n,bm as T,bn as z,V as h,h as f,s as k,bo as H,d as R,b6 as S,c as C,r as p,H as U,I as M,i,am as E,W as t,bp as F,Z as $,X as V,a$ as I,f as m,G as L,L as A,J as G,T as J,t as K,a0 as P,K as W,as as X,a3 as q,y as O}from"./BZBcjETW.js";function Q(r,a){return c(),u("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[n("path",{d:"M5.625 1.5c-1.036 0-1.875.84-1.875 1.875v17.25c0 1.035.84 1.875 1.875 1.875h12.75c1.035 0 1.875-.84 1.875-1.875V12.75A3.75 3.75 0 0 0 16.5 9h-1.875a1.875 1.875 0 0 1-1.875-1.875V5.25A3.75 3.75 0 0 0 9 1.5H5.625Z"}),n("path",{d:"M12.971 1.816A5.23 5.23 0 0 1 14.25 5.25v1.875c0 .207.168.375.375.375H16.5a5.23 5.23 0 0 1 3.434 1.279 9.768 9.768 0 0 0-6.963-6.963Z"})])}function B(r,a){return c(),u("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[n("path",{"fill-rule":"evenodd",d:"M10.5 3.75a6.75 6.75 0 1 0 0 13.5 6.75 6.75 0 0 0 0-13.5ZM2.25 10.5a8.25 8.25 0 1 1 14.59 5.28l4.69 4.69a.75.75 0 1 1-1.06 1.06l-4.69-4.69A8.25 8.25 0 0 1 2.25 10.5Z","clip-rule":"evenodd"})])}function Y(r,a){return c(),u("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[n("path",{"fill-rule":"evenodd",d:"M5.47 5.47a.75.75 0 0 1 1.06 0L12 10.94l5.47-5.47a.75.75 0 1 1 1.06 1.06L13.06 12l5.47 5.47a.75.75 0 1 1-1.06 1.06L12 13.06l-5.47 5.47a.75.75 0 0 1-1.06-1.06L10.94 12 5.47 6.53a.75.75 0 0 1 0-1.06Z","clip-rule":"evenodd"})])}const x=T("strategies",{state:()=>({strategies:[]}),persist:{storage:z.localStorage},actions:{async getStrategies(){const{data:r,error:a}=await H("/strategy/all",!0);if(a.value&&a.value.statusCode!==200){f(a);return}const s=r.value;this.strategies=s.strategies},async getStrategy(r){const{data:a,error:s}=await h("/strategy/get",{name:r},!0);return s.value&&s.value.statusCode!==200?(f(s),""):a.value.content},async saveStrategy(r,a){const{data:s,error:e}=await h("/strategy/save",{name:r,content:a},!0);if(e.value&&e.value.statusCode!==200){f(e);return}const d=s.value;k("success",d.message)},async deleteStrategy(r){const{data:a,error:s}=await h("/strategy/delete",{name:r},!0);if(s.value&&s.value.statusCode!==200){f(s);return}const e=a.value;k("success",e.message),this.strategies=this.strategies.filter(d=>d!==r)}}}),ee={class:"flex flex-col border-r dark:border-gray-600",style:{height:"calc(100vh - 4rem - 4px)"}},te={class:"flex-shrink-0 flex justify-between items-center border-b dark:border-gray-600 relative"},ae={class:"flex-1 overflow-auto"},se={key:0,class:"flex flex-col items-center justify-center py-8 px-4 text-center"},re={class:"text-sm text-gray-600 dark:text-gray-400"},oe=["onMouseenter"],ne=R({__name:"StrategiesSidebar",setup(r){const a=S(),s=C(()=>x().strategies),e=p(""),d=p(null),v=p(!1),y=p(null),_=C(()=>s.value.filter(g=>g.toLowerCase().includes(e.value.toLowerCase())));function D(g){y.value=g,v.value=!0}async function N(){if(!y.value)return;const g=y.value;await x().deleteStrategy(g),v.value=!1,y.value=null,S().params.name===g&&q().push("/strategies")}return U(async()=>{setTimeout(async()=>{await x().getStrategies()},200)}),(g,l)=>{const Z=J,w=K,j=X;return c(),u(M,null,[n("div",ee,[n("div",te,[i(t(B),{class:"absolute left-3 w-4 h-4 text-gray-400 dark:text-gray-500 pointer-events-none"}),E(n("input",{"onUpdate:modelValue":l[0]||(l[0]=o=>V(e)?e.value=o:null),class:$(["w-full pl-10 pr-4 py-2 bg-gray-50 focus:outline-none dark:bg-backdrop-dark",{"pr-10":t(e)}]),placeholder:"Search strategies..."},null,2),[[F,t(e)]]),i(I,{name:"fade"},{default:m(()=>[t(e)?(c(),u("button",{key:0,class:"absolute right-2 p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded transition-colors",onClick:l[1]||(l[1]=o=>e.value="")},[i(t(Y),{class:"w-4 h-4 text-gray-500 dark:text-gray-400"})])):L("",!0)]),_:1})]),n("div",ae,[t(_).length===0&&t(e)?(c(),u("div",se,[i(t(B),{class:"w-12 h-12 text-gray-400 dark:text-gray-600 mb-3"}),n("p",re,' No matches for "'+A(t(e))+'" ',1)])):L("",!0),(c(!0),u(M,null,G(t(_),o=>(c(),u("div",{key:o,class:$(["group relative px-4 py-2 cursor-pointer select-none flex items-center justify-between",t(a).params.name===o?"bg-gray-100 dark:bg-gray-800":"bg-gray-50 dark:bg-backdrop-dark hover:bg-gray-100 dark:hover:bg-gray-800"]),onMouseenter:b=>d.value=o,onMouseleave:l[2]||(l[2]=b=>d.value=null)},[i(Z,{to:`/strategies/${o}`,class:"flex items-center flex-1"},{default:m(()=>[i(t(Q),{class:"w-4 h-4 mr-2"}),n("span",null,A(o),1)]),_:2},1032,["to"]),i(w,{size:"xs",icon:"i-heroicons-trash",color:"gray",variant:"link",style:W({visibility:t(d)===o?"visible":"hidden"}),onClick:P(b=>D(o),["prevent"])},null,8,["style","onClick"])],42,oe))),128))])]),i(j,{modelValue:t(v),"onUpdate:modelValue":l[3]||(l[3]=o=>V(v)?v.value=o:null),title:"Delete strategy",description:`Are you sure you want to delete the strategy '${t(y)}'?`,type:"info"},{default:m(()=>[i(w,{variant:"solid",color:"red",class:"flex justify-center",label:"Delete",onClick:N})]),_:1},8,["modelValue","description"])],64)}}}),ie=O(ne,[["__scopeId","data-v-f6d79cac"]]);export{ie as S,x as u};
