import{C as i,g as n,j as a,d as ae,c as M,aH as ne,r as D,i as o,f as l,F as H,O as W,E as x,x as e,G as V,H as c,D as I,v as ie,a3 as le,_ as de,e as B,ad as S,k as ge,aI as j,aq as k,ae as ce,y as G,z as ue,t as he,A as b,a0 as z,s as ye,a4 as pe,Q as ve}from"./CCP630y_.js";import{r as ke,a as fe,b as P,c as Q}from"./DIRnqvt5.js";function Y(w,_){return n(),i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z"})])}function J(w,_){return n(),i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 6.878V6a2.25 2.25 0 0 1 2.25-2.25h7.5A2.25 2.25 0 0 1 18 6v.878m-12 0c.235-.083.487-.128.75-.128h10.5c.263 0 .515.045.75.128m-12 0A2.25 2.25 0 0 0 4.5 9v.878m13.5-3A2.25 2.25 0 0 1 19.5 9v.878m0 0a2.246 2.246 0 0 0-.75-.128H5.25c-.263 0-.515.045-.75.128m15 0A2.25 2.25 0 0 1 21 12v6a2.25 2.25 0 0 1-2.25 2.25H5.25A2.25 2.25 0 0 1 3 18v-6c0-.98.626-1.813 1.5-2.122"})])}function X(w,_){return n(),i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 6A2.25 2.25 0 0 1 6 3.75h2.25A2.25 2.25 0 0 1 10.5 6v2.25a2.25 2.25 0 0 1-2.25 2.25H6a2.25 2.25 0 0 1-2.25-2.25V6ZM3.75 15.75A2.25 2.25 0 0 1 6 13.5h2.25a2.25 2.25 0 0 1 2.25 2.25V18a2.25 2.25 0 0 1-2.25 2.25H6A2.25 2.25 0 0 1 3.75 18v-2.25ZM13.5 6a2.25 2.25 0 0 1 2.25-2.25H18A2.25 2.25 0 0 1 20.25 6v2.25A2.25 2.25 0 0 1 18 10.5h-2.25a2.25 2.25 0 0 1-2.25-2.25V6ZM13.5 15.75a2.25 2.25 0 0 1 2.25-2.25H18a2.25 2.25 0 0 1 2.25 2.25V18A2.25 2.25 0 0 1 18 20.25h-2.25A2.25 2.25 0 0 1 13.5 18v-2.25Z"})])}const xe={class:"mb-0"},be={class:"hidden lg:block"},me={class:"relative flex items-center px-2 border-b border-gray-200 dark:border-gray-700","aria-label":"Tabs"},we={class:"relative z-10 flex items-center gap-1 py-1 shrink-0"},_e={class:"relative z-10 flex-1 min-w-0"},Ce={class:"flex items-center gap-1 py-1 pl-1 pr-1 min-w-0 overflow-hidden"},$e=["onClick"],Te={key:0,class:"mr-2 shrink-0"},Me={key:1,class:"h-2 w-2 rounded-full bg-rose-500"},Ve=["onDblclick"],je=["onClick"],Ae=["onClick"],De={class:"lg:hidden flex flex-col gap-1"},He={class:"flex items-center gap-2 px-2 py-2 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-backdrop-dark"},Ie={class:"flex items-center gap-2 min-w-0"},Be={key:0,class:"h-2 w-2 rounded-full bg-green-500 shrink-0 animate-pulse"},Se={class:"text-sm font-bold truncate text-gray-700 dark:text-gray-200"},ze={class:"flex items-center gap-1.5 shrink-0"},Le={class:"flex items-center justify-between"},Ne={class:"py-2 space-y-1 max-h-[60vh] overflow-y-auto"},Ue=["onClick"],Ee={key:0,class:"shrink-0"},Oe={key:0,class:"h-2.5 w-2.5 rounded-full bg-green-500"},Re={key:1,class:"h-2.5 w-2.5 rounded-full bg-rose-500"},Ze={class:"flex-1 min-w-0"},Ke=["onDblclick"],Fe={key:0,class:"text-[10px] font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider mt-0.5"},qe={key:1,class:"flex items-center shrink-0"},We=["onClick"],Ge=["onClick"],Pe=ae({__name:"LiveTabs",props:{currentTab:{},tabs:{}},emits:["close","cancel"],setup(w,{emit:_}){const h=ne(),y=M(()=>h.params.id),f=D(!1),p=D(null),u=D(""),L={mounted:t=>{const s=t.querySelector("input")||t;s.focus(),s instanceof HTMLInputElement&&s.select()}},ee=_,N=w,U=M(()=>Object.keys(N.tabs).length),C=M(()=>U.value>1),E=M(()=>U.value<=10);function O(t){if(Object.keys(b().tabs).length>=z().planLimits.live_trading_tabs){ye("error",`You have reached the limit of "${z().planLimits.live_trading_tabs}" tabs for your "${z().plan}" plan. Please upgrade your plan to add more tabs.`);return}b().addTab(t)}function re(){f.value=!1,O(N.currentTab)}function R(t){pe().push(`/live/${t}`)}function te(t){f.value=!1,R(t)}function m(t){if(t.results.generalInfo.title)return t.results.generalInfo.title;if(!t.form.routes.length)return"New Tab";const s=t.form.routes[0];let d="";return s.strategy&&(d+=`${s.strategy} • `),s.symbol&&(d+=`${s.symbol} • `),s.timeframe&&(d+=`${s.timeframe}`),d=d.endsWith(" • ")?d.slice(0,-3):d,t.results.showResults?`${d} | Results`:d}function A(t){if(["starting","running","stopping"].includes(t.results.phase)&&!t.results.exception.error){b().openStopConfirmModal(t.id);return}ee("close",t.id)}function Z(t){p.value=t.id,u.value=t.results.generalInfo.title||m(t)}async function $(t){if(!p.value||u.value===(t.results.generalInfo.title||"")){T();return}await b().updateSessionNotes(t.id,u.value,t.results.generalInfo.description||"")&&(t.results.generalInfo.title=u.value),T()}function T(){p.value=null,u.value=""}return(t,s)=>{var q;const d=ie,v=le,K=ge,F=he,se=ue,oe=de;return n(),i("div",xe,[a("div",be,[a("nav",me,[s[8]||(s[8]=a("div",{"aria-hidden":"true",class:"absolute inset-0 z-0 bg-gray-50/50 dark:bg-backdrop-dark/50 backdrop-blur-sm pointer-events-none"},null,-1)),a("div",we,[o(d,{text:"New Tab",popper:{arrow:!0,offsetDistance:10}},{default:l(()=>[a("button",{class:"flex items-center justify-center p-1.5 text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 hover:bg-gray-200/50 dark:hover:bg-gray-700/30 rounded-lg cursor-pointer transition-all duration-300 h-8 w-8",onClick:s[0]||(s[0]=r=>O(t.currentTab))},[o(e(fe),{class:"h-5 w-5"})])]),_:1}),o(d,{text:"Sessions History",popper:{arrow:!0,offsetDistance:10}},{default:l(()=>[o(v,{href:"/live/history",class:c([e(h).path==="/live/history"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-white ring-1 ring-gray-200 dark:ring-gray-600":"text-gray-400 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 hover:bg-gray-200/50 dark:hover:bg-gray-700/30","flex items-center justify-center p-1.5 rounded-lg cursor-pointer transition-all duration-300 h-8 w-8"])},{default:l(()=>[o(e(P),{class:"h-5 w-5"})]),_:1},8,["class"])]),_:1}),o(d,{text:"Orders History",popper:{arrow:!0,offsetDistance:10}},{default:l(()=>[o(v,{href:"/live/orders-history",class:c([e(h).path==="/live/orders-history"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-white ring-1 ring-gray-200 dark:ring-gray-600":"text-gray-400 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 hover:bg-gray-200/50 dark:hover:bg-gray-700/30","flex items-center justify-center p-1.5 rounded-lg cursor-pointer transition-all duration-300 h-8 w-8"])},{default:l(()=>[o(e(J),{class:"h-5 w-5"})]),_:1},8,["class"])]),_:1}),o(d,{text:"Trades History",popper:{arrow:!0,offsetDistance:10}},{default:l(()=>[o(v,{href:"/live/trades-history",class:c([e(h).path==="/live/trades-history"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-white ring-1 ring-gray-200 dark:ring-gray-600":"text-gray-400 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 hover:bg-gray-200/50 dark:hover:bg-gray-700/30","flex items-center justify-center p-1.5 rounded-lg cursor-pointer transition-all duration-300 h-8 w-8"])},{default:l(()=>[o(e(Y),{class:"h-5 w-5"})]),_:1},8,["class"])]),_:1}),o(d,{text:"Overview",popper:{arrow:!0,offsetDistance:10}},{default:l(()=>[o(v,{href:"/live/overview",class:c([e(h).path==="/live/overview"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-white ring-1 ring-gray-200 dark:ring-gray-600":"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 hover:bg-gray-200/50 dark:hover:bg-gray-700/30","flex items-center gap-2 px-3 py-1.5 text-xs font-bold rounded-lg cursor-pointer transition-all duration-300 select-none h-8"])},{default:l(()=>[o(e(X),{class:"h-5 w-5"}),s[7]||(s[7]=a("span",null,"OVERVIEW",-1))]),_:1},8,["class"])]),_:1})]),s[9]||(s[9]=a("div",{class:"relative z-10 w-px h-6 bg-gray-300 dark:bg-gray-600 ml-3 mr-2 shrink-0"},null,-1)),a("div",_e,[a("div",Ce,[(n(!0),i(H,null,W(t.tabs,r=>(n(),B(d,{key:r.id,class:"flex-shrink min-w-0",text:m(r),"open-delay":700,popper:{arrow:!0,offsetDistance:10},onMouseup:k(g=>A(r),["middle"])},{default:l(()=>[a("div",{class:c([r.id===e(y)?"bg-white dark:bg-gray-700 text-gray-900 dark:text-white ring-1 ring-gray-200 dark:ring-gray-600":"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 hover:bg-gray-200/50 dark:hover:bg-gray-700/30","group relative flex items-center py-1 text-xs font-bold rounded-lg cursor-pointer transition-all duration-300 select-none overflow-hidden h-8 max-w-[240px] min-w-0","px-2"]),onClick:g=>R(r.id)},[["running","starting","error"].includes(r.results.phase)?(n(),i("div",Te,[["running","starting"].includes(r.results.phase)?(n(),i("div",{key:0,class:c(["h-2 w-2 rounded-full bg-green-500",r.results.phase==="running"?"animate-pulse":""])},null,2)):r.results.phase==="error"?(n(),i("div",Me)):x("",!0)])):x("",!0),e(p)===r.id?S((n(),B(K,{key:1,modelValue:e(u),"onUpdate:modelValue":s[1]||(s[1]=g=>I(u)?u.value=g:null),size:"2xs",class:"flex-1 min-w-0",onKeyup:[j(g=>$(r),["enter"]),j(T,["esc"])],onBlur:g=>$(r)},null,8,["modelValue","onKeyup","onBlur"])),[[L]]):(n(),i("span",{key:2,class:c(["flex-1 min-w-0 whitespace-nowrap overflow-hidden text-clip text-left pr-8",e(C)&&r.id===e(y)&&e(p)!==r.id?"tab-text-fade-active":"",e(C)&&r.id!==e(y)&&e(E)&&e(p)!==r.id?"tab-text-fade-hover":""]),onDblclick:k(g=>Z(r),["stop"])},V(m(r)),43,Ve)),S(a("div",{class:c(["absolute right-1 top-1/2 -translate-y-1/2 z-10 flex items-center justify-end transition-opacity duration-150",r.id===e(y)?"opacity-100 pointer-events-auto":e(E)?"opacity-0 pointer-events-none group-hover:opacity-100 group-hover:pointer-events-auto":"opacity-0 pointer-events-none"])},[["starting","running","stopping"].includes(r.results.phase)?(n(),i("button",{key:0,class:"p-0.5 rounded-full text-gray-500 dark:text-gray-400 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 hover:text-gray-700 dark:hover:text-gray-200 transition-all focus:outline-none",onClick:k(g=>e(b)().openStopConfirmModal(r.id),["stop"])},[o(e(Q),{class:"h-3.5 w-3.5"})],8,je)):(n(),i("button",{key:1,class:"p-0.5 rounded-full text-gray-500 dark:text-gray-400 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 hover:text-gray-700 dark:hover:text-gray-200 transition-all focus:outline-none",onClick:k(g=>A(r),["stop"])},[o(e(G),{class:"h-3.5 w-3.5"})],8,Ae))],2),[[ce,e(C)&&e(p)!==r.id]])],10,$e)]),_:2},1032,["text","onMouseup"]))),128))])])])]),a("div",De,[a("div",He,[a("button",{class:"flex-1 flex items-center justify-between gap-2 px-3 h-10 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl active:scale-95 transition-all overflow-hidden",onClick:s[2]||(s[2]=r=>f.value=!0)},[a("div",Ie,[((q=t.tabs[e(y)])==null?void 0:q.results.phase)==="running"?(n(),i("div",Be)):x("",!0),a("span",Se,V(t.tabs[e(y)]?m(t.tabs[e(y)]):"Select Tab"),1)]),o(e(ke),{class:"h-4 w-4 text-gray-400 shrink-0"})]),a("div",ze,[o(v,{href:"/live/history",class:c([e(h).path==="/live/history"?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 border border-indigo-200 dark:border-indigo-800":"bg-white dark:bg-gray-800 text-gray-600 dark:text-gray-300 border border-gray-200 dark:border-gray-700","flex items-center justify-center rounded-xl transition-all h-10 w-10"])},{default:l(()=>[o(e(P),{class:"h-5 w-5"})]),_:1},8,["class"]),o(v,{href:"/live/orders-history",class:c([e(h).path==="/live/orders-history"?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 border border-indigo-200 dark:border-indigo-800":"bg-white dark:bg-gray-800 text-gray-600 dark:text-gray-300 border border-gray-200 dark:border-gray-700","flex items-center justify-center rounded-xl transition-all h-10 w-10"])},{default:l(()=>[o(e(J),{class:"h-5 w-5"})]),_:1},8,["class"]),o(v,{href:"/live/trades-history",class:c([e(h).path==="/live/trades-history"?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 border border-indigo-200 dark:border-indigo-800":"bg-white dark:bg-gray-800 text-gray-600 dark:text-gray-300 border border-gray-200 dark:border-gray-700","flex items-center justify-center rounded-xl transition-all h-10 w-10"])},{default:l(()=>[o(e(Y),{class:"h-5 w-5"})]),_:1},8,["class"]),o(v,{href:"/live/overview",class:c([e(h).path==="/live/overview"?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 border border-indigo-200 dark:border-indigo-800":"bg-white dark:bg-gray-800 text-gray-600 dark:text-gray-300 border border-gray-200 dark:border-gray-700","flex items-center justify-center rounded-xl transition-all h-10 w-10"])},{default:l(()=>[o(e(X),{class:"h-5 w-5"})]),_:1},8,["class"])])]),o(oe,{modelValue:e(f),"onUpdate:modelValue":s[6]||(s[6]=r=>I(f)?f.value=r:null),ui:{width:"max-w-md"}},{default:l(()=>[o(se,{ui:{ring:"",shadow:"shadow-none",divide:"divide-y divide-gray-100 dark:divide-gray-800"}},{header:l(()=>[a("div",Le,[s[10]||(s[10]=a("h3",{class:"text-base font-bold text-gray-900 dark:text-white"}," Live Sessions ",-1)),o(F,{color:"gray",variant:"ghost",icon:"i-heroicons-x-mark-20-solid",class:"-my-1",onClick:s[3]||(s[3]=r=>f.value=!1)})])]),footer:l(()=>[o(F,{block:"",color:"gray",variant:"solid",icon:"i-heroicons-plus-circle",label:"New tab",size:"lg",class:"font-bold rounded-xl",onClick:re})]),default:l(()=>[a("div",Ne,[(n(!0),i(H,null,W(t.tabs,r=>(n(),i("div",{key:r.id,class:"px-2"},[a("div",{class:c([r.id===e(y)?"bg-indigo-50 dark:bg-indigo-900/20 ring-2 ring-indigo-500/50":"bg-gray-50 dark:bg-gray-800/50 hover:bg-gray-100 dark:hover:bg-gray-800 active:bg-gray-200 dark:active:bg-gray-700","flex items-center gap-3 p-3 rounded-xl transition-all cursor-pointer group"]),onClick:g=>te(r.id)},[["running","starting","error"].includes(r.results.phase)?(n(),i("div",Ee,[["running","starting"].includes(r.results.phase)?(n(),i("div",Oe)):r.results.phase==="error"?(n(),i("div",Re)):x("",!0)])):x("",!0),a("div",Ze,[e(p)===r.id?S((n(),B(K,{key:0,modelValue:e(u),"onUpdate:modelValue":s[4]||(s[4]=g=>I(u)?u.value=g:null),size:"sm",class:"w-full",onKeyup:[j(g=>$(r),["enter"]),j(T,["esc"])],onBlur:g=>$(r),onClick:s[5]||(s[5]=k(()=>{},["stop"]))},null,8,["modelValue","onKeyup","onBlur"])),[[L]]):(n(),i(H,{key:1},[a("div",{class:c(["text-sm font-bold truncate",r.id===e(y)?"text-indigo-600 dark:text-indigo-400":"text-gray-700 dark:text-gray-200"]),onDblclick:k(g=>Z(r),["stop"])},V(m(r)),43,Ke),r.results.phase?(n(),i("div",Fe,V(r.results.phase),1)):x("",!0)],64))]),e(C)&&e(p)!==r.id?(n(),i("div",qe,[["starting","running","stopping"].includes(r.results.phase)?(n(),i("button",{key:0,class:"p-2 rounded-lg text-gray-500 dark:text-gray-400 bg-gray-100 dark:bg-gray-700 active:scale-95 transition-all",onClick:k(g=>e(b)().openStopConfirmModal(r.id),["stop"])},[o(e(Q),{class:"h-4 w-4"})],8,We)):(n(),i("button",{key:1,class:"p-2 rounded-lg text-gray-500 dark:text-gray-400 bg-gray-100 dark:bg-gray-700 active:scale-95 transition-all",onClick:k(g=>A(r),["stop"])},[o(e(G),{class:"h-4 w-4"})],8,Ge))])):x("",!0)],10,Ue)]))),128))])]),_:1})]),_:1},8,["modelValue"])])])}}}),Je=ve(Pe,[["__scopeId","data-v-54b92cce"]]);export{Je as _};
