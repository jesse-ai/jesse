import{C as l,j as a,g as n,d as se,b as A,a0 as ae,r as V,c as I,aK as oe,i as o,f as c,F as z,O as J,E as v,x as t,G as M,e as $,H as g,D as U,v as ne,a3 as le,_ as ie,ad as R,k as de,ax as D,ar as p,ae as ce,y as X,z as ue,t as ge,aL as ye,R as ke,a4 as pe,Q as xe}from"./CtRP3raE.js";import{r as he,a as fe,b as Y,c as Z}from"./qfOJj_Il.js";function S(L,N){return n(),l("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.429 9.75 2.25 12l4.179 2.25m0-4.5 5.571 3 5.571-3m-11.142 0L2.25 7.5 12 2.25l9.75 5.25-4.179 2.25m0 0L21.75 12l-4.179 2.25m0 0 4.179 2.25L12 21.75 2.25 16.5l4.179-2.25m11.142 0-5.571 3-5.571-3"})])}const ve={class:"mb-4"},be={class:"hidden lg:block"},me={class:"relative flex items-center px-2 border-b border-gray-200 dark:border-gray-700","aria-label":"Tabs"},we={class:"relative z-10 flex items-center gap-1 py-1 shrink-0"},_e={class:"relative z-10 flex-1 min-w-0"},$e={class:"flex items-center gap-1 py-1 pl-1 pr-1 min-w-0 overflow-hidden"},Ce=["onClick"],Te={key:0,class:"mr-2 shrink-0"},je={key:0,class:"h-2 w-2 rounded-full bg-rose-500"},Be={key:1,class:"h-2 w-2 rounded-full bg-green-500 animate-pulse"},Ve=["onDblclick"],Ie=["onClick"],ze=["onClick"],Me={class:"lg:hidden flex flex-col gap-1"},Ue={class:"flex items-center gap-2 px-2 py-2 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-backdrop-dark"},De={class:"flex items-center gap-2 min-w-0"},Se={key:0,class:"h-2 w-2 rounded-full bg-green-500 shrink-0 animate-pulse"},Re={class:"text-sm font-bold truncate text-gray-700 dark:text-gray-200"},Le={class:"flex items-center gap-1.5 shrink-0"},Ne={class:"flex items-center justify-between"},Ee={class:"py-2 space-y-1 max-h-[60vh] overflow-y-auto"},Ke=["onClick"],He={key:0,class:"shrink-0"},Fe={key:0,class:"h-2.5 w-2.5 rounded-full bg-rose-500"},Oe={key:1,class:"h-2.5 w-2.5 rounded-full bg-green-500"},qe={class:"flex-1 min-w-0"},Ge=["onDblclick"],Pe={key:0,class:"text-[10px] font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider mt-0.5"},Qe={key:1,class:"flex items-center shrink-0"},We=["onClick"],Ae=["onClick"],Je={class:"inline-block pt-5 px-4 pb-4"},Xe={class:"w-full flex justify-between items-center"},Ye={class:"flex items-center"},Ze={class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full sm:mx-0 sm:h-10 sm:w-10"},et={class:"mt-5 sm:mt-4 flex justify-end"},tt=se({__name:"BacktestTabs",props:{tabs:{},currentTab:{}},emits:["close","cancel"],setup(L,{emit:N}){const E=A(),C=ae(),x=V(!1),h=oe(),y=I(()=>h.params.id),f=V(!1),k=V(null),u=V(""),K={mounted:s=>{const r=s.querySelector("input")||s;r.focus(),r instanceof HTMLInputElement&&r.select()}},b=N,H=L,F=I(()=>Object.keys(H.tabs).length),T=I(()=>F.value>1),O=I(()=>F.value<=10);function ee(){f.value=!1,E.addTab(H.currentTab)}function q(s){pe().push(`/backtest/${s}`)}function te(s){f.value=!1,q(s)}function m(s){if(s.results.generalInfo.title)return s.results.executing?`${s.results.generalInfo.title} | ${s.results.progressbar.current}%`:s.results.showResults?`${s.results.generalInfo.title} | Results`:s.results.generalInfo.title;if(!s.form.routes.length)return"New Tab";const r=s.form.routes[0];let d="";return r.strategy&&(d+=`${r.strategy} • `),r.symbol&&(d+=`${r.symbol} • `),r.timeframe&&(d+=`${r.timeframe}`),d=d.endsWith(" • ")?d.slice(0,-3):d,s.results.executing?`${d} | ${s.results.progressbar.current}%`:s.results.showResults?`${d} | Results`:d}function G(s){k.value=s.id,u.value=s.results.generalInfo.title||m(s).split(" | ")[0]}async function j(s){if(!k.value||u.value===(s.results.generalInfo.title||"")){B();return}await A().updateSessionNotes(s.id,u.value,s.results.generalInfo.description||"")&&(s.results.generalInfo.title=u.value),B()}function B(){k.value=null,u.value=""}return(s,r)=>{var W;const d=ne,w=le,P=de,_=ge,re=ue,Q=ie;return n(),l(z,null,[a("div",ve,[a("div",be,[a("nav",me,[r[12]||(r[12]=a("div",{"aria-hidden":"true",class:"absolute inset-0 z-0 bg-gray-50/50 dark:bg-backdrop-dark/50 backdrop-blur-sm pointer-events-none"},null,-1)),a("div",we,[o(d,{text:"New Tab",popper:{arrow:!0,offsetDistance:10}},{default:c(()=>[a("button",{class:"flex items-center justify-center p-1.5 text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 hover:bg-gray-200/50 dark:hover:bg-gray-700/30 rounded-lg cursor-pointer transition-all duration-300 h-8 w-8",onClick:r[0]||(r[0]=e=>t(E).addTab(s.currentTab))},[o(t(fe),{class:"h-5 w-5"})])]),_:1}),o(d,{text:"History",popper:{arrow:!0,offsetDistance:10}},{default:c(()=>[o(w,{href:"/backtest/history",class:g([t(h).path==="/backtest/history"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-white border border-gray-200 dark:border-gray-600":"text-gray-400 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 hover:bg-gray-200/50 dark:hover:bg-gray-700/30","flex items-center justify-center p-1.5 rounded-lg cursor-pointer transition-all duration-300 h-8 w-8"])},{default:c(()=>[o(t(Y),{class:"h-5 w-5"})]),_:1},8,["class"])]),_:1}),o(d,{text:"Benchmark",popper:{arrow:!0,offsetDistance:10}},{default:c(()=>[t(C).plan==="free"||t(C).plan==="guest"?(n(),l("button",{key:0,class:g([t(h).path==="/backtest/benchmark"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-white border border-gray-200 dark:border-gray-600":"text-gray-400 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 hover:bg-gray-200/50 dark:hover:bg-gray-700/30","flex items-center justify-center p-1.5 rounded-lg cursor-pointer transition-all duration-300 h-8 w-8"]),onClick:r[1]||(r[1]=e=>x.value=!0)},[o(t(S),{class:"h-5 w-5"})],2)):(n(),$(w,{key:1,href:"/backtest/benchmark",class:g([t(h).path==="/backtest/benchmark"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-white border border-gray-200 dark:border-gray-600":"text-gray-400 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 hover:bg-gray-200/50 dark:hover:bg-gray-700/30","flex items-center justify-center p-1.5 rounded-lg cursor-pointer transition-all duration-300 h-8 w-8"])},{default:c(()=>[o(t(S),{class:"h-5 w-5"})]),_:1},8,["class"]))]),_:1})]),r[13]||(r[13]=a("div",{class:"relative z-10 w-px h-6 bg-gray-300 dark:bg-gray-600 ml-3 mr-2 shrink-0"},null,-1)),a("div",_e,[a("div",$e,[(n(!0),l(z,null,J(s.tabs,e=>(n(),$(d,{key:e.id,class:"flex-shrink min-w-0",text:m(e),"open-delay":700,popper:{arrow:!0,offsetDistance:10},onMouseup:p(i=>b("close",e.id),["middle"])},{default:c(()=>[a("div",{class:g([e.id===t(y)?"bg-white dark:bg-gray-700 text-gray-900 dark:text-white border border-gray-200 dark:border-gray-600":"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 hover:bg-gray-200/50 dark:hover:bg-gray-700/30","group relative flex items-center py-1 text-xs font-bold rounded-lg cursor-pointer transition-all duration-300 select-none overflow-hidden h-8 max-w-[240px] min-w-0 px-2"]),onClick:i=>q(e.id)},[e.results.executing||e.results.exception.error?(n(),l("div",Te,[e.results.exception.error?(n(),l("div",je)):e.results.executing?(n(),l("div",Be)):v("",!0)])):v("",!0),t(k)===e.id?R((n(),$(P,{key:1,modelValue:t(u),"onUpdate:modelValue":r[2]||(r[2]=i=>U(u)?u.value=i:null),size:"2xs",class:"flex-1 min-w-0",onKeyup:[D(i=>j(e),["enter"]),D(B,["esc"])],onBlur:i=>j(e)},null,8,["modelValue","onKeyup","onBlur"])),[[K]]):(n(),l("span",{key:2,class:g(["flex-1 min-w-0 whitespace-nowrap overflow-hidden text-clip text-left pr-8",t(T)&&e.id===t(y)&&t(k)!==e.id?"tab-text-fade-active":"",t(T)&&e.id!==t(y)&&t(O)&&t(k)!==e.id?"tab-text-fade-hover":""]),onDblclick:p(i=>G(e),["stop"])},M(m(e)),43,Ve)),R(a("div",{class:g(["absolute right-1 top-1/2 -translate-y-1/2 z-10 flex items-center justify-end transition-opacity duration-150",e.id===t(y)?"opacity-100 pointer-events-auto":t(O)?"opacity-0 pointer-events-none group-hover:opacity-100 group-hover:pointer-events-auto":"opacity-0 pointer-events-none"])},[e.results.executing&&e.results.exception.error==""?(n(),l("button",{key:0,class:"p-0.5 rounded-full text-gray-500 dark:text-gray-400 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 hover:text-gray-700 dark:hover:text-gray-200 transition-all focus:outline-none",onClick:p(i=>b("cancel",e.id),["stop"])},[o(t(Z),{class:"h-3.5 w-3.5"})],8,Ie)):(n(),l("button",{key:1,class:"p-0.5 rounded-full text-gray-500 dark:text-gray-400 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 hover:text-gray-700 dark:hover:text-gray-200 transition-all focus:outline-none",onClick:p(i=>b("close",e.id),["stop"])},[o(t(X),{class:"h-3.5 w-3.5"})],8,ze))],2),[[ce,t(T)&&t(k)!==e.id]])],10,Ce)]),_:2},1032,["text","onMouseup"]))),128))])])])]),a("div",Me,[a("div",Ue,[a("button",{class:"flex-1 flex items-center justify-between gap-2 px-3 h-10 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl active:scale-95 transition-all overflow-hidden",onClick:r[3]||(r[3]=e=>f.value=!0)},[a("div",De,[(W=s.tabs[t(y)])!=null&&W.results.executing?(n(),l("div",Se)):v("",!0),a("span",Re,M(s.tabs[t(y)]?m(s.tabs[t(y)]):"Select Tab"),1)]),o(t(he),{class:"h-4 w-4 text-gray-400 shrink-0"})]),a("div",Le,[o(w,{href:"/backtest/history",class:g([t(h).path==="/backtest/history"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-white border border-gray-200 dark:border-gray-600":"bg-white dark:bg-gray-800 text-gray-600 dark:text-gray-300 border border-gray-200 dark:border-gray-700","flex items-center justify-center rounded-xl transition-all h-10 w-10"])},{default:c(()=>[o(t(Y),{class:"h-5 w-5"})]),_:1},8,["class"]),t(C).plan==="free"||t(C).plan==="guest"?(n(),l("button",{key:0,class:g([t(h).path==="/backtest/benchmark"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-white border border-gray-200 dark:border-gray-600":"bg-white dark:bg-gray-800 text-gray-600 dark:text-gray-300 border border-gray-200 dark:border-gray-700","flex items-center justify-center rounded-xl transition-all h-10 w-10"]),onClick:r[4]||(r[4]=e=>x.value=!0)},[o(t(S),{class:"h-5 w-5"})],2)):(n(),$(w,{key:1,href:"/backtest/benchmark",class:g([t(h).path==="/backtest/benchmark"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-white border border-gray-200 dark:border-gray-600":"bg-white dark:bg-gray-800 text-gray-600 dark:text-gray-300 border border-gray-200 dark:border-gray-700","flex items-center justify-center rounded-xl transition-all h-10 w-10"])},{default:c(()=>[o(t(S),{class:"h-5 w-5"})]),_:1},8,["class"]))])]),o(Q,{modelValue:t(f),"onUpdate:modelValue":r[8]||(r[8]=e=>U(f)?f.value=e:null),ui:{width:"max-w-md"}},{default:c(()=>[o(re,{ui:{ring:"",shadow:"shadow-none",divide:"divide-y divide-gray-100 dark:divide-gray-800"}},{header:c(()=>[a("div",Ne,[r[14]||(r[14]=a("h3",{class:"text-base font-bold text-gray-900 dark:text-white"}," Backtest Tabs ",-1)),o(_,{color:"gray",variant:"ghost",icon:"i-heroicons-x-mark-20-solid",class:"-my-1",onClick:r[5]||(r[5]=e=>f.value=!1)})])]),footer:c(()=>[o(_,{block:"",color:"gray",variant:"solid",icon:"i-heroicons-plus-circle",label:"New tab",size:"lg",class:"font-bold rounded-xl",onClick:ee})]),default:c(()=>[a("div",Ee,[(n(!0),l(z,null,J(s.tabs,e=>(n(),l("div",{key:e.id,class:"px-2"},[a("div",{class:g([e.id===t(y)?"bg-indigo-50 dark:bg-indigo-900/20 ring-2 ring-indigo-500/50":"bg-gray-50 dark:bg-gray-800/50 hover:bg-gray-100 dark:hover:bg-gray-800 active:bg-gray-200 dark:active:bg-gray-700","flex items-center gap-3 p-3 rounded-xl transition-all cursor-pointer group"]),onClick:i=>te(e.id)},[e.results.executing||e.results.exception.error?(n(),l("div",He,[e.results.exception.error?(n(),l("div",Fe)):e.results.executing?(n(),l("div",Oe)):v("",!0)])):v("",!0),a("div",qe,[t(k)===e.id?R((n(),$(P,{key:0,modelValue:t(u),"onUpdate:modelValue":r[6]||(r[6]=i=>U(u)?u.value=i:null),size:"sm",class:"w-full",onKeyup:[D(i=>j(e),["enter"]),D(B,["esc"])],onBlur:i=>j(e),onClick:r[7]||(r[7]=p(()=>{},["stop"]))},null,8,["modelValue","onKeyup","onBlur"])),[[K]]):(n(),l(z,{key:1},[a("div",{class:g(["text-sm font-bold truncate",e.id===t(y)?"text-indigo-600 dark:text-indigo-400":"text-gray-700 dark:text-gray-200"]),onDblclick:p(i=>G(e),["stop"])},M(m(e)),43,Ge),e.results.executing?(n(),l("div",Pe," Executing... "+M(e.results.progressbar.current)+"% ",1)):v("",!0)],64))]),t(T)&&t(k)!==e.id?(n(),l("div",Qe,[e.results.executing&&e.results.exception.error==""?(n(),l("button",{key:0,class:"p-2 rounded-lg text-gray-500 dark:text-gray-400 bg-gray-100 dark:bg-gray-700 active:scale-95 transition-all",onClick:p(i=>b("cancel",e.id),["stop"])},[o(t(Z),{class:"h-4 w-4"})],8,We)):(n(),l("button",{key:1,class:"p-2 rounded-lg text-gray-500 dark:text-gray-400 bg-gray-100 dark:bg-gray-700 active:scale-95 transition-all",onClick:p(i=>b("close",e.id),["stop"])},[o(t(X),{class:"h-4 w-4"})],8,Ae))])):v("",!0)],10,Ke)]))),128))])]),_:1})]),_:1},8,["modelValue"])])]),o(Q,{modelValue:t(x),"onUpdate:modelValue":r[11]||(r[11]=e=>U(x)?x.value=e:null)},{default:c(()=>[a("div",Je,[a("div",Xe,[a("div",Ye,[a("div",Ze,[o(t(ye),{class:"text-amber-400 h-7 w-7","aria-hidden":"true"})]),r[15]||(r[15]=a("h3",{class:"text-gray-600 dark:text-gray-200 font-semibold ml-2 text-xl"}," Upgrade your plan ",-1))]),o(_,{icon:"i-heroicons-x-mark",variant:"link",color:"gray",class:"ml-2 p-2 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full text-gray-400 hover:text-gray-500 dark:hover:text-gray-300 focus:outline-none",onClick:r[9]||(r[9]=e=>x.value=!1)})]),r[16]||(r[16]=a("div",{class:"flex items-start justify-start"},[a("div",{class:"mt-3 sm:mt-0 sm:ml-4 text-left"},[a("div",{class:"my-4 ml-8"},[a("p",{class:"text-gray-500 dark:text-gray-300"}," The benchmark feature is only available for premium users. Please upgrade your plan to access this feature. ")])])],-1)),a("div",et,[o(_,{variant:"link",color:"gray",class:"mr-4",size:"lg",label:"Close",onClick:r[10]||(r[10]=e=>x.value=!1)}),o(w,{to:"https://jesse.trade/pricing",target:"_blank"},{default:c(()=>[o(_,{variant:"solid",color:"primary","trailing-icon":"i-heroicons-arrow-right",class:"mr-4",size:"lg",label:"Upgrade"})]),_:1}),ke(s.$slots,"default",{},void 0,!0)])])]),_:3},8,["modelValue"])],64)}}}),at=xe(tt,[["__scopeId","data-v-17ec90cb"]]);export{at as _};
