import{o as n,c as f,a as l,g as N,h as ye,r as w,F,i as ne,j as Pe,b as o,w as $,t as O,n as le,k as r,l as Ie,v as Ue,m as je,ah as q,P as Z,V as B,e as Ae,x as _,R as M,M as V,d as he,a5 as Me,Z as Re,ab as _e,ai as Oe,X as ae,ac as Be,_ as Ne,C as ze,D as me,H as De,I as Fe,J as qe,K as He,N as We,s as Ye,a3 as Ze,y as X,z as Je,A as Qe,ad as fe,O as x,U as D,S as pe,T as ee,W as Ge,a7 as Ke,Y as Xe,$ as et,a1 as tt}from"./BLm-LuZL.js";import{r as st}from"./Cri_WUA5.js";import{b as ke,_ as ot,a as rt}from"./BwlpUYSK.js";import{_ as lt}from"./BFK5Gmgx.js";import{r as ge,_ as nt,a as at,d as it,b as ut}from"./1sxhQl7t.js";import{_ as dt}from"./fSx662--.js";import{a as ct,T as mt,_ as ft}from"./C8PppCWi.js";import{u as pt}from"./CJ4140l3.js";function ve(C,t){return n(),f("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12h3.75M9 15h3.75M9 18h3.75m3 .75H18a2.25 2.25 0 0 0 2.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 0 0-1.123-.08m-5.801 0c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 0 0 .75-.75 2.25 2.25 0 0 0-.1-.664m-5.8 0A2.251 2.251 0 0 1 13.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m0 0H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V9.375c0-.621-.504-1.125-1.125-1.125H8.25ZM6.75 12h.008v.008H6.75V12Zm0 3h.008v.008H6.75V15Zm0 3h.008v.008H6.75V18Z"})])}function gt(C,t){return n(),f("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 6.878V6a2.25 2.25 0 0 1 2.25-2.25h7.5A2.25 2.25 0 0 1 18 6v.878m-12 0c.235-.083.487-.128.75-.128h10.5c.263 0 .515.045.75.128m-12 0A2.25 2.25 0 0 0 4.5 9v.878m13.5-3A2.25 2.25 0 0 1 19.5 9v.878m0 0a2.246 2.246 0 0 0-.75-.128H5.25c-.263 0-.515.045-.75.128m15 0A2.25 2.25 0 0 1 21 12v6a2.25 2.25 0 0 1-2.25 2.25H5.25A2.25 2.25 0 0 1 3 18v-6c0-.98.626-1.813 1.5-2.122"})])}const vt={base:"animate-pulse",background:"bg-gray-100 dark:bg-gray-800",rounded:"rounded-md"},bt={class:"mb-4"},yt={class:"hidden sm:block"},ht={class:"relative rounded-lg shadow flex divide-x divide-gray-200 dark:divide-gray-700","aria-label":"Tabs"},_t=["onMouseup"],kt=["onClick"],xt={class:"absolute right-[1em] focus:outline-none"},$t=l("span",{"aria-hidden":"true",class:"absolute inset-x-0 bottom-0 h-0.5 bg-transparent dark:bg-gray-600"},null,-1),wt=N({__name:"LiveTabs",props:{tabs:{}},emits:["close"],setup(C,{emit:t}){const b=ye(),p=w(b.params.id),a=t;function m(){if(Object.keys(q().tabs).length>=Z().planLimits.live_trading_tabs){B("error",`You have reached the limit of "${Z().planLimits.live_trading_tabs}" tabs for your "${Z().plan}" plan. Please upgrade your plan to add more tabs.`);return}q().addTab()}function v(i){if(!i.form.routes.length)return"New Tab";if(i.results.exception.error&&i.results.monitoring)return"Error";const d=i.form.routes[0];let c="";const y=i.form.exchange;return y&&(c+=`${y} â€¢ `),d.strategy&&(c+=`${d.strategy} â€¢ `),d.symbol&&(c+=`${d.symbol} â€¢ `),d.timeframe&&(c+=`${d.timeframe}`),c=c.endsWith(" â€¢ ")?c.slice(0,-3):c,i.results.monitoring&&!i.results.finished?`ðŸŸ¢ ${c}`:i.results.exception.error&&i.results.monitoring?`ðŸ”´ ${c}`:i.results.showResults?`${c} | Results`:c}return(i,d)=>{const c=Ae;return n(),f("div",bt,[l("div",yt,[l("nav",ht,[(n(!0),f(F,null,ne(i.tabs,y=>(n(),f("div",{key:y.id,class:"relative group min-w-0 flex-1 overflow-hidden text-center flex items-center",onMouseup:Pe(U=>a("close",y.id),["middle"])},[o(c,{to:`/live/${y.id}`,class:le([y.id===r(p)?"text-gray-900 dark:text-gray-100 font-bold ":"text-gray-500 dark:text-gray-300 hover:text-gray-700 font-medium ","py-3 px-4 inline-block select-none cursor-pointer focus:outline-none w-full text-xs bg-gray-50 dark:bg-backdrop-dark"])},{default:$(()=>[l("span",null,O(v(y)),1),l("span",{"aria-hidden":"true",class:le([y.id===r(p)&&Object.keys(i.tabs).length>1?"bg-indigo-400":"bg-transparent dark:bg-gray-600","absolute inset-x-0 bottom-0 h-0.5"])},null,2)]),_:2},1032,["to","class"]),Ie(l("button",{class:"absolute right-[1em] focus:outline-none",onClick:U=>a("close",y.id)},[o(r(je),{class:"h-5 w-5 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 hover:bg-gray-200 bg-gray-100 dark:bg-gray-700 rounded-full","aria-hidden":"true"})],8,kt),[[Ue,Object.keys(i.tabs).length>1&&(!y.results.monitoring||y.results.finished)]])],40,_t))),128)),l("div",{class:"select-none cursor-pointer text-gray-400 dark:text-gray-100 hover:text-gray-600 focus:outline-none group relative w-14 overflow-hidden bg-gray-50 dark:bg-backdrop-dark py-3 px-4 font-medium hover:bg-gray-50 dark:hover:bg-gray-800 flex items-center justify-center",onClick:m},[l("button",xt,[o(r(st),{class:"h-6 w-6 rounded-full","aria-hidden":"true"})]),$t])])])])}}}),Ct=N({__name:"LiveOrders",props:{orders:{}},setup(C){const t=C,b=_(()=>{if(!t.orders.length)return[];const p=[];for(let a=t.orders.length-1;a>=0;a--){const m=t.orders[a];p.push([{value:m.id.slice(-12),style:"text-xs",tooltip:m.id,tag:"code"},{value:M.timestampToTimeOnly(m.created_at),style:"text-xs",tooltip:M.timestampToTime(m.created_at)},{value:m.symbol,style:"text-xs"},{value:m.type,style:"text-xs"},{value:m.side,style:M.colorBasedOnSide(m.side)},{value:m.price,style:"text-xs"},{value:m.qty,style:M.colorBasedOnSide(m.side)},{value:m.status,style:"text-xs"}])}return p});return(p,a)=>{const m=ke,v=lt;return r(b).length?(n(),V(m,{key:0,data:r(b),"header-items":["ID","Created","Symbol","Type","Side","Price","QTY","Status"],header:""},null,8,["data"])):(n(),V(v,{key:1}))}}}),Tt=l("p",null," If you think something is wrong with your running live session, you can submit a report. By submitting this form, the logs of this session will be sent to Jesse's developers so we can see what's going on. ",-1),Vt=l("br",null,null,-1),Lt=l("p",null,[he("Your exchange API keys and strategies are safe and "),l("b",null,"are never sent to us.")],-1),St=l("br",null,null,-1),Et=l("br",null,null,-1),Pt=l("br",null,null,-1),It={class:"flex justify-end item-center"},Ut={class:"flex justify-end"},jt=N({__name:"ReportLiveSession",emits:["close"],setup(C,{emit:t}){const b=t,p=w(!1),a=w({description:"",email:""}),m=()=>{b("close")},v=async()=>{p.value=!0;const{data:i,error:d}=await Me("/report-exception",{description:a.value.description,email:a.value.email,traceback:"manual report",mode:"live",attach_logs:!0,session_id:props.sessionId},!0);if(p.value=!1,d.value&&d.value.statusCode!==200){B("error",`[${d.value.statusCode}]: ${d.value.statusText}`);return}const c=i.value;c.status==="success"?(a.value.description="",a.value.email="",B("success",c.message),m()):c.status==="error"&&B("error",c.message)};return(i,d)=>{const c=Re,y=_e,U=Oe,j=ae,k=Be;return n(),f(F,null,[Tt,Vt,Lt,St,o(k,{state:r(a),class:"space-y-4",onSubmit:v},{default:$(()=>[o(y,{label:"Email (optional)",help:"Enter your email address for us to know who sent the email and possibly reply back to you."},{default:$(()=>[o(c,{modelValue:r(a).email,"onUpdate:modelValue":d[0]||(d[0]=L=>r(a).email=L),placeholder:"Email address...",type:"email"},null,8,["modelValue"])]),_:1}),Et,o(y,{label:"Description (optional):",name:"Description"},{default:$(()=>[o(U,{modelValue:r(a).description,"onUpdate:modelValue":d[1]||(d[1]=L=>r(a).description=L),rows:10,placeholder:"Describe what you think is wrong in this session..."},null,8,["modelValue"])]),_:1}),Pt,l("div",It,[l("div",Ut,[o(j,{color:"gray",variant:"link",class:"mr-8",label:"Cancel",onClick:d[2]||(d[2]=L=>m())}),o(j,{type:"submit",class:"w-48 flex justify-center",label:"Submit",loading:r(p),disabled:r(p)},null,8,["loading","disabled"])])])]),_:1},8,["state"])],64)}}}),At=ze(me.ui.strategy,me.ui.skeleton,vt),Mt=N({inheritAttrs:!1,props:{class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},setup(C){const{ui:t,attrs:b}=De("skeleton",Fe(C,"ui"),At),p=_(()=>qe(He(t.value.base,t.value.background,t.value.rounded),C.class));return{ui:t,attrs:b,skeletonClass:p}}});function Rt(C,t,b,p,a,m){return n(),f("div",We({class:C.skeletonClass},C.attrs),null,16)}const Ot=Ne(Mt,[["render",Rt]]),be={width:800,height:380,crosshair:{mode:ct.Normal}},Bt={chart:{layout:{background:{color:"#ffffff"},textColor:"rgba(33, 56, 77, 1)"},grid:{vertLines:{color:"#f1f1f1",visible:!1},horzLines:{color:"#f1f1f1",visible:!1}},priceScale:{borderColor:"rgba(197, 203, 206, 0.6)"},timeScale:{borderColor:"rgba(197, 203, 206, 0.6)",timeVisible:!0,secondsVisible:!1}},series:{color:"#4f46e5"}},Nt={chart:{layout:{background:{color:"#333333"},textColor:"#D1D5DB"},grid:{vertLines:{color:"#525252",visible:!1},horzLines:{color:"#525252",visible:!1}},priceScale:{borderColor:"#525252"},timeScale:{borderColor:"#525252",timeVisible:!0,secondsVisible:!1}},series:{color:"#818CF8"}},zt={class:"mb-16"},Dt={key:0,class:"rounded overflow-hidden border-2 border-gray-100 dark:border-gray-600 p-4"},Ft={key:1},qt=N({__name:"CandlesChart",props:{form:{},results:{}},setup(C){const t=Ye(),b=_(()=>Ze().params.id),p=w(!0),a=C,m=w();let v=null,i=null;const d={orderEntries:{},positionEntry:null},c=_(()=>t.value),y=a.form.exchange,U=_(()=>`${y}-${a.results.selectedRoute.symbol}-${a.results.selectedRoute.timeframe}`),j=_(()=>a.results.currentCandles),k=_(()=>{const g=a.results.positions.find(h=>h[0].value===a.results.selectedRoute.symbol);return g===void 0?[]:g}),L=_(()=>k.value[2].value),R=_(()=>Number(k.value[1].value)>0?"long":Number(k.value[1].value)<0?"short":"close");X(j,(g,h)=>{i!==null&&te(g[U.value])}),X(c,g=>{K(g)}),X(L,(g,h)=>{i!==null&&g!==h&&Q()}),X(()=>a.results.orders,()=>{i!==null&&G()},{deep:!0}),Je(async()=>{setTimeout(async()=>{await z()},200)});async function z(){p.value=!0,await q().fetchCandles(b.value),p.value=!1,be.width=m.value.clientWidth,v=mt(m.value,be),v.applyOptions({watermark:{visible:!0,fontSize:16,horzAlign:"left",vertAlign:"bottom",color:"#888",text:`${a.results.selectedRoute.symbol} â€¢ ${a.results.selectedRoute.timeframe}`}}),i=v.addCandlestickSeries(),i.setData(a.results.candles),v.timeScale().fitContent(),Q(),G(),K(c.value)}Qe(()=>{J()});function J(){v!==null&&(v.remove(),v=null),i&&(i=null)}function Q(){const g=R.value==="long"?"#00AB5C":"#FF497D";if(d.positionEntry&&i.removePriceLine(d.positionEntry),Number(L.value)>0){const h={price:Number(L.value),color:g,lineWidth:1,lineStyle:0,axisLabelVisible:!0,title:"Entry Price"};d.positionEntry=i.createPriceLine(h)}}function G(){const g=k.value[0].value;for(const h in d.orderEntries)i.removePriceLine(d.orderEntries[h]),delete d.orderEntries[h];a.results.orders.forEach(h=>{const S=h.side==="buy"?"#00AB5C":"#FF497D",H=fe.startCase(fe.lowerCase(`${h.side} ${h.type}`));if((h.status==="ACTIVE"||h.status==="QUEUED")&&h.symbol===g){const A={price:Number(h.price),color:S,lineWidth:1,lineStyle:0,axisLabelVisible:!0,title:H};d.orderEntries[h.id]=i.createPriceLine(A)}})}function te(g){if(g===void 0)throw new TypeError("candle is undefined!");a.results.candles.length===0||a.results.candles[a.results.candles.length-1].time>g.time||i.update(g)}function K(g){v!==null&&v.applyOptions(g==="light"?Bt.chart:Nt.chart)}function se(g){a.results.selectedRoute=g,J(),z()}return(g,h)=>{const S=Ot,H=ae;return n(),f("div",zt,[r(p)?(n(),f("div",Dt,[o(S,{class:"h-4 w-full mb-4"}),o(S,{class:"h-4 w-2/3 mb-4"}),o(S,{class:"h-4 w-1/2 mb-4"}),o(S,{class:"h-4 w-full mb-4"}),o(S,{class:"h-4 w-full mb-4"}),o(S,{class:"h-4 w-2/3 mb-4"}),o(S,{class:"h-4 w-full mb-4"}),o(S,{class:"h-4 w-full"})])):x("",!0),l("div",{ref_key:"chartContainer",ref:m,class:le({"rounded overflow-hidden border-2 border-gray-100 dark:border-gray-600":!r(p)})},null,2),a.form.routes.length>1?(n(),f("div",Ft,[(n(!0),f(F,null,ne(a.form.routes,A=>(n(),V(H,{key:A.symbol,variant:"soft",color:"gray",disabled:g.results.selectedRoute.symbol===A.symbol&&g.results.selectedRoute.timeframe===A.timeframe,class:"mt-2 mr-2",onClick:ie=>se(A)},{default:$(()=>[he(O(A.symbol)+" â€¢ "+O(A.timeframe),1)]),_:2},1032,["disabled","onClick"]))),128))])):x("",!0)])}}}),Ht={key:0,class:"flex flex-col items-center justify-center select-none mt-[10%]"},Wt=["textContent"],Yt={class:"mt-8"},Zt={key:1,class:"mx-auto container mt-8"},Jt={key:0,"data-cy":"live-page-content"},Qt={class:"flex justify-between items-center"},Gt=l("span",null," No exchange API keys found. Please add at least one: ",-1),Kt={class:"grid grid-cols-1 gap-6"},Xt={class:"flex justify-between items-center"},es=l("span",null," No notification API keys found. Please add at least one: ",-1),ts={key:1},ss={key:0,class:"mb-8"},os=l("span",null,"More",-1),rs={key:0},ls={key:0,class:"mt-8 lg:mt-0"},ns={key:1,"data-cy":"live-action-button"},as={key:1,class:"my-8 border-2 dark:border-gray-600 rounded-full"},is={key:2,class:"bg-white dark:bg-gray-700 grid grid-cols-1 gap-6 border dark:border-gray-600 rounded py-4 px-6 select-none"},us={class:"text-sm font-medium text-gray-500 dark:text-gray-400 truncate"},ds={class:"text-sm font-semibold text-gray-900 dark:text-gray-100"},cs={class:"flex justify-between items-center"},ms={class:"flex justify-start items-center"},fs=l("span",null,"Info Logs:",-1),ps={class:"focus:outline-none flex justify-start items-center"},gs={class:"text-sm font-semibold text-gray-900 dark:text-gray-100"},vs={class:"flex justify-between items-center"},bs={class:"flex justify-start items-center"},ys=l("span",null,"Error Logs:",-1),hs={class:"focus:outline-none flex justify-start items-center"},_s={class:"text-sm font-semibold text-gray-900 dark:text-gray-100"},ks={key:3},xs=N({__name:"LiveTab",props:{form:{},results:{}},setup(C){const t=C,b=w([]),p=w(!1),a=w(!1),m=w(!1),v=w(!1),i=w(!1),d=w(!1),c=w(!1),y=w(!1),U=w(!1),j=w(!1),k=Z(),L=q(),R=w([]);async function z(){if(!t.form.paper_mode){const e=k.exchangeApiKeys.find(s=>s.id===t.form.exchange_api_key_id);e&&(t.form.exchange=e.exchange)}R.value=await Z().getExchangeSupportedSymbols(t.form.exchange);for(let e=0;e<t.form.routes.length;e++)R.value.includes(t.form.routes[e].symbol)||(t.form.routes[e].symbol=R.value[0]);if(t.form.data_routes.length>0)for(let e=0;e<t.form.data_routes.length;e++)R.value.includes(t.form.data_routes[e].symbol)||(t.form.data_routes[e].symbol=R.value[0])}t.form.exchange&&z();const J=_(()=>{const e=[{label:"Exchange",value:t.results.generalInfo.exchange},{label:"Current Time",value:M.timestampToTime(t.results.generalInfo.current_time)},{label:"Debug Mode",value:t.results.generalInfo.debug_mode},{label:"Paper Trade",value:t.results.generalInfo.paper_mode},{label:"PNL",value:`${t.results.generalInfo.pnl} (${t.results.generalInfo.pnl_perc}%)`},{label:"Started",value:M.timestampToTime(t.results.generalInfo.started_at)},{label:"Started/Current Balance",value:`${t.results.generalInfo.started_balance} / ${t.results.generalInfo.current_balance}`},{label:"Trades",value:`${t.results.generalInfo.count_trades}`}];return t.results.generalInfo.leverage_type!=="spot"&&(e.push({label:"Available Margin",value:`${t.results.generalInfo.available_margin}`}),e.push({label:"Leverage",value:`${t.results.generalInfo.leverage}x (${t.results.generalInfo.leverage_type})`})),e}),Q=_(()=>k.notificationApiKeys.map(e=>({label:`${e.name} - ${e.driver}`,value:e.id}))),G=_(()=>Math.round(t.results.progressbar.estimated_remaining_seconds)===0?"Please wait...":`${Math.round(t.results.progressbar.estimated_remaining_seconds)} seconds remaining...`),te=_(()=>{if(!t.results.orders)return[];const e=[],s=5,E=t.results.orders.length,P=E-s>=0?E-s:0;for(let W=E-1;W>=P;W--){const T=t.results.orders[W],I=T.status==="PARTIALLY FILLED"?`${T.filled_qty}/${T.qty}`:T.qty;e.push([{value:M.timestampToTimeOnly(T.created_at),style:"text-xs",tooltip:M.timestampToTime(T.created_at)},{value:T.symbol,style:"text-xs"},{value:T.type,style:"text-xs"},{value:T.side,style:M.colorBasedOnSide(T.side)},{value:T.price,style:"text-xs"},{value:I,style:M.colorBasedOnSide(T.side)},{value:T.status,style:"text-xs"}])}return e}),K=_(()=>{let e=[];const s=k.jesseSupportedTimeframes;return k.settings.live.generate_candles_from_1m||!t.form.exchange?e=s.map(E=>k.planLimits.timeframes.includes(E)?{label:E,value:E,disabled:!1}:{label:`${E} (Upgrade required)`,value:E,disabled:!0}):e=k.exchangeInfo[t.form.exchange].supported_timeframes.map(P=>k.planLimits.timeframes.includes(P)?{label:P,value:P,disabled:!1}:{label:`${P} (Upgrade required)`,value:P,disabled:!0}),e}),se=_(()=>k.liveTradingExchangeNames.map(e=>k.planLimits.exchanges.includes(e)?{label:e,value:e,disabled:!1}:{label:`${e} (Upgrade required)`,value:e,disabled:!0})),g=_(()=>k.exchangeApiKeys.map(e=>k.planLimits.exchanges.includes(e.exchange)?{label:`${e.exchange} - ${e.name}`,value:e.id,disabled:!1}:{label:`${e.exchange} - ${e.name} (Upgrade required)`,value:e.id,disabled:!0})),h=L.cancel,S=L.newLive;function H(e){if(b.value.length){for(let s=0;s<b.value.length;s++)B("error",b.value[s]);return}if(t.form.paper_mode&&!t.form.exchange||!t.form.paper_mode&&t.form.exchange_api_key_id===""){B("error","Please select an exchange");return}L.start(e)}function A(e){j.value=!1,L.stop(e)}function ie(){a.value=!0,navigator.clipboard.writeText(t.results.infoLogs),B("success","Logs copied successfully"),v.value=!0,setTimeout(()=>{v.value=!1},3e3)}function xe(){m.value=!0,navigator.clipboard.writeText(t.results.errorLogs),B("success","Logs copied successfully"),i.value=!0,setTimeout(()=>{i.value=!1},3e3)}const ue=_(()=>["basic","pro","enterprise","lifetime"].includes(k.plan));return(e,s)=>{const E=Ct,P=Ge,W=jt,T=ot,I=ae,$e=Ke,we=nt,de=at,Y=Xe,oe=dt,Ce=rt,ce=et,Te=_e,Ve=qt,re=ke,Le=it,Se=ft,Ee=ut;return n(),f(F,null,[o(P,{modelValue:r(d),"onUpdate:modelValue":s[0]||(s[0]=u=>D(d)?d.value=u:null),size:"ultra",title:"Orders"},{default:$(()=>[o(E,{orders:e.results.orders},null,8,["orders"])]),_:1},8,["modelValue"]),o(P,{modelValue:r(c),"onUpdate:modelValue":s[2]||(s[2]=u=>D(c)?c.value=u:null),size:"small",title:"Report"},{default:$(()=>[o(W,{onClose:s[1]||(s[1]=u=>c.value=!1)})]),_:1},8,["modelValue"]),o(P,{modelValue:r(y),"onUpdate:modelValue":s[3]||(s[3]=u=>D(y)?y.value=u:null),title:"Info Logs"},{default:$(()=>[o(T,{logs:e.results.infoLogs},null,8,["logs"])]),buttons:$(()=>[l("button",{class:"ml-2 p-2 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full text-gray-400 hover:text-gray-500 dark:hover:text-gray-300 focus:outline-none",onClick:ie},[r(v)?(n(),V(r(pe),{key:0,class:"h-6 w-6","aria-hidden":"true"})):x("",!0),!r(v)&&e.results.infoLogs.length!=0?(n(),V(r(ge),{key:1,class:"h-6 w-6","aria-hidden":"true"})):x("",!0)])]),_:1},8,["modelValue"]),o(P,{modelValue:r(U),"onUpdate:modelValue":s[4]||(s[4]=u=>D(U)?U.value=u:null),title:"Error Logs"},{default:$(()=>[o(T,{logs:e.results.errorLogs},null,8,["logs"])]),buttons:$(()=>[l("button",{class:"ml-2 p-2 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full text-gray-400 hover:text-gray-500 dark:hover:text-gray-300 focus:outline-none",onClick:xe},[r(i)?(n(),V(r(pe),{key:0,class:"h-6 w-6","aria-hidden":"true"})):x("",!0),!r(i)&&e.results.errorLogs.length!=0?(n(),V(r(ge),{key:1,class:"h-6 w-6","aria-hidden":"true"})):x("",!0)])]),_:1},8,["modelValue"]),o($e,{modelValue:r(j),"onUpdate:modelValue":s[6]||(s[6]=u=>D(j)?j.value=u:null),title:"Termination Confirm",description:"Are you sure you want to terminate this session?",type:"info"},{default:$(()=>[o(I,{variant:"solid",color:"red",class:"flex justify-center",label:"Terminate",onClick:s[5]||(s[5]=u=>A((e._.provides[ee]||e.$route).params.id))})]),_:1},8,["modelValue"]),e.results.booting?(n(),f("div",Ht,[l("div",null,[o(we,{progress:e.results.progressbar.current},null,8,["progress"])]),e.results.exception.error?x("",!0):(n(),f("h3",{key:0,class:"mt-8 animate-pulse",textContent:O(r(G))},null,8,Wt)),l("div",Yt,[e.form.debug_mode?(n(),V(I,{key:0,icon:"i-heroicons-clipboard-document-list",variant:"solid",label:"View Logs",size:"xl",class:"flex justify-center w-64",onClick:s[7]||(s[7]=u=>y.value=!0)})):x("",!0),o(I,{color:"gray",class:"w-64 flex justify-center mt-4",size:"xl",ui:{color:{gray:{solid:"text-rose-500 dark:text-rose-400"}}},icon:"i-heroicons-no-symbol",variant:"solid",label:"Cancel",trailing:!1,onClick:s[8]||(s[8]=u=>r(h)((e._.provides[ee]||e.$route).params.id))})]),e.results.exception.error?(n(),f("div",Zt,[o(de,{modelValue:r(p),"onUpdate:modelValue":s[9]||(s[9]=u=>D(p)?p.value=u:null),title:e.results.exception.error,content:e.results.exception.traceback,mode:"live","debug-mode":e.form.debug_mode},null,8,["modelValue","title","content","debug-mode"])])):x("",!0)])):(n(),V(Ee,{key:1},{left:$(()=>[!e.results.booting&&!e.results.monitoring&&!e.results.showResults?(n(),f("div",Jt,[o(Y,{class:"mb-4",title:"Exchange"}),e.form.paper_mode?(n(),V(oe,{key:0,modelValue:e.form.exchange,"onUpdate:modelValue":s[10]||(s[10]=u=>e.form.exchange=u),placeholder:"Select an exchange...",searchable:"",options:r(se),"value-attribute":"value",size:"lg",class:"mt-2 mb-16",onChange:z},null,8,["modelValue","options"])):(n(),V(oe,{key:1,modelValue:e.form.exchange_api_key_id,"onUpdate:modelValue":s[11]||(s[11]=u=>e.form.exchange_api_key_id=u),placeholder:"Select an exchange...",searchable:"",options:r(g),"value-attribute":"value",size:"lg",class:"mt-2 mb-16",onChange:z},{empty:$(()=>[l("div",Qt,[Gt,o(I,{to:"/exchange-api-keys",icon:"i-heroicons-plus",type:"link",variant:"solid",size:"sm",label:"Add Exchange API Key"})])]),_:1},8,["modelValue","options"])),o(Ce,{"total-routes-error":r(b),form:e.form,results:e.results,mode:"live",symbols:r(R),timeframes:r(K)},null,8,["total-routes-error","form","results","symbols","timeframes"]),o(Y,{class:"mt-16 mb-4",title:"Options"}),l("div",Kt,[o(ce,{modelValue:e.form.debug_mode,"onUpdate:modelValue":s[12]||(s[12]=u=>e.form.debug_mode=u),title:"Debug Mode",description:"Logs more details, helpful for debugging."},null,8,["modelValue"]),o(ce,{modelValue:e.form.paper_mode,"onUpdate:modelValue":s[13]||(s[13]=u=>e.form.paper_mode=u),title:"Paper Trade",disabled:!r(ue),"disabled-guide":r(ue)?"":"Premium plan required",description:"Trade in real-time using actual exchange data with PAPER money."},null,8,["modelValue","disabled","disabled-guide"]),o(Te,{label:"Notifications:",help:"Select a notification driver to receive notifications"},{default:$(()=>[o(oe,{modelValue:e.form.notification_api_key_id,"onUpdate:modelValue":s[14]||(s[14]=u=>e.form.notification_api_key_id=u),placeholder:"Select a notification driver",size:"lg",options:r(Q),"value-attribute":"value"},{empty:$(()=>[l("div",Xt,[es,o(I,{to:"/notification-api-keys",icon:"i-heroicons-plus",type:"link",variant:"solid",size:"sm",label:"Add Notification API Key"})])]),_:1},8,["modelValue","options"])]),_:1})])])):x("",!0),e.results.monitoring?(n(),f("div",ts,[e.results.exception.error?(n(),f("div",ss,[o(de,{title:e.results.exception.error,content:e.results.exception.traceback,mode:"live","debug-mode":e.form.debug_mode},null,8,["title","content","debug-mode"])])):x("",!0),e.results.monitoring&&!e.results.finished&&!e.results.exception.error?(n(),V(Ve,{key:1,results:e.results,form:e.form,exchange:e.form.exchange},null,8,["results","form","exchange"])):x("",!0),o(Y,{class:"mb-4",title:"Routes"}),o(re,{data:e.results.routes,"header-items":["Symbol","Timeframe","Strategy"],header:""},null,8,["data"]),o(Y,{class:"mt-12 mb-4",title:"Positions"}),o(re,{data:e.results.positions,"header-items":["Symbol","QTY","Entry","Price","Liq Price","PNL"],header:""},null,8,["data"]),o(Le,{class:"mt-12 mb-4",title:"Orders"},{default:$(()=>[l("button",{type:"button",class:"inline-flex items-center shadow-sm px-4 py-1.5 border border-gray-300 dark:border-gray-900 text-sm leading-5 font-medium rounded-full text-gray-700 dark:text-gray-100 bg-white dark:bg-backdrop-dark hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none",onClick:s[15]||(s[15]=u=>d.value=!0)},[o(r(gt),{class:"-ml-1.5 mr-1 h-5 w-5 text-gray-400","aria-hidden":"true"}),os])]),_:1}),o(re,{data:r(te),"header-items":["Created","Symbol","Type","Side","Price","QTY","Status"],header:""},null,8,["data"])])):x("",!0)]),right:$(()=>[e.results.booting?x("",!0):(n(),f("div",rs,[e.results.monitoring?(n(),f("div",ls,[e.results.finished?(n(),V(I,{key:0,class:"w-full flex justify-center",variant:"solid",icon:"i-heroicons-plus",size:"xl",label:"New session",onClick:s[16]||(s[16]=u=>r(S)((e._.provides[ee]||e.$route).params.id))})):(n(),V(I,{key:1,class:"w-full flex justify-center",variant:"solid",color:"gray",icon:"i-heroicons-no-symbol",size:"xl",label:e.results.terminating?"Terminating...":"Terminate",ui:{color:{gray:{solid:"text-rose-500 dark:text-rose-400"}}},onClick:s[17]||(s[17]=u=>j.value=!0)},null,8,["label"])),e.results.monitoring||e.results.finished?(n(),V(I,{key:2,class:"w-full flex justify-center mt-4",variant:"solid",color:"gray",icon:"i-heroicons-flag",size:"xl",label:"Report",onClick:s[18]||(s[18]=u=>c.value=!0)})):x("",!0)])):(n(),f("div",ns,[o(I,{class:"w-full flex justify-center",icon:"i-heroicons-bolt",size:"xl",variant:"solid",label:"Start",trailing:!1,onClick:s[19]||(s[19]=u=>H((e._.provides[ee]||e.$route).params.id))})]))])),e.results.monitoring?(n(),f("hr",as)):x("",!0),e.results.monitoring?(n(),f("dl",is,[(n(!0),f(F,null,ne(r(J),u=>(n(),f("div",{key:u.label,class:"flex justify-between items-center"},[l("div",us,O(u.label)+":",1),l("div",ds,O(u.value),1)]))),128)),l("div",cs,[l("div",ms,[l("button",{class:"text-sm font-medium text-gray-500 hover:text-gray-600 dark:text-gray-400 dark:hover:text-gray-300 truncate flex items-center hover:underline cursor-pointer focus:outline-none",onClick:s[20]||(s[20]=u=>y.value=!0)},[fs,l("span",ps,[o(r(ve),{class:"w-6 h-6 ml-2"})])])]),l("div",gs,O(e.results.generalInfo.count_info_logs),1)]),l("div",vs,[l("div",bs,[l("button",{class:"text-sm font-medium text-gray-500 hover:text-gray-600 dark:text-gray-400 dark:hover:text-gray-300 truncate flex items-center hover:underline cursor-pointer focus:outline-none",onClick:s[21]||(s[21]=u=>U.value=!0)},[ys,l("span",hs,[o(r(ve),{class:"w-6 h-6 ml-2 cursor-pointer"})])])]),l("div",_s,O(e.results.generalInfo.count_error_logs),1)])])):x("",!0),e.results.monitoring&&e.results.watchlist.length?(n(),f("div",ks,[o(Y,{class:"mt-8 mb-4",title:"Watch List"}),o(Se,{data:e.results.watchlist},null,8,["data"])])):x("",!0)]),_:1}))],64)}}}),$s={class:"w-full"},Is=N({__name:"[id]",setup(C){pt({title:"Live/Paper trading - Jesse"});const t=q(),b=_(()=>t.tabs),p=ye(),a=_(()=>p.params.id),m=_(()=>{if(!b.value[a.value]){const v=Object.keys(b.value);if(v.length>0){const i=b.value[v[0]];return tt().push(`/live/${i.id}`),i}}return b.value[a.value]});return Object.keys(b.value).length===0&&q().addTab(),(v,i)=>{const d=wt,c=xs;return n(),f(F,null,[l("div",$s,[o(d,{tabs:b.value,onClose:r(t).closeTab},null,8,["tabs","onClose"])]),m.value?(n(),V(c,{key:0,form:m.value.form,results:m.value.results},null,8,["form","results"])):x("",!0)],64)}}});export{Is as default};
