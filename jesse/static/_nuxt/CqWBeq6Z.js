import{a9 as Re,g as Z,aa as Y,h as F,ab as ve,v as oe,x as De,ac as Fe,ad as ge,ae as d,af as H,ag as V,ah as _e,ai as te,aj as Ie,ak as ye,al as ke,am as N,an as de,ao as ce,F as J,r as O,ap as He,aq as me,ar as ze,as as W,at as Ge,au as Ke,av as qe,aw as Je,ax as Qe,ay as We,az as be,aA as _,aB as L,aC as pe,aD as Te,aE as ae,a as Ae,j as le,k as M,o as b,w as U,d as B,l as x,c as D,m as E,B as K,b as P,aF as we,aG as Q,y as Ze,aH as Oe,aI as ne,aJ as fe,aK as Xe,i as Pe,aL as Ye,aM as et,aN as Ue,p as se,q as he,t as q,aO as je,H as tt,e as at,aP as nt,aQ as re,aR as Ce,R as ot,O as lt,Z as st,A as rt,a5 as $e,a6 as Ee,S as it,D as ie,a0 as G}from"./DpunGGx_.js";import{_ as ut}from"./DR8l8gr8.js";import{_ as xe}from"./Dq3uVJVb.js";const dt={wrapper:"relative overflow-x-auto",base:"min-w-full table-fixed",divide:"divide-y divide-gray-300 dark:divide-gray-700",thead:"relative",tbody:"divide-y divide-gray-200 dark:divide-gray-800",tr:{base:"",selected:"bg-gray-50 dark:bg-gray-800/50",active:"hover:bg-gray-50 dark:hover:bg-gray-800/50 cursor-pointer"},th:{base:"text-left rtl:text-right",padding:"px-4 py-3.5",color:"text-gray-900 dark:text-white",font:"font-semibold",size:"text-sm"},td:{base:"whitespace-nowrap",padding:"px-4 py-4",color:"text-gray-500 dark:text-gray-400",font:"",size:"text-sm"},checkbox:{padding:"ps-4"},loadingState:{wrapper:"flex flex-col items-center justify-center flex-1 px-6 py-14 sm:px-14",label:"text-sm text-center text-gray-900 dark:text-white",icon:"w-6 h-6 mx-auto text-gray-400 dark:text-gray-500 mb-4 animate-spin"},emptyState:{wrapper:"flex flex-col items-center justify-center flex-1 px-6 py-14 sm:px-14",label:"text-sm text-center text-gray-900 dark:text-white",icon:"w-6 h-6 mx-auto text-gray-400 dark:text-gray-500 mb-4"},progress:{wrapper:"absolute inset-x-0 -bottom-[0.5px] p-0"},default:{sortAscIcon:"i-heroicons-bars-arrow-up-20-solid",sortDescIcon:"i-heroicons-bars-arrow-down-20-solid",sortButton:{icon:"i-heroicons-arrows-up-down-20-solid",trailing:!0,square:!0,color:"gray",variant:"ghost",class:"-m-1.5"},progress:{color:"primary",animation:"carousel"},loadingState:{icon:"i-heroicons-arrow-path-20-solid",label:"Loading..."},emptyState:{icon:"i-heroicons-circle-stack-20-solid",label:"No items."}}},ct={wrapper:"relative",container:"z-50 group",trigger:"inline-flex w-full",width:"",background:"bg-white dark:bg-gray-900",shadow:"shadow-lg",rounded:"rounded-md",ring:"ring-1 ring-gray-200 dark:ring-gray-800",base:"overflow-hidden focus:outline-none relative",transition:{enterActiveClass:"transition ease-out duration-200",enterFromClass:"opacity-0 translate-y-1",enterToClass:"opacity-100 translate-y-0",leaveActiveClass:"transition ease-in duration-150",leaveFromClass:"opacity-100 translate-y-0",leaveToClass:"opacity-0 translate-y-1"},overlay:{base:"fixed inset-0 transition-opacity z-50",background:"bg-gray-200/75 dark:bg-gray-800/75",transition:{enterActiveClass:"ease-out duration-200",enterFromClass:"opacity-0",enterToClass:"opacity-100",leaveActiveClass:"ease-in duration-150",leaveFromClass:"opacity-100",leaveToClass:"opacity-0"}},popper:{strategy:"fixed"},default:{openDelay:0,closeDelay:0},arrow:Re};var pt=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(pt||{});let Ve=Symbol("PopoverContext");function Se(e){let c=be(Ve,null);if(c===null){let w=new Error(`<${e} /> is missing a parent <${Me.name} /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(w,Se),w}return c}let ft=Symbol("PopoverGroupContext");function Le(){return be(ft,null)}let Ne=Symbol("PopoverPanelContext");function vt(){return be(Ne,null)}let Me=Z({name:"Popover",inheritAttrs:!1,props:{as:{type:[Object,String],default:"div"}},setup(e,{slots:c,attrs:w,expose:I}){var C;let $=O(null);I({el:$,$el:$});let t=O(1),o=O(null),f=O(null),v=O(null),s=O(null),h=F(()=>ve($)),S=F(()=>{var a,i;if(!d(o)||!d(s))return!1;for(let z of document.querySelectorAll("body > *"))if(Number(z==null?void 0:z.contains(d(o)))^Number(z==null?void 0:z.contains(d(s))))return!0;let p=me(),u=p.indexOf(d(o)),A=(u+p.length-1)%p.length,j=(u+1)%p.length,X=p[A],ee=p[j];return!((a=d(s))!=null&&a.contains(X))&&!((i=d(s))!=null&&i.contains(ee))}),k={popoverState:t,buttonId:O(null),panelId:O(null),panel:s,button:o,isPortalled:S,beforePanelSentinel:f,afterPanelSentinel:v,togglePopover(){t.value=W(t.value,{0:1,1:0})},closePopover(){t.value!==1&&(t.value=1)},close(a){k.closePopover();let i=a?a instanceof HTMLElement?a:a.value instanceof HTMLElement?d(a):d(k.button):d(k.button);i==null||i.focus()}};Fe(Ve,k),ze(F(()=>W(t.value,{0:te.Open,1:te.Closed})));let T={buttonId:k.buttonId,panelId:k.panelId,close(){k.closePopover()}},l=Le(),r=l==null?void 0:l.registerPopover,[g,y]=Ge(),m=Ke({mainTreeNodeRef:l==null?void 0:l.mainTreeNodeRef,portals:g,defaultContainers:[o,s]});function n(){var a,i,p,u;return(u=l==null?void 0:l.isFocusWithinPopoverGroup())!=null?u:((a=h.value)==null?void 0:a.activeElement)&&(((i=d(o))==null?void 0:i.contains(h.value.activeElement))||((p=d(s))==null?void 0:p.contains(h.value.activeElement)))}return ge(()=>r==null?void 0:r(T)),qe((C=h.value)==null?void 0:C.defaultView,"focus",a=>{var i,p;a.target!==window&&a.target instanceof HTMLElement&&t.value===0&&(n()||o&&s&&(m.contains(a.target)||(i=d(k.beforePanelSentinel))!=null&&i.contains(a.target)||(p=d(k.afterPanelSentinel))!=null&&p.contains(a.target)||k.closePopover()))},!0),Je(m.resolveContainers,(a,i)=>{var p;k.closePopover(),Qe(i,We.Loose)||(a.preventDefault(),(p=d(o))==null||p.focus())},F(()=>t.value===0)),()=>{let a={open:t.value===0,close:k.close};return N(J,[N(y,{},()=>ye({theirProps:{...e,...w},ourProps:{ref:$},slot:a,slots:c,attrs:w,name:"Popover"})),N(m.MainTreeNode)])}}}),gt=Z({name:"PopoverButton",props:{as:{type:[Object,String],default:"button"},disabled:{type:[Boolean],default:!1},id:{type:String,default:null}},inheritAttrs:!1,setup(e,{attrs:c,slots:w,expose:I}){var C;let $=(C=e.id)!=null?C:`headlessui-popover-button-${Y()}`,t=Se("PopoverButton"),o=F(()=>ve(t.button));I({el:t.button,$el:t.button}),oe(()=>{t.buttonId.value=$}),De(()=>{t.buttonId.value=null});let f=Le(),v=f==null?void 0:f.closeOthers,s=vt(),h=F(()=>s===null?!1:s.value===t.panelId.value),S=O(null),k=`headlessui-focus-sentinel-${Y()}`;h.value||ge(()=>{t.button.value=d(S)});let T=He(F(()=>({as:e.as,type:c.type})),S);function l(a){var i,p,u,A,j;if(h.value){if(t.popoverState.value===1)return;switch(a.key){case _.Space:case _.Enter:a.preventDefault(),(p=(i=a.target).click)==null||p.call(i),t.closePopover(),(u=d(t.button))==null||u.focus();break}}else switch(a.key){case _.Space:case _.Enter:a.preventDefault(),a.stopPropagation(),t.popoverState.value===1&&(v==null||v(t.buttonId.value)),t.togglePopover();break;case _.Escape:if(t.popoverState.value!==0)return v==null?void 0:v(t.buttonId.value);if(!d(t.button)||(A=o.value)!=null&&A.activeElement&&!((j=d(t.button))!=null&&j.contains(o.value.activeElement)))return;a.preventDefault(),a.stopPropagation(),t.closePopover();break}}function r(a){h.value||a.key===_.Space&&a.preventDefault()}function g(a){var i,p;e.disabled||(h.value?(t.closePopover(),(i=d(t.button))==null||i.focus()):(a.preventDefault(),a.stopPropagation(),t.popoverState.value===1&&(v==null||v(t.buttonId.value)),t.togglePopover(),(p=d(t.button))==null||p.focus()))}function y(a){a.preventDefault(),a.stopPropagation()}let m=Ie();function n(){let a=d(t.panel);if(!a)return;function i(){W(m.value,{[L.Forwards]:()=>H(a,V.First),[L.Backwards]:()=>H(a,V.Last)})===pe.Error&&H(me().filter(p=>p.dataset.headlessuiFocusGuard!=="true"),W(m.value,{[L.Forwards]:V.Next,[L.Backwards]:V.Previous}),{relativeTo:d(t.button)})}i()}return()=>{let a=t.popoverState.value===0,i={open:a},{...p}=e,u=h.value?{ref:S,type:T.value,onKeydown:l,onClick:g}:{ref:S,id:$,type:T.value,"aria-expanded":t.popoverState.value===0,"aria-controls":d(t.panel)?t.panelId.value:void 0,disabled:e.disabled?!0:void 0,onKeydown:l,onKeyup:r,onClick:g,onMousedown:y};return N(J,[ye({ourProps:u,theirProps:{...c,...p},slot:i,attrs:c,slots:w,name:"PopoverButton"}),a&&!h.value&&t.isPortalled.value&&N(de,{id:k,features:ce.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:n})])}}}),yt=Z({name:"PopoverPanel",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},focus:{type:Boolean,default:!1},id:{type:String,default:null}},inheritAttrs:!1,setup(e,{attrs:c,slots:w,expose:I}){var C;let $=(C=e.id)!=null?C:`headlessui-popover-panel-${Y()}`,{focus:t}=e,o=Se("PopoverPanel"),f=F(()=>ve(o.panel)),v=`headlessui-focus-sentinel-before-${Y()}`,s=`headlessui-focus-sentinel-after-${Y()}`;I({el:o.panel,$el:o.panel}),oe(()=>{o.panelId.value=$}),De(()=>{o.panelId.value=null}),Fe(Ne,o.panelId),ge(()=>{var y,m;if(!t||o.popoverState.value!==0||!o.panel)return;let n=(y=f.value)==null?void 0:y.activeElement;(m=d(o.panel))!=null&&m.contains(n)||H(d(o.panel),V.First)});let h=_e(),S=F(()=>h!==null?(h.value&te.Open)===te.Open:o.popoverState.value===0);function k(y){var m,n;switch(y.key){case _.Escape:if(o.popoverState.value!==0||!d(o.panel)||f.value&&!((m=d(o.panel))!=null&&m.contains(f.value.activeElement)))return;y.preventDefault(),y.stopPropagation(),o.closePopover(),(n=d(o.button))==null||n.focus();break}}function T(y){var m,n,a,i,p;let u=y.relatedTarget;u&&d(o.panel)&&((m=d(o.panel))!=null&&m.contains(u)||(o.closePopover(),((a=(n=d(o.beforePanelSentinel))==null?void 0:n.contains)!=null&&a.call(n,u)||(p=(i=d(o.afterPanelSentinel))==null?void 0:i.contains)!=null&&p.call(i,u))&&u.focus({preventScroll:!0})))}let l=Ie();function r(){let y=d(o.panel);if(!y)return;function m(){W(l.value,{[L.Forwards]:()=>{var n;H(y,V.First)===pe.Error&&((n=d(o.afterPanelSentinel))==null||n.focus())},[L.Backwards]:()=>{var n;(n=d(o.button))==null||n.focus({preventScroll:!0})}})}m()}function g(){let y=d(o.panel);if(!y)return;function m(){W(l.value,{[L.Forwards]:()=>{let n=d(o.button),a=d(o.panel);if(!n)return;let i=me(),p=i.indexOf(n),u=i.slice(0,p+1),A=[...i.slice(p+1),...u];for(let j of A.slice())if(j.dataset.headlessuiFocusGuard==="true"||a!=null&&a.contains(j)){let X=A.indexOf(j);X!==-1&&A.splice(X,1)}H(A,V.First,{sorted:!1})},[L.Backwards]:()=>{var n;H(y,V.Previous)===pe.Error&&((n=d(o.button))==null||n.focus())}})}m()}return()=>{let y={open:o.popoverState.value===0,close:o.close},{focus:m,...n}=e,a={ref:o.panel,id:$,onKeydown:k,onFocusout:t&&o.popoverState.value===0?T:void 0,tabIndex:-1};return ye({ourProps:a,theirProps:{...c,...n},attrs:c,slot:y,slots:{...w,default:(...i)=>{var p;return[N(J,[S.value&&o.isPortalled.value&&N(de,{id:v,ref:o.beforePanelSentinel,features:ce.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:r}),(p=w.default)==null?void 0:p.call(w,...i),S.value&&o.isPortalled.value&&N(de,{id:s,ref:o.afterPanelSentinel,features:ce.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:g})])]}},features:ke.RenderStrategy|ke.Static,visible:S.value,name:"PopoverPanel"})}}});const ue=Te(ae.ui.strategy,ae.ui.popover,ct),mt=Z({components:{HPopover:Me,HPopoverButton:gt,HPopoverPanel:yt},inheritAttrs:!1,props:{mode:{type:String,default:"click",validator:e=>["click","hover"].includes(e)},open:{type:Boolean,default:void 0},disabled:{type:Boolean,default:!1},openDelay:{type:Number,default:()=>ue.default.openDelay},closeDelay:{type:Number,default:()=>ue.default.closeDelay},overlay:{type:Boolean,default:!1},popper:{type:Object,default:()=>({})},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},emits:["update:open"],setup(e,{emit:c}){const{ui:w,attrs:I}=Oe("popover",ne(e,"ui"),ue,ne(e,"class")),C=F(()=>fe(e.mode==="hover"?{offsetDistance:0}:{},e.popper,w.value.popper)),[$,t]=Xe(C.value),o=O(null),f=O(null);let v=null,s=null;oe(()=>{var g,y;const l=(g=o.value)==null?void 0:g.$.provides;if(!l)return;const r=Object.getOwnPropertySymbols(l);f.value=r.length&&l[r[0]],e.open&&((y=f.value)==null||y.togglePopover())});const h=F(()=>{var y,m,n;if(e.mode!=="hover")return{};const l=((y=e.popper)==null?void 0:y.offsetDistance)||((m=w.value.popper)==null?void 0:m.offsetDistance)||8,r=(n=C.value.placement)==null?void 0:n.split("-")[0],g=`${l}px`;return r==="top"||r==="bottom"?{paddingTop:g,paddingBottom:g}:r==="left"||r==="right"?{paddingLeft:g,paddingRight:g}:{paddingTop:g,paddingBottom:g,paddingLeft:g,paddingRight:g}});function S(){f.value&&(f.value.popoverState===0?f.value.closePopover():f.value.togglePopover())}function k(){e.mode!=="hover"||!f.value||(s&&(clearTimeout(s),s=null),f.value.popoverState!==0&&(v=v||setTimeout(()=>{f.value.togglePopover&&f.value.togglePopover(),v=null},e.openDelay)))}function T(){e.mode!=="hover"||!f.value||(v&&(clearTimeout(v),v=null),f.value.popoverState!==1&&(s=s||setTimeout(()=>{f.value.closePopover&&f.value.closePopover(),s=null},e.closeDelay)))}return Pe(()=>e.open,(l,r)=>{f.value&&(r===void 0||l===r||(l?f.value.popoverState=0:f.value.closePopover()))}),Pe(()=>{var l;return(l=f.value)==null?void 0:l.popoverState},(l,r)=>{r===void 0||l===r||c("update:open",l===0)}),Ye(()=>et()),{ui:w,attrs:I,popover:o,popper:C,trigger:$,container:t,containerStyle:h,onTouchStart:S,onMouseEnter:k,onMouseLeave:T}}}),bt=["disabled"];function ht(e,c,w,I,C,$){const t=le("HPopoverButton"),o=le("HPopoverPanel"),f=le("HPopover");return b(),M(f,Q({ref:"popover",class:e.ui.wrapper},e.attrs,{onMouseleave:e.onMouseLeave}),{default:U(({open:v,close:s})=>[B(t,{ref:"trigger",as:"div",disabled:e.disabled,class:E(e.ui.trigger),role:"button",onMouseenter:e.onMouseEnter,onTouchstartPassive:e.onTouchStart},{default:U(()=>[K(e.$slots,"default",{open:v,close:s},()=>[P("button",{disabled:e.disabled}," Open ",8,bt)])]),_:2},1032,["disabled","class","onMouseenter","onTouchstartPassive"]),e.overlay?(b(),M(we,Q({key:0,appear:""},e.ui.overlay.transition),{default:U(()=>[v?(b(),D("div",{key:0,class:E([e.ui.overlay.base,e.ui.overlay.background])},null,2)):x("",!0)]),_:2},1040)):x("",!0),v?(b(),D("div",{key:1,ref:"container",class:E([e.ui.container,e.ui.width]),style:Ze(e.containerStyle)},[B(we,Q({appear:""},e.ui.transition),{default:U(()=>[P("div",null,[e.popper.arrow?(b(),D("div",{key:0,"data-popper-arrow":"",class:E(Object.values(e.ui.arrow))},null,2)):x("",!0),B(o,{class:E([e.ui.base,e.ui.background,e.ui.ring,e.ui.rounded,e.ui.shadow]),static:""},{default:U(()=>[K(e.$slots,"panel",{open:v,close:s})]),_:2},1032,["class"])])]),_:2},1040)],6)):x("",!0)]),_:3},16,["class","onMouseleave"])}const St=Ae(mt,[["render",ht]]);function kt(e){return e?e[0].toUpperCase()+e.slice(1):""}const R=Te(ae.ui.strategy,ae.ui.table,dt);function wt(e,c){return e===c}function Be(e,c,w){return e===c?0:w==="asc"?e<c?-1:1:e>c?-1:1}const Pt=Z({components:{UIcon:je,UButton:he,UProgress:xe,UCheckbox:Ue},inheritAttrs:!1,props:{modelValue:{type:Array,default:null},by:{type:[String,Function],default:()=>wt},rows:{type:Array,default:()=>[]},columns:{type:Array,default:null},columnAttribute:{type:String,default:"label"},sort:{type:Object,default:()=>({})},sortMode:{type:String,default:"auto"},sortButton:{type:Object,default:()=>R.default.sortButton},sortAscIcon:{type:String,default:()=>R.default.sortAscIcon},sortDescIcon:{type:String,default:()=>R.default.sortDescIcon},loading:{type:Boolean,default:!1},loadingState:{type:Object,default:()=>R.default.loadingState},emptyState:{type:Object,default:()=>R.default.emptyState},progress:{type:Object,default:()=>R.default.progress},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},emits:["update:modelValue","update:sort"],setup(e,{emit:c,attrs:w}){const{ui:I,attrs:C}=Oe("table",ne(e,"ui"),R,ne(e,"class")),$=F(()=>e.columns??Object.keys(e.rows[0]??{}).map(n=>({key:n,label:kt(n),sortable:!1,class:void 0,sort:Be}))),t=nt(e,"sort",c,{passive:!0,defaultValue:fe({},e.sort,{column:null,direction:"asc"})}),o={column:t.value.column,direction:null},f=F(()=>{var i;if(!((i=t.value)!=null&&i.column)||e.sortMode==="manual")return e.rows;const{column:n,direction:a}=t.value;return e.rows.slice().sort((p,u)=>{var ee;const A=re(p,n),j=re(u,n);return(((ee=$.value.find(z=>z.key===n))==null?void 0:ee.sort)??Be)(A,j,a)})}),v=F({get(){return e.modelValue},set(n){c("update:modelValue",n)}}),s=F(()=>v.value&&v.value.length>0&&v.value.length<e.rows.length),h=F(()=>e.emptyState===null?null:{...I.value.default.emptyState,...e.emptyState}),S=F(()=>e.loadingState===null?null:{...I.value.default.loadingState,...e.loadingState});function k(n,a){if(typeof e.by=="string"){const i=e.by;return(n==null?void 0:n[i])===(a==null?void 0:a[i])}return e.by(n,a)}function T(n){return e.modelValue?v.value.some(a=>k(Ce(a),Ce(n))):!1}function l(n){if(t.value.column===n.key){const a=!n.direction||n.direction==="asc"?"desc":"asc";t.value.direction===a?t.value=fe({},o,{column:null,direction:"asc"}):t.value={column:t.value.column,direction:t.value.direction==="asc"?"desc":"asc"}}else t.value={column:n.key,direction:n.direction||"asc"}}function r(n){w.onSelect&&w.onSelect(n)}function g(){e.rows.forEach(n=>{T(n)||v.value.push(n)})}function y(n){n.target.checked?g():v.value=[]}function m(n,a,i=""){return re(n,a,i)}return{ui:I,attrs:C,sort:t,columns:$,rows:f,selected:v,indeterminate:s,emptyState:h,loadingState:S,isSelected:T,onSort:l,onSelect:r,onChange:y,getRowData:m}}}),Ct={key:1},$t={key:0},Et={key:0},Bt=["colspan"],Dt={key:1},Ft=["colspan"],It=["onClick"];function Tt(e,c,w,I,C,$){const t=Ue,o=he,f=xe,v=je;return b(),D("div",Q({class:e.ui.wrapper},e.attrs),[P("table",{class:E([e.ui.base,e.ui.divide])},[P("thead",{class:E(e.ui.thead)},[P("tr",{class:E(e.ui.tr.base)},[e.modelValue?(b(),D("th",{key:0,scope:"col",class:E(e.ui.checkbox.padding)},[B(t,{"model-value":e.indeterminate||e.selected.length===e.rows.length,indeterminate:e.indeterminate,"aria-label":"Select all",onChange:e.onChange},null,8,["model-value","indeterminate","onChange"])],2)):x("",!0),(b(!0),D(J,null,se(e.columns,(s,h)=>(b(),D("th",{key:h,scope:"col",class:E([e.ui.th.base,e.ui.th.padding,e.ui.th.color,e.ui.th.font,e.ui.th.size,s.class])},[K(e.$slots,`${s.key}-header`,{column:s,sort:e.sort,onSort:e.onSort},()=>[s.sortable?(b(),M(o,Q({key:0,ref_for:!0},{...e.ui.default.sortButton||{},...e.sortButton},{icon:!e.sort.column||e.sort.column!==s.key?e.sortButton.icon||e.ui.default.sortButton.icon:e.sort.direction==="asc"?e.sortAscIcon:e.sortDescIcon,label:s[e.columnAttribute],onClick:S=>e.onSort(s)}),null,16,["icon","label","onClick"])):(b(),D("span",Ct,q(s[e.columnAttribute]),1))])],2))),128))],2),e.loading&&e.progress?(b(),D("tr",$t,[P("td",{colspan:0,class:E(e.ui.progress.wrapper)},[B(f,Q({...e.ui.default.progress||{},...e.progress},{size:"2xs"}),null,16)],2)])):x("",!0)],2),P("tbody",{class:E(e.ui.tbody)},[e.loadingState&&e.loading&&!e.rows.length?(b(),D("tr",Et,[P("td",{colspan:e.columns.length+(e.modelValue?1:0)},[K(e.$slots,"loading-state",{},()=>[P("div",{class:E(e.ui.loadingState.wrapper)},[e.loadingState.icon?(b(),M(v,{key:0,name:e.loadingState.icon,class:E(e.ui.loadingState.icon),"aria-hidden":"true"},null,8,["name","class"])):x("",!0),P("p",{class:E(e.ui.loadingState.label)},q(e.loadingState.label),3)],2)])],8,Bt)])):e.emptyState&&!e.rows.length?(b(),D("tr",Dt,[P("td",{colspan:e.columns.length+(e.modelValue?1:0)},[K(e.$slots,"empty-state",{},()=>[P("div",{class:E(e.ui.emptyState.wrapper)},[e.emptyState.icon?(b(),M(v,{key:0,name:e.emptyState.icon,class:E(e.ui.emptyState.icon),"aria-hidden":"true"},null,8,["name","class"])):x("",!0),P("p",{class:E(e.ui.emptyState.label)},q(e.emptyState.label),3)],2)])],8,Ft)])):(b(!0),D(J,{key:2},se(e.rows,(s,h)=>(b(),D("tr",{key:h,class:E([e.ui.tr.base,e.isSelected(s)&&e.ui.tr.selected,e.$attrs.onSelect&&e.ui.tr.active,s==null?void 0:s.class]),onClick:()=>e.onSelect(s)},[e.modelValue?(b(),D("td",{key:0,class:E(e.ui.checkbox.padding)},[B(t,{modelValue:e.selected,"onUpdate:modelValue":c[0]||(c[0]=S=>e.selected=S),value:s,"aria-label":"Select row",onClick:c[1]||(c[1]=tt(()=>{},["stop"]))},null,8,["modelValue","value"])],2)):x("",!0),(b(!0),D(J,null,se(e.columns,(S,k)=>{var T;return b(),D("td",{key:k,class:E([e.ui.td.base,e.ui.td.padding,e.ui.td.color,e.ui.td.font,e.ui.td.size,(T=s[S.key])==null?void 0:T.class])},[K(e.$slots,`${S.key}-data`,{column:S,row:s,index:h,getRowData:l=>e.getRowData(s,S.key,l)},()=>[at(q(e.getRowData(s,S.key)),1)])],2)}),128))],10,It))),128))],2)],2)],16)}const At=Ae(Pt,[["render",Tt]]),Ot={class:"container my-8 pb-24"},Ut={class:"flex justify-between items-center mb-6"},jt={class:"flex gap-4 mb-6"},xt={class:"flex flex-col items-center justify-center py-12 gap-4"},Vt={key:0},Lt={class:"flex flex-col items-center gap-2"},Nt={key:1},Mt={class:"flex items-center gap-2"},Rt={class:"p-4 space-y-4"},_t={class:"flex justify-end gap-2"},Kt=Z({__name:"manage",setup(e){const c=ot(),w=lt(),I=O(!1),C=O(!1),$=O(new Set),t=O({exchange:"",symbol:""}),o=[{key:"exchange",label:"Exchange"},{key:"symbol",label:"Symbol"},{key:"start_date",label:"Start Date"},{key:"end_date",label:"End Date"},{key:"actions",label:"Actions"}],f=F(()=>{let l=c.existingCandles;return t.value.exchange&&(l=l.filter(r=>r.exchange.toLowerCase().includes(t.value.exchange.toLowerCase()))),t.value.symbol&&(l=l.filter(r=>r.symbol.toLowerCase().includes(t.value.symbol.toLowerCase()))),l}),v=F(()=>I.value||C.value),s=l=>`${l.exchange}-${l.symbol}`;async function h(){G("success","Fetching latest candle details. This process might take from a few seconds up to a few minutes depending on the database size."),C.value=!0;try{await c.fetchExistingCandles()}finally{C.value=!1,G("success","Candles information updated successfully")}}async function S(l){const r=s(l);$.value.add(r);try{await c.deleteCandles(l.exchange,l.symbol),G("success","Candles deleted successfully")}catch{G("error","Failed to delete candles")}finally{$.value.delete(r)}}async function k(l){try{await c.updateCandles(l.exchange,l.symbol,l.start_date),G("success",`Started updating candles for ${l.symbol} on ${l.exchange}`)}catch{G("error","Failed to start candle update")}}const T=l=>w.backtestingExchangeNames.includes(l);return oe(async()=>{if(!c.existingCandles.length){I.value=!0;try{await c.fetchExistingCandles()}finally{I.value=!1}}}),(l,r)=>{const g=he,y=st,m=ut,n=it,a=St,i=At,p=rt;return b(),D("div",Ot,[P("div",Ut,[B(g,{class:"shadow-sm",icon:"i-heroicons-arrow-left",variant:"outline",to:"/candles",label:"Back"}),B(g,{class:"shadow-sm",icon:"i-heroicons-arrow-path",loading:C.value,label:"Refresh",onClick:h},null,8,["loading"])]),P("div",jt,[B(y,{modelValue:t.value.exchange,"onUpdate:modelValue":r[1]||(r[1]=u=>t.value.exchange=u),class:"w-64",icon:"i-heroicons-magnifying-glass",placeholder:"Filter by Exchange",ui:{icon:{trailing:{pointer:""}}}},{trailing:U(()=>[$e(B(g,{color:"gray",variant:"link",icon:"i-heroicons-x-mark-20-solid",padded:!1,onClick:r[0]||(r[0]=u=>t.value.exchange="")},null,512),[[Ee,t.value.exchange!==""]])]),_:1},8,["modelValue"]),B(y,{modelValue:t.value.symbol,"onUpdate:modelValue":r[3]||(r[3]=u=>t.value.symbol=u),icon:"i-heroicons-magnifying-glass",placeholder:"Filter by Symbol",class:"w-64",ui:{icon:{trailing:{pointer:""}}}},{trailing:U(()=>[$e(B(g,{color:"gray",variant:"link",icon:"i-heroicons-x-mark-20-solid",padded:!1,onClick:r[2]||(r[2]=u=>t.value.symbol="")},null,512),[[Ee,t.value.symbol!==""]])]),_:1},8,["modelValue"])]),I.value?(b(),M(m,{key:0,icon:"i-heroicons-information-circle",color:"gray",title:"Loading candles...",description:"This process might take from a few seconds up to a few minutes.",class:"mb-6"})):x("",!0),B(p,null,{default:U(()=>[B(i,{rows:f.value,columns:o,loading:v.value,"loading-state":{icon:"i-heroicons-arrow-path-20-solid",label:"Loading candles..."},progress:{color:"primary",animation:"carousel"}},{"empty-state":U(()=>[P("div",xt,[ie(c).existingCandles.length===0?(b(),D("div",Vt,[r[5]||(r[5]=P("span",{class:"text-gray-500 dark:text-gray-400 mb-4 block"}," Click the button below to fetch existing candles from the database ",-1)),P("div",Lt,[B(g,{icon:"i-heroicons-arrow-path",label:"Fetch Candles",onClick:h}),r[4]||(r[4]=P("p",{class:"text-sm text-gray-500 dark:text-gray-400 mt-2"}," Note: This process might take a few minutes depending on the database size ",-1))])])):(b(),D("div",Nt,r[6]||(r[6]=[P("span",{class:"text-gray-500 dark:text-gray-400"}," No candles found matching your filters ",-1)])))])]),"actions-data":U(({row:u})=>[P("div",Mt,[T(u.exchange)?(b(),M(g,{key:1,color:"teal",variant:"soft",icon:"i-heroicons-arrow-path",size:"xs",label:"Update",loading:ie(c).isSymbolUpdating(u.exchange,u.symbol),disabled:!T(u.exchange),onClick:A=>k(u)},null,8,["loading","disabled","onClick"])):(b(),M(n,{key:0,text:"This exchange doesn't support backtesting"},{default:U(()=>[B(g,{color:"teal",variant:"soft",icon:"i-heroicons-arrow-path",size:"xs",label:"Update",loading:ie(c).isSymbolUpdating(u.exchange,u.symbol),disabled:!T(u.exchange),onClick:A=>k(u)},null,8,["loading","disabled","onClick"])]),_:2},1024)),B(a,{popper:{placement:"bottom-end"}},{panel:U(({close:A})=>[P("div",Rt,[P("p",null,'Are you sure you want to delete all candles for "'+q(u.symbol)+'" on "'+q(u.exchange)+'"?',1),P("div",_t,[B(g,{color:"gray",variant:"soft",label:"Cancel",onClick:A},null,8,["onClick"]),B(g,{color:"red",variant:"soft",label:"Delete",onClick:()=>{S(u),A()}},null,8,["onClick"])])])]),default:U(()=>[B(g,{color:"red",variant:"soft",icon:"i-heroicons-trash",size:"xs",loading:$.value.has(s(u)),label:"Delete"},null,8,["loading"])]),_:2},1024)])]),_:1},8,["rows","loading"])]),_:1})])}}});export{Kt as default};
