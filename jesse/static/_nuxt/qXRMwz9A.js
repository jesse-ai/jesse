import{_ as Ve}from"./DnWQm4Tq.js";import{d as ie,a as ce,c as C,r as w,w as q,B as de,o as Me,n as ue,C as i,g as n,a4 as Te,a6 as je,P as Le,W as qe,aM as Ee,i as e,f as k,F as N,L as Re,_ as Oe,j as t,e as D,E as _,x as H,t as Ne,H as Q,N as De,M as Ue,G as u,J as X,O as P,z as ze,l as Be,p as Ie,q as Fe,s as Y,I as We,h as He,Q as Pe}from"./CU_MfyYc.js";import{_ as Ae}from"./D-1_drer.js";import{_ as Ge}from"./DP9I38t9.js";import{s as Je,T as Ke,l as Qe,d as Xe}from"./9VOnL4Iz.js";import{_ as Ye}from"./CvhZxjKo.js";import{_ as Ze}from"./DMFWKIsW.js";import{_ as es}from"./RFJ54-KY.js";import{_ as ss}from"./C4bX54si.js";import{_ as ts}from"./BfYIQCg8.js";import{_ as as}from"./DK27pemE.js";import{u as os}from"./Cwg39VG_.js";import{r as ls,a as rs}from"./CViTd9PT.js";import"./D35nYK_C.js";import"./DZb6Dd70.js";const ns=ie({__name:"MonteCarloEquityCurve",props:{data:{}},setup(Z){const U=ce(),E=C(()=>U.value),g=w();let c=null,h=[];const a=Z;q(E,v=>{L(v)}),de(async()=>{await T()});async function T(){const v={...Je,width:g.value.clientWidth,rightPriceScale:{visible:!0}};c=Ke(g.value,v);const m=a.data.filter(p=>p.name==="Original"),y=[...a.data.filter(p=>p.name!=="Original"),...m];for(let p=0;p<y.length;p++){const $=y[p],z=$.name==="Original",R="rgb(251, 191, 36)",B="rgba(99, 102, 241, 0.15)",A=z?{lineWidth:2,color:R,priceLineVisible:!0,lastValueVisible:!0}:{lineWidth:2,color:B,priceLineVisible:!1,lastValueVisible:!1},b=c.addLineSeries(A),I=($.data||[]).map(O=>({time:O.time,value:O.value}));b.setData(I),b.applyOptions({color:z?R:B}),h.push(b)}c.timeScale().fitContent(),L(E.value)}Me(()=>{if(h&&h.length>0)for(const v of h)try{v.setData([])}catch{}j()});function j(){if(c!==null){try{c.remove()}catch(v){console.error("Error removing chart:",v)}c=null}h=[]}function L(v){c===null||h===null||c.applyOptions(v==="light"?Qe.chart:Xe.chart)}return q(()=>a.data,async()=>{j(),await ue(),await T()},{deep:!0}),(v,m)=>(n(),i("div",{ref_key:"chartContainer",ref:g,class:"rounded overflow-hidden border-2 border-gray-100 dark:border-gray-600"},null,512))}}),is=Ie(as),cs={key:0,class:"mb-8"},ds={key:1,class:"mb-8"},us={key:2},vs={key:0,class:"mb-8"},_s={key:0,class:"mb-8"},fs={class:"flex justify-between items-center mb-2"},gs={class:"text-sm text-gray-600 dark:text-gray-400"},ms={key:0,class:"text-sm text-gray-500 dark:text-gray-400"},ys={class:"mb-8"},hs={key:0},ps={key:1,class:"border-2 border-gray-100 dark:border-gray-600 rounded overflow-hidden p-4"},ws={class:"space-y-2"},bs={key:1,class:"mb-4"},xs={class:"border border-gray-200 bg-white dark:border-gray-700 dark:bg-gray-700 rounded-lg overflow-hidden"},ks={class:"w-[25%] text-sm font-medium italic"},Cs={class:"w-[18%] text-sm"},Ss={class:"w-[19%] text-sm"},$s={class:"w-[19%] text-sm"},Vs={class:"w-[19%] text-sm"},Ms={key:2,class:"mb-4"},Ts={class:"border border-gray-200 bg-white dark:border-gray-700 dark:bg-gray-700 rounded-lg overflow-hidden"},js={class:"flex justify-between font-semibold p-4 bg-gray-100 dark:bg-gray-900 text-sm"},Ls={class:"w-[25%]"},qs={class:"w-[18%]"},Es={class:"w-[19%]"},Rs={class:"w-[19%]"},Os={class:"w-[19%]"},Ns={class:"w-[25%]"},Ds={class:"w-[18%]"},Us={class:"w-[19%]"},zs={class:"w-[19%]"},Bs={class:"w-[19%]"},Is={key:1,class:"mb-8"},Fs={key:0,class:"mb-8"},Ws={class:"flex justify-between items-center mb-2"},Hs={class:"text-sm text-gray-600 dark:text-gray-400"},Ps={key:0,class:"text-sm text-gray-500 dark:text-gray-400"},As={class:"mb-8"},Gs={key:0},Js={key:1,class:"border-2 border-gray-100 dark:border-gray-600 rounded overflow-hidden p-4"},Ks={class:"space-y-2"},Qs={key:1,class:"mb-4"},Xs={class:"border border-gray-200 bg-white dark:border-gray-700 dark:bg-gray-700 rounded-lg overflow-hidden"},Ys={class:"w-[25%] text-sm font-medium italic"},Zs={class:"w-[18%] text-sm"},et={class:"w-[19%] text-sm"},st={class:"w-[19%] text-sm"},tt={class:"w-[19%] text-sm"},at={key:2,class:"mb-4"},ot={class:"border border-gray-200 bg-white dark:border-gray-700 dark:bg-gray-700 rounded-lg overflow-hidden"},lt={class:"flex justify-between font-semibold p-4 bg-gray-100 dark:bg-gray-900 text-sm"},rt={class:"w-[25%]"},nt={class:"w-[18%]"},it={class:"w-[19%]"},ct={class:"w-[19%]"},dt={class:"w-[19%]"},ut={class:"w-[25%]"},vt={class:"w-[18%]"},_t={class:"w-[19%]"},ft={class:"w-[19%]"},gt={class:"w-[19%]"},mt={key:0,class:"flex flex-col items-center justify-center select-none"},yt={class:"mb-8 w-full"},ht={class:"flex flex-col gap-4 mt-4"},pt={key:1},wt={class:"mb-8 w-full"},bt={class:"flex flex-col gap-4 mt-4"},xt={key:2,class:"mt-8 w-full"},kt={key:3,class:"mt-8 w-full bg-white dark:bg-gray-800 border dark:border-gray-700 rounded-lg overflow-hidden select-none"},Ct={class:"px-6 py-4 border-b dark:border-gray-700 bg-gray-100 dark:bg-gray-700/50 flex justify-between items-center"},St={class:"text-xs font-bold text-gray-900 dark:text-gray-100 uppercase tracking-wider"},$t={class:"px-6 py-4"},Vt={key:0,class:"text-sm text-gray-600 dark:text-gray-300 whitespace-pre-wrap"},Mt={key:1,class:"text-sm text-gray-400 dark:text-gray-500 italic text-center py-2"},Tt={class:"flex items-center justify-between"},jt={key:0,class:"flex flex-col space-y-4"},Lt={class:"flex flex-col"},qt={class:"flex items-center justify-between mb-2"},Et={class:"flex gap-2"},Rt={class:"border border-gray-200 dark:border-gray-800 rounded",style:{height:"500px"}},Ot={class:"p-4 space-y-3"},Nt={key:1,class:"flex flex-col space-y-4"},Dt={class:"flex flex-col"},Ut={class:"flex items-center justify-between mb-2"},zt={class:"flex gap-2"},Bt={key:2,class:"text-center py-8 text-gray-500 dark:text-gray-400"},It=ie({__name:"[id]",setup(Z){os({title:"Monte Carlo Session - Jesse"});const U=Te(),E=je(),g=C(()=>E.params.id),c=Le(),h=C(()=>c.form),a=C(()=>c.results),T=w(!1),j=w(!1),L=w(!1),v=w(!1),m=w(null),S=w(),y=w(""),p=w(!1),$=w(!1),z=ce(),R=C(()=>z.value==="light"?"vs-light":"vs-dark"),B=C(()=>E.query.status?E.query.status:null),A=C(()=>({automaticLayout:!0,minimap:{enabled:!1},fontSize:14,lineHeight:21,readOnly:!0})),b=w(!1),I=C(()=>{const l=[];return a.value.trades.original_equity_curve&&a.value.trades.original_equity_curve.data&&l.push({name:"Original",color:"#f97316",data:a.value.trades.original_equity_curve.data}),a.value.trades.scenario_equity_curves.forEach((s,d)=>{s&&s.data&&l.push({name:`Scenario ${d+1}`,color:"#6366f1",data:s.data})}),l}),O=C(()=>{const l=[];return a.value.candles.original_equity_curve&&a.value.candles.original_equity_curve.data&&l.push({name:"Original",color:"#f97316",data:a.value.candles.original_equity_curve.data}),a.value.candles.scenario_equity_curves.forEach((s,d)=>{s&&s.data&&l.push({name:`Scenario ${d+1}`,color:"#6366f1",data:s.data})}),l});de(()=>{const l=()=>{var d;(d=c.clearCurrentSession)==null||d.call(c)},s=()=>{document.hidden&&(y.value="",m.value=null)};window.addEventListener("beforeunload",l),document.addEventListener("visibilitychange",s),qe(()=>{var d,F;if(window.removeEventListener("beforeunload",l),document.removeEventListener("visibilitychange",s),(d=S.value)!=null&&d.$editor)try{S.value.$editor.dispose()}catch(W){console.error("Error disposing editor:",W)}S.value=void 0,y.value="",m.value=null,a.value.infoLogs="",a.value.trades.original_equity_curve=null,a.value.trades.scenario_equity_curves=[],a.value.candles.original_equity_curve=null,a.value.candles.scenario_equity_curves=[],c.clearCurrentSession&&c.clearCurrentSession(),(F=c.clearCurrentSession)==null||F.call(c)}),setTimeout(async()=>{c.clearCurrentSession(),B.value?U.replace(`/monte-carlo/${g.value}`):(await c.loadSession(g.value),c.results.status==="terminated"||c.results.status==="stopped"?b.value=!0:b.value=!1),await G()},100)}),Ee(()=>{var l;return(l=c.clearCurrentSession)==null||l.call(c),y.value="",m.value=null,!0});async function G(){if(g.value)try{const l=await c.getSessionData(g.value);l&&(m.value=l)}catch(l){console.error("Error fetching session data:",l)}}q(()=>c.results.status,l=>{l==="terminated"||l==="stopped"?b.value=!0:b.value=!1}),q(R,l=>{var s,d;(d=(s=S.value)==null?void 0:s.$editor)==null||d.updateOptions({theme:l})}),q(v,async l=>{if(l){if(p.value=!0,await ue(),g.value&&y.value===""){const s=await c.getStrategyCode(g.value);s&&(y.value=Object.values(s)[0])}setTimeout(()=>{var s;(s=S.value)!=null&&s.$editor&&S.value.$editor.updateOptions({theme:R.value})},50)}p.value=!1}),q($,async l=>{if(l&&g.value&&!a.value.infoLogs.length){const s=await c.getSessionLogs(g.value);s&&(a.value.infoLogs=s)}}),q(L,async l=>{l&&await G()});function ve(){X.copyToClipboard(a.value.infoLogs),Y("success","Info logs copied successfully"),j.value=!0,setTimeout(()=>{j.value=!1},3e3)}async function _e(){await c.terminate()}async function fe(){await c.resume()}function ee(){c.newSession(),We("/monte-carlo/")}const ge=l=>{const s=[];return l.forEach(d=>{s.push([{value:d.symbol,style:""},{value:d.timeframe,style:""},{value:d.strategy,style:""}])}),s},me=l=>[["Start Date",l.start_date],["Finish Date",l.finish_date]];function se(l){return{total_return:"Return",max_drawdown:"Max Drawdown",sharpe_ratio:"Sharpe Ratio",calmar_ratio:"Calmar Ratio",net_profit_percentage:"Net Profit",win_rate:"Win Rate",total:"Total Trades",annual_return:"Annual Return"}[l]||l.replace(/_/g," ").replace(/\b\w/g,d=>d.toUpperCase())}function V(l,s){return s==null?"N/A":l==="total_return"||l==="net_profit_percentage"||l==="annual_return"?`${s.toFixed(1)}%`:l==="max_drawdown"?`${s.toFixed(1)}%`:l==="win_rate"?`${(s*100).toFixed(1)}%`:l==="sharpe_ratio"||l==="calmar_ratio"?s.toFixed(2):l==="total"?Math.round(s).toString():s.toFixed(2)}async function ye(){try{await navigator.clipboard.writeText(y.value),Y("success","Strategy code copied to clipboard")}catch(l){He(l)}}function he(){var s;const l=(s=h.value.routes[0])==null?void 0:s.strategy;l?J(`/strategies/${l}`):Y("error","No strategy selected")}async function pe(){await G()}function J(l){U.push(l)}return(l,s)=>{var re,ne;const d=Ve,F=Re,W=Ae,K=De,te=Ge,ae=ns,o=Ye,f=Ne,oe=Ue,le=Ze,we=es,be=ss,xe=ts,ke=is,Ce=Be,Se=ze,$e=Oe;return n(),i(N,null,[e(F,{modelValue:$.value,"onUpdate:modelValue":s[0]||(s[0]=r=>$.value=r),title:"Logs"},{default:k(()=>[e(d,{logs:a.value.infoLogs},null,8,["logs"])]),buttons:k(()=>[t("button",{class:"ml-2 p-2 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full text-gray-400 hover:text-gray-500 dark:hover:text-gray-300 focus:outline-none",onClick:ve},[j.value?(n(),D(H(ls),{key:0,class:"h-6 w-6","aria-hidden":"true"})):_("",!0),!j.value&&a.value.infoLogs.length!=0?(n(),D(H(rs),{key:1,class:"h-6 w-6","aria-hidden":"true"})):_("",!0)])]),_:1},8,["modelValue"]),e(be,null,{left:k(()=>[a.value.trades.exception.error&&a.value.executing?(n(),i("div",cs,[e(W,{modelValue:T.value,"onUpdate:modelValue":s[1]||(s[1]=r=>T.value=r),title:"Trades Simulation Error",content:a.value.trades.exception.traceback||a.value.trades.exception.error,mode:"monte-carlo"},null,8,["modelValue","content"])])):_("",!0),a.value.candles.exception.error&&a.value.executing?(n(),i("div",ds,[e(W,{modelValue:T.value,"onUpdate:modelValue":s[2]||(s[2]=r=>T.value=r),title:"Candles Simulation Error",content:a.value.candles.exception.traceback||a.value.candles.exception.error,mode:"monte-carlo"},null,8,["modelValue","content"])])):_("",!0),(a.value.executing||a.value.showResults)&&!(a.value.candles.exception.error||a.value.trades.exception.error)?(n(),i("div",us,[h.value.run_trades?(n(),i("div",vs,[e(K,{title:"ðŸ”€ Monte Carlo Trades",class:"mb-4"}),a.value.trades.progressbar.total>0&&a.value.trades.progressbar.current<a.value.trades.progressbar.total?(n(),i("div",_s,[t("div",fs,[t("p",gs," Running Trades Simulation... ("+u(a.value.trades.progressbar.current)+"/"+u(a.value.trades.progressbar.total)+") ",1),a.value.trades.progressbar.estimated_remaining_seconds>0?(n(),i("p",ms,u(H(X).remainingTimeText(a.value.trades.progressbar.estimated_remaining_seconds)),1)):_("",!0)]),e(te,{value:a.value.trades.progressbar.current,max:a.value.trades.progressbar.total,size:"lg",color:"primary"},null,8,["value","max"])])):_("",!0),t("div",ys,[I.value.length?(n(),i("div",hs,[e(ae,{data:I.value},null,8,["data"])])):(n(),i("div",ps,[t("div",ws,[e(o,{class:"h-8 w-3/4"}),e(o,{class:"h-8 w-full"}),e(o,{class:"h-8 w-5/6"}),e(o,{class:"h-8 w-full"}),e(o,{class:"h-8 w-4/5"}),e(o,{class:"h-8 w-full"}),e(o,{class:"h-8 w-3/4"}),e(o,{class:"h-8 w-full"}),e(o,{class:"h-8 w-5/6"}),e(o,{class:"h-8 w-full"}),e(o,{class:"h-8 w-4/5"}),e(o,{class:"h-8 w-full"})])]))]),a.value.trades.summary_metrics.length?(n(),i("div",bs,[t("div",xs,[s[18]||(s[18]=t("div",{class:"flex justify-between font-semibold p-4 bg-gray-100 dark:bg-gray-900 text-sm"},[t("div",{class:"w-[25%]"},"Metric"),t("div",{class:"w-[18%]"},"Original"),t("div",{class:"w-[19%]"},"Worst 5%"),t("div",{class:"w-[19%]"},"Median"),t("div",{class:"w-[19%]"},"Best 5%")],-1)),(n(!0),i(N,null,P(a.value.trades.summary_metrics,(r,M)=>(n(),i("div",{key:M,class:Q(["flex justify-between border-t border-gray-200 dark:border-gray-700 p-4",{"bg-gray-50 dark:bg-gray-800":M%2===0}])},[t("div",ks,u(se(r.metric)),1),t("div",Cs,u(V(r.metric,r.original)),1),t("div",Ss,u(V(r.metric,r.worst_5)),1),t("div",$s,u(V(r.metric,r.median)),1),t("div",Vs,u(V(r.metric,r.best_5)),1)],2))),128))])])):(n(),i("div",Ms,[t("div",Ts,[t("div",js,[t("div",Ls,[e(o,{class:"h-4 w-20"})]),t("div",qs,[e(o,{class:"h-4 w-16"})]),t("div",Es,[e(o,{class:"h-4 w-16"})]),t("div",Rs,[e(o,{class:"h-4 w-16"})]),t("div",Os,[e(o,{class:"h-4 w-16"})])]),(n(),i(N,null,P(4,r=>t("div",{key:r,class:"flex justify-between border-t border-gray-200 dark:border-gray-700 p-4"},[t("div",Ns,[e(o,{class:"h-4 w-24"})]),t("div",Ds,[e(o,{class:"h-4 w-16"})]),t("div",Us,[e(o,{class:"h-4 w-16"})]),t("div",zs,[e(o,{class:"h-4 w-16"})]),t("div",Bs,[e(o,{class:"h-4 w-16"})])])),64))])]))])):_("",!0),h.value.run_candles?(n(),i("div",Is,[e(K,{title:"ðŸ“ˆ Monte Carlo Candles",class:"mb-4"}),a.value.candles.progressbar.total>0&&a.value.candles.progressbar.current<a.value.candles.progressbar.total?(n(),i("div",Fs,[t("div",Ws,[t("p",Hs," Running Candles Simulation... ("+u(a.value.candles.progressbar.current)+"/"+u(a.value.candles.progressbar.total)+") ",1),a.value.candles.progressbar.estimated_remaining_seconds>0?(n(),i("p",Ps,u(H(X).remainingTimeText(a.value.candles.progressbar.estimated_remaining_seconds)),1)):_("",!0)]),e(te,{value:a.value.candles.progressbar.current,max:a.value.candles.progressbar.total,size:"lg",color:"primary"},null,8,["value","max"])])):_("",!0),t("div",As,[O.value.length?(n(),i("div",Gs,[e(ae,{data:O.value},null,8,["data"])])):(n(),i("div",Js,[t("div",Ks,[e(o,{class:"h-8 w-3/4"}),e(o,{class:"h-8 w-full"}),e(o,{class:"h-8 w-5/6"}),e(o,{class:"h-8 w-full"}),e(o,{class:"h-8 w-4/5"}),e(o,{class:"h-8 w-full"}),e(o,{class:"h-8 w-3/4"}),e(o,{class:"h-8 w-full"}),e(o,{class:"h-8 w-5/6"}),e(o,{class:"h-8 w-full"}),e(o,{class:"h-8 w-4/5"}),e(o,{class:"h-8 w-full"})])]))]),a.value.candles.summary_metrics.length?(n(),i("div",Qs,[t("div",Xs,[s[19]||(s[19]=t("div",{class:"flex justify-between font-semibold p-4 bg-gray-100 dark:bg-gray-900 text-sm"},[t("div",{class:"w-[25%]"},"Metric"),t("div",{class:"w-[18%]"},"Original"),t("div",{class:"w-[19%]"},"Worst 5%"),t("div",{class:"w-[19%]"},"Median"),t("div",{class:"w-[19%]"},"Best 5%")],-1)),(n(!0),i(N,null,P(a.value.candles.summary_metrics,(r,M)=>(n(),i("div",{key:M,class:Q(["flex justify-between border-t border-gray-200 dark:border-gray-700 p-4",{"bg-gray-50 dark:bg-gray-800":M%2===0}])},[t("div",Ys,u(se(r.metric)),1),t("div",Zs,u(V(r.metric,r.original)),1),t("div",et,u(V(r.metric,r.worst_5)),1),t("div",st,u(V(r.metric,r.median)),1),t("div",tt,u(V(r.metric,r.best_5)),1)],2))),128))])])):(n(),i("div",at,[t("div",ot,[t("div",lt,[t("div",rt,[e(o,{class:"h-4 w-20"})]),t("div",nt,[e(o,{class:"h-4 w-16"})]),t("div",it,[e(o,{class:"h-4 w-16"})]),t("div",ct,[e(o,{class:"h-4 w-16"})]),t("div",dt,[e(o,{class:"h-4 w-16"})])]),(n(),i(N,null,P(4,r=>t("div",{key:r,class:"flex justify-between border-t border-gray-200 dark:border-gray-700 p-4"},[t("div",ut,[e(o,{class:"h-4 w-24"})]),t("div",vt,[e(o,{class:"h-4 w-16"})]),t("div",_t,[e(o,{class:"h-4 w-16"})]),t("div",ft,[e(o,{class:"h-4 w-16"})]),t("div",gt,[e(o,{class:"h-4 w-16"})])])),64))])]))])):_("",!0)])):_("",!0)]),right:k(()=>{var r,M;return[a.value.executing&&!a.value.showResults?(n(),i("div",mt,[t("div",yt,[a.value.trades.exception.error||a.value.candles.exception.error?(n(),D(f,{key:0,class:"w-full flex justify-center mt-4",icon:"i-heroicons-arrow-uturn-left",variant:"soft",color:"green",label:"New Session",trailing:!1,onClick:s[3]||(s[3]=x=>ee())})):a.value.showResults?_("",!0):(n(),D(f,{key:1,color:"gray",ui:{color:{gray:{soft:"text-rose-500 dark:text-rose-400"}}},class:"w-full flex justify-center mt-4",icon:"i-heroicons-pause",variant:"soft",label:"Terminate",disabled:a.value.trades.progressbar.current===0&&a.value.candles.progressbar.current===0,trailing:!1,onClick:s[4]||(s[4]=x=>_e())},null,8,["disabled"])),t("div",ht,[e(f,{class:"w-full flex justify-center",color:"gray",variant:"soft",label:"Logs",icon:"i-heroicons-document-text",trailing:!1,onClick:s[5]||(s[5]=x=>$.value=!0)}),e(f,{class:"w-full flex justify-center",color:"gray",variant:"soft",label:"History",icon:"i-heroicons-clock",trailing:!1,onClick:s[6]||(s[6]=x=>J("/monte-carlo/history"))}),e(f,{class:"w-full flex justify-center",color:"gray",variant:"soft",label:"View Strategy",icon:"i-heroicons-code-bracket",trailing:!1,onClick:s[7]||(s[7]=x=>v.value=!0)})])])])):_("",!0),a.value.showResults?(n(),i("div",pt,[t("div",wt,[b.value?(n(),D(f,{key:0,class:"w-full flex justify-center",icon:"i-heroicons-play",variant:"solid",color:"primary",label:"Resume",trailing:!1,onClick:s[8]||(s[8]=x=>fe())})):_("",!0),e(f,{class:Q(["w-full flex justify-center",{"mt-4":b.value}]),icon:"i-heroicons-arrow-uturn-left",variant:"soft",color:"green",label:"New Session",trailing:!1,onClick:s[9]||(s[9]=x=>ee())},null,8,["class"]),t("div",bt,[e(f,{class:"w-full flex justify-center",color:"gray",variant:"soft",label:"Logs",icon:"i-heroicons-document-text",trailing:!1,onClick:s[10]||(s[10]=x=>$.value=!0)}),e(f,{class:"w-full flex justify-center",color:"gray",variant:"soft",label:"History",icon:"i-heroicons-clock",trailing:!1,onClick:s[11]||(s[11]=x=>J("/monte-carlo/history"))}),e(f,{class:"w-full flex justify-center",color:"gray",variant:"soft",label:"View Strategy",icon:"i-heroicons-code-bracket",trailing:!1,onClick:s[12]||(s[12]=x=>v.value=!0)})])])])):_("",!0),(a.value.executing||a.value.showResults)&&a.value.generalInfo.length?(n(),i("div",xt,[e(K,{title:"Info",class:"mb-4"}),e(oe,{data:a.value.generalInfo},null,8,["data"]),e(le,{class:"mt-8 mb-4",size:"lg",label:"Duration"}),e(oe,{data:me(h.value)},null,8,["data"]),e(le,{class:"mt-8 mb-4",size:"lg",label:"Routes"}),e(we,{data:ge(h.value.routes),"header-items":["Symbol","Timeframe","Strategy"],header:""},null,8,["data"])])):_("",!0),a.value.executing||a.value.showResults?(n(),i("div",kt,[t("div",Ct,[t("h3",St,u(((r=m.value)==null?void 0:r.title)||"Session Notes"),1),e(f,{variant:"link",color:"gray",icon:"i-heroicons-pencil-square",size:"xs",onClick:s[13]||(s[13]=x=>L.value=!0)})]),t("div",$t,[(M=m.value)!=null&&M.description?(n(),i("div",Vt,u(m.value.description),1)):(n(),i("div",Mt," No notes yet. Click the edit button to add notes. "))])])):_("",!0)]}),_:1}),e(xe,{modelValue:L.value,"onUpdate:modelValue":s[14]||(s[14]=r=>L.value=r),"session-id":g.value,"initial-title":(re=m.value)==null?void 0:re.title,"initial-description":(ne=m.value)==null?void 0:ne.description,onSaved:pe},null,8,["modelValue","session-id","initial-title","initial-description"]),e($e,{modelValue:v.value,"onUpdate:modelValue":s[17]||(s[17]=r=>v.value=r),ui:{width:"sm:max-w-5xl"}},{default:k(()=>[e(Se,null,{header:k(()=>[t("div",Tt,[s[20]||(s[20]=t("h3",{class:"text-lg font-semibold"},"Strategy Code Snapshot",-1)),e(f,{color:"gray",variant:"ghost",icon:"i-heroicons-x-mark",size:"sm",onClick:s[15]||(s[15]=r=>v.value=!1)})])]),default:k(()=>[p.value?(n(),i("div",jt,[t("div",Lt,[t("div",qt,[e(o,{class:"h-4 w-20"}),t("div",Et,[e(o,{class:"h-8 w-16"}),e(o,{class:"h-8 w-32"})])]),t("div",Rt,[t("div",Ot,[e(o,{class:"h-4 w-full"}),e(o,{class:"h-4 w-5/6"}),e(o,{class:"h-4 w-4/5"}),e(o,{class:"h-4 w-full"}),e(o,{class:"h-4 w-3/4"}),e(o,{class:"h-4 w-full"}),e(o,{class:"h-4 w-2/3"}),e(o,{class:"h-4 w-5/6"}),e(o,{class:"h-4 w-full"}),e(o,{class:"h-4 w-4/5"}),e(o,{class:"h-4 w-1/2"}),e(o,{class:"h-4 w-3/4"}),e(o,{class:"h-4 w-full"}),e(o,{class:"h-4 w-5/6"}),e(o,{class:"h-4 w-2/3"})])])])])):y.value&&y.value.length>0?(n(),i("div",Nt,[t("div",Dt,[t("div",Ut,[s[21]||(s[21]=t("label",{class:"block text-sm font-medium"},null,-1)),t("div",zt,[e(f,{icon:"i-heroicons-clipboard-document",label:"Copy",variant:"soft",color:"gray",size:"sm",onClick:ye}),e(f,{icon:"i-heroicons-pencil-square",label:"Go to Strategy Editor",variant:"soft",color:"primary",size:"sm",onClick:he})])]),e(Ce,null,{default:k(()=>[e(ke,{ref_key:"codeEditorRef",ref:S,modelValue:y.value,"onUpdate:modelValue":s[16]||(s[16]=r=>y.value=r),lang:"python",options:A.value,class:"border border-gray-200 dark:border-gray-800 rounded",style:{height:"500px"}},{default:k(()=>s[22]||(s[22]=[Fe(" Loading editor... ")])),_:1},8,["modelValue","options"])]),_:1})])])):(n(),i("div",Bt," No strategy code snapshot available for this session. "))]),_:1})]),_:1},8,["modelValue"])],64)}}}),aa=Pe(It,[["__scopeId","data-v-310af101"]]);export{aa as default};
