import{d as U,m as x,u as $,r as c,a as O,c as k,w as p,n as B,o as L,x as S,s as j,h as z,e as I,f as u,_ as K,g as R,i as a,j as t,k as q,l as A,p as H,q as W,t as F,v as G}from"./BZBcjETW.js";import{_ as J}from"./CBtiHpmx.js";const P=H(J),Q={class:"flex items-center justify-between"},X={class:"space-y-4"},Y={class:"flex justify-end gap-3"},oe=U({__name:"MonteCarloNotesModal",props:x({sessionId:{},initialTitle:{},initialDescription:{}},{modelValue:{type:Boolean,default:!1},modelModifiers:{}}),emits:x(["saved"],["update:modelValue"]),setup(y,{emit:b}){const n=y,C=b,s=$(y,"modelValue"),i=c(n.initialTitle||""),d=c(n.initialDescription||""),v=c(!1),m=c(),V=O(),g=k(()=>V.value==="light"?"vs-light":"vs-dark"),h={automaticLayout:!0,minimap:{enabled:!1},fontSize:15,lineHeight:21,wordWrap:"on"},w=k(()=>i.value!==(n.initialTitle||"")||d.value!==(n.initialDescription||""));p(g,o=>{var e,r;(r=(e=m.value)==null?void 0:e.$editor)==null||r.updateOptions({theme:o})}),p(()=>n.initialTitle,o=>{i.value=o||""}),p(()=>n.initialDescription,o=>{d.value=o||""}),p(s,async o=>{o?(await B(),setTimeout(()=>{var e;(e=m.value)!=null&&e.$editor&&(m.value.$editor.updateOptions({theme:g.value}),m.value.$editor.addCommand(2051,()=>{_()}))},100),window.addEventListener("keydown",f)):window.removeEventListener("keydown",f)}),L(()=>{window.removeEventListener("keydown",f)});function f(o){(o.metaKey||o.ctrlKey)&&o.key==="Enter"&&(o.preventDefault(),_())}async function _(){if(w.value){v.value=!0;try{await S().updateSessionNotes(n.sessionId,i.value,d.value),j("success","Notes saved successfully"),C("saved",{title:i.value,description:d.value}),s.value=!1}catch(o){z(o)}finally{v.value=!1}}}return(o,e)=>{const r=F,M=q,T=P,E=A,N=G,D=K;return R(),I(D,{modelValue:s.value,"onUpdate:modelValue":e[4]||(e[4]=l=>s.value=l),ui:{width:"sm:max-w-3xl"}},{default:u(()=>[a(N,null,{header:u(()=>[t("div",Q,[e[5]||(e[5]=t("h3",{class:"text-lg font-semibold"},"Add Title & Notes",-1)),a(r,{color:"gray",variant:"ghost",icon:"i-heroicons-x-mark",size:"sm",onClick:e[0]||(e[0]=l=>s.value=!1)})])]),footer:u(()=>[t("div",Y,[a(r,{color:"gray",variant:"ghost",label:"Cancel",onClick:e[3]||(e[3]=l=>s.value=!1)}),a(r,{color:"primary",label:"Save",icon:"i-heroicons-check",disabled:!w.value,loading:v.value,onClick:_},null,8,["disabled","loading"])])]),default:u(()=>[t("div",X,[t("div",null,[e[6]||(e[6]=t("label",{class:"block text-sm font-medium mb-2"},"Title",-1)),a(M,{modelValue:i.value,"onUpdate:modelValue":e[1]||(e[1]=l=>i.value=l),placeholder:"Enter a title for this Monte Carlo session",maxlength:"255",size:"lg"},null,8,["modelValue"])]),t("div",null,[e[8]||(e[8]=t("label",{class:"block text-sm font-medium mb-2"},"Description",-1)),a(E,null,{default:u(()=>[a(T,{ref_key:"descriptionEditorRef",ref:m,modelValue:d.value,"onUpdate:modelValue":e[2]||(e[2]=l=>d.value=l),lang:"markdown",options:h,class:"border border-gray-200 dark:border-gray-800 rounded",style:{height:"400px"}},{default:u(()=>e[7]||(e[7]=[W(" Loading editor... ")])),_:1},8,["modelValue"])]),_:1})])])]),_:1})]),_:1},8,["modelValue"])}}});export{oe as _};
