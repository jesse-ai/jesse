import{_ as te}from"./Cii_wpd3.js";import{d as oe,a6 as ne,a4 as re,a0 as de,A as ie,c as p,r as x,B as ue,w as z,a7 as ce,h as I,C as k,j as s,i as t,x as o,E as B,f as n,F as _e,O as me,D as y,ab as pe,t as ye,g as S,k as ve,a9 as ge,G as w,J as H,H as fe}from"./B4BPTRlB.js";import{_ as he}from"./0VzfMacR.js";import{_ as be}from"./BBSocZrR.js";import{_ as xe}from"./C0-a_pR3.js";import{_ as we}from"./DZxo0f9U.js";import{u as ke}from"./C1hERgHN.js";import"./5fD26zkw.js";import"./BPE2cDSt.js";const Se={class:"w-full"},Ve={class:"container mx-auto px-4 pt-16 pb-6 max-w-7xl"},qe={class:"mb-8"},Oe={class:"bg-white dark:bg-gray-800/50 border border-gray-200 dark:border-gray-700 rounded-2xl p-6 shadow-sm"},Te={class:"space-y-6"},Ce={class:"grid grid-cols-1 lg:grid-cols-12 gap-5"},Le={class:"lg:col-span-6"},Ue={class:"lg:col-span-3"},Ee={class:"lg:col-span-3"},Fe={class:"pt-6 border-t border-gray-100 dark:border-gray-700/50"},Ae={class:"flex flex-col sm:flex-row gap-5 sm:items-end"},De={class:"w-full sm:flex-1 grid grid-cols-1 sm:grid-cols-4 gap-5"},Me={class:"flex justify-end pt-2 sm:pt-0"},Re={key:0,class:"space-y-4"},ze={class:"bg-white dark:bg-gray-800 shadow rounded-lg overflow-hidden"},Ie={class:"divide-y divide-gray-200 dark:divide-gray-700"},Be={class:"hidden md:grid md:grid-cols-9 gap-4 items-center"},He={class:"col-span-1"},Ne={class:"col-span-1"},Pe={class:"col-span-1"},je={class:"col-span-1"},$e={class:"col-span-1"},Ke={class:"col-span-1"},Ge={class:"col-span-1"},Je={class:"col-span-1"},Ye={class:"col-span-2"},Qe={key:1,class:"space-y-4"},Xe={class:"bg-white dark:bg-gray-800/50 border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden shadow-sm"},We={class:"text-sm font-medium"},Ze={class:"text-sm text-gray-700 dark:text-gray-300"},el={class:"text-sm text-gray-700 dark:text-gray-300"},ll={class:"text-sm text-gray-700 dark:text-gray-300"},sl={class:"text-sm text-gray-700 dark:text-gray-300"},al={class:"text-sm text-gray-500 dark:text-gray-400"},tl={key:0,class:"flex justify-center"},ol={key:2,class:"bg-white dark:bg-gray-800 shadow rounded-lg p-12 text-center"},N=50,vl=oe({__name:"orders-history",setup(nl){ke({title:"Orders History - Jesse"});const r=ne(),v=re(),F=de(),V=ie(),P=p(()=>V.tabs),g=x([]),T=x(!1),L=x(!1),U=x(!0),q=x(0),C=x(!1),A=x(null),f=p({get:()=>r.query.id||"",set:l=>{const e={...r.query};l?e.id=l:delete e.id,v.push({query:e})}}),d=p({get:()=>r.query.status||"all",set:l=>{const e={...r.query};l==="all"?delete e.status:e.status=l,v.push({query:e})}}),h=p({get:()=>r.query.symbol||"",set:l=>{const e={...r.query};l?e.symbol=l:delete e.symbol,v.push({query:e})}}),i=p({get:()=>r.query.dateRange||"all_time",set:l=>{const e={...r.query};l==="all_time"?delete e.dateRange:e.dateRange=l,v.push({query:e})}}),u=p({get:()=>r.query.exchange||"all",set:l=>{const e={...r.query};l==="all"?delete e.exchange:e.exchange=l,v.push({query:e})}}),c=p({get:()=>r.query.type||"all",set:l=>{const e={...r.query};l==="all"?delete e.type:e.type=l,v.push({query:e})}}),_=p({get:()=>r.query.side||"all",set:l=>{const e={...r.query};l==="all"?delete e.side:e.side=l,v.push({query:e})}}),j=[{label:"All Statuses",value:"all"},{label:"Active",value:"ACTIVE"},{label:"Executed",value:"EXECUTED"},{label:"Canceled",value:"CANCELED"},{label:"Partially Filled",value:"PARTIALLY_FILLED"}],$=[{label:"All Time",value:"all_time"},{label:"Last 7 Days",value:"7_days"},{label:"Last 30 Days",value:"30_days"},{label:"Last 90 Days",value:"90_days"}],K=p(()=>{const l=[{label:"All Exchanges",value:"all",disabled:!1}];for(const e of F.liveTradingExchangeNames)F.planLimits.exchanges.includes(e)?l.push({label:e,value:e,disabled:!1}):l.push({label:`${e} (Upgrade required)`,value:e,disabled:!0});return l}),G=[{label:"All Types",value:"all"},{label:"Market",value:"MARKET"},{label:"Limit",value:"LIMIT"},{label:"Stop",value:"STOP"},{label:"FOK",value:"FOK"},{label:"Stop Limit",value:"STOP LIMIT"}],J=[{label:"All Sides",value:"all"},{label:"Buy",value:"buy"},{label:"Sell",value:"sell"}],Y=[{key:"symbol",label:"Symbol"},{key:"exchange",label:"Exchange"},{key:"side",label:"Side"},{key:"type",label:"Type"},{key:"price",label:"Price"},{key:"qty",label:"QTY"},{key:"status",label:"Status"},{key:"created_at",label:"Created"}];ue(()=>{setTimeout(()=>{E()},20)});const Q=ce(()=>{q.value=0,E()},300);z(f,()=>{Q()}),z([d,h,i,u,c,_],()=>{q.value=0,E()});async function E(){T.value=!0;try{const l=await V.fetchOrdersHistory({limit:N,offset:0,id_search:f.value||null,status_filter:d.value==="all"?null:d.value,symbol_filter:h.value||null,date_filter:i.value==="all_time"?null:i.value,exchange_filter:u.value==="all"?null:u.value,type_filter:c.value==="all"?null:c.value,side_filter:_.value==="all"?null:_.value});g.value=l.orders||[],q.value=g.value.length,U.value=l.hasMore}catch(l){I(l)}finally{T.value=!1}}async function X(){L.value=!0;try{const l=await V.fetchOrdersHistory({limit:N,offset:q.value,id_search:f.value||null,status_filter:d.value==="all"?null:d.value,symbol_filter:h.value||null,date_filter:i.value==="all_time"?null:i.value,exchange_filter:u.value==="all"?null:u.value,type_filter:c.value==="all"?null:c.value,side_filter:_.value==="all"?null:_.value});g.value=[...g.value,...l.orders||[]],q.value+=(l.orders||[]).length,U.value=l.hasMore}catch(l){I(l)}finally{L.value=!1}}function W(l){A.value=l.id,C.value=!0}function Z(){f.value="",d.value="all",h.value="",i.value="all_time",u.value="all",c.value="all",_.value="all"}function ee(l){switch(l==null?void 0:l.toLowerCase()){case"active":return"yellow";case"executed":return"green";case"canceled":return"red";case"partially_filled":return"blue";default:return"gray"}}return(l,e)=>{const D=te,M=ve,b=pe,O=ge,R=ye,m=he,le=be,se=xe,ae=we;return S(),k("div",null,[s("div",Se,[t(D,{"current-tab":null,tabs:o(P),onClose:o(V).closeTab,onCancel:o(V).cancel},null,8,["tabs","onClose","onCancel"])]),s("div",Ve,[s("div",qe,[e[8]||(e[8]=s("h1",{class:"text-2xl md:text-3xl font-bold text-gray-900 dark:text-white mb-6"}," Orders History ",-1)),s("div",Oe,[s("div",Te,[s("div",Ce,[s("div",Le,[t(b,{label:"Search Session",size:"md"},{default:n(()=>[t(M,{modelValue:o(f),"onUpdate:modelValue":e[0]||(e[0]=a=>y(f)?f.value=a:null),placeholder:"Enter Session ID...",icon:"i-heroicons-magnifying-glass",variant:"outline"},null,8,["modelValue"])]),_:1})]),s("div",Ue,[t(b,{label:"Status",size:"md"},{default:n(()=>[t(O,{modelValue:o(d),"onUpdate:modelValue":e[1]||(e[1]=a=>y(d)?d.value=a:null),options:j},null,8,["modelValue"])]),_:1})]),s("div",Ee,[t(b,{label:"Timeframe",size:"md"},{default:n(()=>[t(O,{modelValue:o(i),"onUpdate:modelValue":e[2]||(e[2]=a=>y(i)?i.value=a:null),options:$},null,8,["modelValue"])]),_:1})])]),s("div",Fe,[s("div",Ae,[s("div",De,[t(b,{label:"Symbol",size:"sm"},{default:n(()=>[t(M,{modelValue:o(h),"onUpdate:modelValue":e[3]||(e[3]=a=>y(h)?h.value=a:null),placeholder:"BTC-USDT...",icon:"i-heroicons-currency-dollar"},null,8,["modelValue"])]),_:1}),t(b,{label:"Exchange",size:"sm"},{default:n(()=>[t(O,{modelValue:o(u),"onUpdate:modelValue":e[4]||(e[4]=a=>y(u)?u.value=a:null),options:o(K)},null,8,["modelValue","options"])]),_:1}),t(b,{label:"Order Type",size:"sm"},{default:n(()=>[t(O,{modelValue:o(c),"onUpdate:modelValue":e[5]||(e[5]=a=>y(c)?c.value=a:null),options:G},null,8,["modelValue"])]),_:1}),t(b,{label:"Side",size:"sm"},{default:n(()=>[t(O,{modelValue:o(_),"onUpdate:modelValue":e[6]||(e[6]=a=>y(_)?_.value=a:null),options:J},null,8,["modelValue"])]),_:1})]),s("div",Me,[t(R,{label:"Reset All",color:"gray",variant:"soft",icon:"i-heroicons-arrow-path",size:"sm",class:"w-full sm:w-auto justify-center",onClick:Z})])])])])])]),o(T)?(S(),k("div",Re,[s("div",ze,[s("div",Ie,[(S(),k(_e,null,me(5,a=>s("div",{key:a,class:"p-4"},[s("div",Be,[s("div",He,[t(m,{class:"h-4 w-full"})]),s("div",Ne,[t(m,{class:"h-4 w-full"})]),s("div",Pe,[t(m,{class:"h-4 w-full"})]),s("div",je,[t(m,{class:"h-4 w-full"})]),s("div",$e,[t(m,{class:"h-4 w-full"})]),s("div",Ke,[t(m,{class:"h-4 w-full"})]),s("div",Ge,[t(m,{class:"h-4 w-full"})]),s("div",Je,[t(m,{class:"h-4 w-full"})]),s("div",Ye,[t(m,{class:"h-4 w-full"})])])])),64))])])])):o(g).length?(S(),k("div",Qe,[s("div",Xe,[t(se,{rows:o(g),columns:Y,class:"w-full",ui:{td:{base:"whitespace-nowrap"},th:{base:"whitespace-nowrap"}},onSelect:W},{"symbol-data":n(({row:a})=>[s("span",We,w(a.symbol),1)]),"exchange-data":n(({row:a})=>[s("span",Ze,w(a.exchange),1)]),"side-data":n(({row:a})=>[s("span",{class:fe(["text-sm font-medium",a.side==="buy"?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"])},w(a.side),3)]),"type-data":n(({row:a})=>[s("span",el,w(a.type),1)]),"price-data":n(({row:a})=>[s("span",ll,w(a.price?o(H).roundPrice(a.price):"-"),1)]),"qty-data":n(({row:a})=>[s("span",sl,w(a.qty),1)]),"status-data":n(({row:a})=>[t(le,{color:ee(a.status),label:a.status,variant:"soft",size:"xs"},null,8,["color","label"])]),"created_at-data":n(({row:a})=>[s("span",al,w(o(H).timestampToReadableDateTime(a.created_at)),1)]),_:1},8,["rows"])]),o(U)?(S(),k("div",tl,[t(R,{label:"Load More",variant:"soft",color:"gray",loading:o(L),onClick:X},null,8,["loading"])])):B("",!0)])):!o(T)&&o(g).length===0?(S(),k("div",ol,e[9]||(e[9]=[s("div",{class:"text-gray-400 dark:text-gray-500"},[s("i",{class:"i-heroicons-rectangle-stack h-12 w-12 mx-auto mb-4"}),s("p",{class:"text-lg"},"No orders found"),s("p",{class:"text-sm mt-2"},"Adjust your filters to see items in your order history")],-1)]))):B("",!0),t(ae,{modelValue:o(C),"onUpdate:modelValue":e[7]||(e[7]=a=>y(C)?C.value=a:null),"order-id":o(A)},null,8,["modelValue","order-id"])])])}}});export{vl as default};
