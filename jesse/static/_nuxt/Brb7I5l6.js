import{_ as W}from"./B-2SFkko.js";import{z as s,g as e,j as r,d as V,m as Z,u as q,c as k,b6 as O,P as K,a9 as Q,r as b,i as c,f as h,G as g,W as n,au as X,e as f,a2 as Y,bl as I,k as ee,t as te,bc as oe,be as ae,L as u,am as E,an as D,I as v,V as se,s as x,a8 as re,A as ne,J as $,Z as U}from"./BZBcjETW.js";import{a as le}from"./CNlI_mjZ.js";function ie(d,l){return e(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184"})])}function de(d,l){return e(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 3v1.5M3 21v-6m0 0 2.77-.693a9 9 0 0 1 6.208.682l.108.054a9 9 0 0 0 6.086.71l3.114-.732a48.524 48.524 0 0 1-.005-10.499l-3.11.732a9 9 0 0 1-6.085-.711l-.108-.054a9 9 0 0 0-6.208-.682L3 4.5M3 15V4.5"})])}function ce(d,l){return e(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})])}const ue={key:0,class:"mb-4"},pe=["innerHTML"],me={class:"flex justify-end"},ge={class:"rounded-md bg-red-50 p-4 my-4 select-text"},ye={class:"flex"},he={class:"flex-shrink-0"},_e={class:"ml-3 overflow-hidden w-full"},fe=["textContent"],ke=["innerHTML"],xe=["value"],Pe=V({__name:"Exception",props:Z({title:String,content:{type:String,default:""},mode:String,debugMode:{type:Boolean,default:!1}},{modelValue:{type:Boolean,default:!1},modelModifiers:{}}),emits:["update:modelValue"],setup(d){const l=d,m=q(d,"modelValue"),_=k(()=>O().params.id),t=K(),i=Q({description:"",attachLogs:!0,email:""}),M=b(!1),o=b(!1),w=b(!1),C=k(()=>l.mode==="backtest"&&!l.debugMode?{message:'It is highly recommended to attach log files with reports. To do that, press cancel, enable "Debug Mode", and  run again. ',type:"warning"}:{message:"",type:""}),A=k(()=>l.mode==="backtest"&&l.debugMode||l.mode==="live"),L=k(()=>t.hasLivePluginInstalled),j=async()=>{w.value=!0;const{data:T,error:a}=await se("/system/report-exception",{description:i.description,email:i.email,traceback:l.content,mode:l.mode,attach_logs:i.attachLogs,session_id:_.value},!0);if(w.value=!1,a.value&&a.value.statusCode!==200){x("error",`[${a.value.statusCode}]: ${a.value.message}`);return}const y=T.value;y.status==="success"?(i.description="",i.email="",x("success",y.message),m.value=!1):y.status==="error"&&x("error",y.message)},H=()=>{navigator.clipboard.writeText(l.content),x("success","Copied successfully"),o.value=!0,setTimeout(()=>{o.value=!1},2e3)},R=()=>{m.value=!0};return(T,a)=>{const y=W,J=I,B=Y,N=ee,P=re,S=te,z=X,F=oe,G=le;return e(),s(v,null,[c(F,{modelValue:m.value,"onUpdate:modelValue":a[5]||(a[5]=p=>m.value=p),title:"Report"},{default:h(()=>[n(C).message?(e(),s("div",ue,[c(y,{color:"teal",icon:"i-heroicons-check-circle",title:n(C).message,"close-button":{icon:"i-heroicons-x-mark-20-solid",color:"white",variant:"link"},onClose:a[0]||(a[0]=p=>n(C).message="")},null,8,["title"])])):g("",!0),a[6]||(a[6]=r("p",null," If the exception you're seeing is not clear and you think it might be a bug, please send us a report to help us debugging and fixing it in a future release. ",-1)),a[7]||(a[7]=r("br",null,null,-1)),a[8]||(a[8]=r("label",{class:"font-semibold"},"Exception:",-1)),r("pre",{class:"break-all lg:break-normal mt-2 text-sm whitespace-pre-line px-6 py-6 rounded-md bg-gray-50 dark:bg-gray-700 text-gray-700 dark:text-gray-300 dark:border-gray-800 border border-gray-200",innerHTML:d.content},null,8,pe),c(z,{state:n(i),class:"space-y-4 mt-4",onSubmit:j},{default:h(()=>[c(B,{label:"Description (optional):",name:"Description (optional):"},{default:h(()=>[c(J,{modelValue:n(i).description,"onUpdate:modelValue":a[1]||(a[1]=p=>n(i).description=p),rows:10,placeholder:"Describe how the exception occurred..."},null,8,["modelValue"])]),_:1}),n(L)?g("",!0):(e(),f(B,{key:0,label:"Email (must be registered with on Jesse.Trade)",help:"Enter your email address for us to know who sent the feedback and possibly reply back to you. It must be the email address of your account on Jesse.Trade",required:""},{default:h(()=>[c(N,{modelValue:n(i).email,"onUpdate:modelValue":a[2]||(a[2]=p=>n(i).email=p),placeholder:"Email address...",type:"email"},null,8,["modelValue"])]),_:1})),n(A)?(e(),f(P,{key:1,modelValue:n(i).attachLogs,"onUpdate:modelValue":a[3]||(a[3]=p=>n(i).attachLogs=p),title:"Attach Debugging Logs",help:"Attach the log file of this session along with this report which helps Jesse's team"},null,8,["modelValue"])):g("",!0),r("div",me,[c(S,{id:"feedback-cancel-button",color:"gray",variant:"link",class:"mr-8",label:"Cancel",onClick:a[4]||(a[4]=p=>m.value=!1)}),c(S,{id:"feedback-submit-button",type:"submit",class:"w-48 flex justify-center",label:"Submit",loading:n(w),disabled:!n(i).email.length&&!n(L)},null,8,["loading","disabled"])])]),_:1},8,["state"])]),_:1},8,["modelValue"]),c(G,{title:"Exception"},{default:h(()=>[r("button",{type:"button",class:"inline-flex items-center shadow-sm px-4 py-1.5 border border-gray-300 dark:border-gray-600 text-sm leading-5 font-medium rounded-l-full text-gray-700 dark:text-gray-100 bg-white dark:bg-backdrop-dark hover:bg-gray-50 dark:hover:bg-gray-800 focus:outline-none",onClick:R},[c(n(de),{class:"-ml-1.5 mr-1 h-5 w-5 text-gray-400","aria-hidden":"true"}),a[9]||(a[9]=r("span",null,"Report",-1))]),r("button",{type:"button",class:"inline-flex items-center shadow-sm px-4 py-1.5 border border-gray-300 dark:border-gray-600 text-sm leading-5 font-medium rounded-r-full text-gray-700 dark:text-gray-100 bg-white dark:bg-backdrop-dark hover:bg-gray-50 dark:hover:bg-gray-800 focus:outline-none",onClick:H},[n(o)?(e(),f(n(ae),{key:0,class:"-ml-1.5 mr-1 h-5 w-5 text-gray-400","aria-hidden":"true"})):(e(),f(n(ie),{key:1,class:"-ml-1.5 mr-1 h-5 w-5 text-gray-400","aria-hidden":"true"})),r("span",null,u(n(o)?"Copied":"Copy"),1)])]),_:1}),r("div",ge,[r("div",ye,[r("div",he,[c(n(ce),{class:"h-5 w-5 text-red-400","aria-hidden":"true"})]),r("div",_e,[r("h3",{class:"text-base font-medium text-red-800 mb-6",textContent:u(d.title)},null,8,fe),d.content?(e(),s("pre",{key:0,class:"mt-2 text-sm text-red-700 whitespace-pre-line px-6 py-6 rounded-md border-2 border-dashed border-red-200",innerHTML:d.content},null,8,ke)):g("",!0)])]),E(r("textarea",{id:"exception-info",value:d.content,class:"fixed left-0 bottom-0 opacity-0"},null,8,xe),[[D,n(M)]])])],64)}}}),be=["textContent"],ve=V({__name:"Tooltip",props:{title:{}},setup(d){const l=b(!1),m=()=>{l.value=!0},_=()=>{l.value=!1};return(t,i)=>(e(),s("span",{class:"relative underline",onMouseenter:m,onMouseleave:_},[E(r("span",{class:"absolute -top-10 z-90 bg-gray-900 rounded px-2 py-1 text-sm text-white",textContent:u(t.title)},null,8,be),[[D,n(l)]]),ne(t.$slots,"default")],32))}}),we={class:"flex flex-col select-none"},Ce={class:"-my-2 overflow-x-auto"},$e={class:"py-2 align-middle inline-block min-w-full"},Ve={class:"border dark:border-gray-600 overflow-hidden sm:rounded"},Me={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-600 hide-scroll overflow-x-scroll"},Le={key:0,class:"bg-gray-100 dark:bg-gray-800 select-none"},Te={key:1},Be=["textContent"],Se=["textContent"],Ue=["textContent"],Ee={key:1},De=["textContent"],Ae=["textContent"],je=["textContent"],He={key:0,class:"text-center text-xs dark:bg-gray-700 py-4 opacity-30 dark:opacity-75 select-none"},ze=V({__name:"MultipleValuesTable",props:{header:{type:Boolean},data:{},headerItems:{}},setup(d){return(l,m)=>{const _=ve;return e(),s("div",we,[r("div",Ce,[r("div",$e,[r("div",Ve,[r("table",Me,[l.header?(e(),s("thead",Le,[r("tr",null,[(e(!0),s(v,null,$(l.headerItems,t=>(e(),s("th",{key:t,scope:"col",class:"px-6 py-3 text-left text-xs font-bold text-gray-500 dark:text-gray-400"},u(t),1))),128))])])):g("",!0),l.data.length?(e(),s("tbody",Te,[(e(!0),s(v,null,$(l.data,(t,i)=>(e(),s("tr",{key:i,class:U(["text-gray-900 dark:text-gray-200",i%2===0?"bg-white dark:bg-backdrop-dark":"bg-gray-50 dark:bg-gray-700"])},[(e(!0),s(v,null,$(t,(M,o)=>(e(),s("td",{key:o,class:U(["px-6 py-4 whitespace-nowrap text-sm font-medium",t[o].style])},[t[o].tooltip?(e(),f(_,{key:0,title:t[o].tooltip},{default:h(()=>[t[o].tag==="code"?(e(),s("code",{key:0,class:"rounded border dark:border-gray-600 bg-gray-50 dark:bg-gray-700 select-text text-sm dark:text-gray-300 w-full px-4 sm:px-6 py-2",textContent:u(t[o].value===0?"":t[o].value)},null,8,Be)):t[o].tag==="pre"?(e(),s("pre",{key:1,class:"whitespace-pre-line rounded border dark:border-gray-600 bg-gray-50 dark:bg-gray-700 select-text text-sm dark:text-gray-300 w-full px-4 sm:px-6 py-2",textContent:u(t[o].value===0?"":t[o].value)},null,8,Se)):(e(),s("span",{key:2,textContent:u(t[o].value===0?"":t[o].value)},null,8,Ue))]),_:2},1032,["title"])):(e(),s("span",Ee,[t[o].tag==="code"?(e(),s("code",{key:0,class:"rounded border dark:border-gray-600 bg-gray-50 dark:bg-gray-700 select-text text-sm dark:text-gray-300 w-full px-4 sm:px-6 py-2",textContent:u(t[o].value===0?"":t[o].value)},null,8,De)):t[o].tag==="pre"?(e(),s("pre",{key:1,class:"whitespace-pre-line rounded border dark:border-gray-600 bg-gray-50 dark:bg-gray-700 select-text text-sm dark:text-gray-300 w-full px-4 sm:px-6 py-2",textContent:u(t[o].value===0?"":t[o].value)},null,8,Ae)):(e(),s("span",{key:2,textContent:u(t[o].value===0?"":t[o].value)},null,8,je))]))],2))),128))],2))),128))])):g("",!0)]),l.data.length?g("",!0):(e(),s("div",He," Empty List "))])])])])}}});export{ze as _,Pe as a,ie as r};
