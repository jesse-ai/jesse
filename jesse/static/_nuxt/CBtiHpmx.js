import{d as M,r as m,c as _,C,D as E,w as l,E as f,F as h,z as k,g as w,A as y,G as x}from"./BZBcjETW.js";const D=M({__name:"MonacoEditor.client",props:{lang:{default:()=>"plaintext"},options:{default:()=>({})},modelValue:{default:()=>""}},emits:["update:modelValue","load"],setup(V,{expose:g,emit:v}){const a=V,n=v,u=m(!0),d=_(()=>a.lang||a.options.language),c=C(),t=m(),s=E(),i={automaticLayout:!0};let e,o;return l(()=>a.modelValue,()=>{(e==null?void 0:e.getValue())!==a.modelValue&&(e==null||e.setValue(a.modelValue))}),l(()=>a.lang,()=>{o&&o.dispose(),o=s.editor.createModel(a.modelValue,d.value),e==null||e.setModel(o)}),l(()=>a.options,()=>{e==null||e.updateOptions(f(a.options,i))}),l(t,(p,r)=>{!t.value||r||(e=s.editor.create(t.value,f(a.options,i)),o=s.editor.createModel(a.modelValue,d.value),c.value=e,e.layout(),e.setModel(o),e.onDidChangeModelContent(()=>{n("update:modelValue",e.getValue())}),u.value=!1,n("load",e))}),g({$editor:c}),h(()=>{e==null||e.dispose(),o==null||o.dispose()}),(p,r)=>(w(),k("div",{ref_key:"editorElement",ref:t},[u.value?y(p.$slots,"default",{key:0}):x("",!0)],512))}});export{D as _};
