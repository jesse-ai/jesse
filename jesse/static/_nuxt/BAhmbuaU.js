import{c as m,W as ge,C as at,w as J,bx as ke,by as ot,bz as Re,o as Me,d as K,ay as ae,az as it,aB as R,H as ue,r as D,aH as X,aI as se,aM as z,bA as k,aQ as H,n as N,bB as ze,aX as Ee,aa as fe,bC as Be,bD as ye,bE as ut,aE as je,aF as te,bF as st,aJ as re,aN as Ne,bG as He,aU as qe,aP as We,bH as Ue,aK as Ke,bI as Ge,I as Ae,bi as j,a9 as rt,bJ as we,aA as Te,bK as dt,bL as Je,aL as Qe,bM as ct,aV as vt,aW as pt,y as ft,a_ as bt,e as Z,g as B,f as oe,z as W,G as Q,Z as V,bw as ce,A as _,j as ee,ab as Ie,i as he,ae as Xe,L as ve,a$ as ht,J as mt,ad as Ye,K as gt,q as $e,ac as Ze,af as Pe,ag as Ce,E as yt,b0 as Ot,ak as St,bN as xt,ah as It,ai as pe,aj as ne,U as Ct,bO as Rt,bP as wt,bQ as Mt,bh as Et,b1 as At,b2 as Tt}from"./BZBcjETW.js";function ie(e,c,a){let o=a.initialDeps??[],l;function i(){var t,n,f,v;let s;a.key&&((t=a.debug)!=null&&t.call(a))&&(s=Date.now());const u=e();if(!(u.length!==o.length||u.some((x,E)=>o[E]!==x)))return l;o=u;let w;if(a.key&&((n=a.debug)!=null&&n.call(a))&&(w=Date.now()),l=c(...u),a.key&&((f=a.debug)!=null&&f.call(a))){const x=Math.round((Date.now()-s)*100)/100,E=Math.round((Date.now()-w)*100)/100,F=E/16,A=(S,r)=>{for(S=String(S);S.length<r;)S=" "+S;return S};console.info(`%c⏱ ${A(E,5)} /${A(x,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*F,120))}deg 100% 31%);`,a==null?void 0:a.key)}return(v=a==null?void 0:a.onChange)==null||v.call(a,l),l}return i.updateDeps=t=>{o=t},i}function Ve(e,c){if(e===void 0)throw new Error("Unexpected undefined");return e}const kt=(e,c)=>Math.abs(e-c)<1.01,zt=(e,c,a)=>{let o;return function(...l){e.clearTimeout(o),o=e.setTimeout(()=>c.apply(this,l),a)}},De=e=>{const{offsetWidth:c,offsetHeight:a}=e;return{width:c,height:a}},$t=e=>e,Pt=e=>{const c=Math.max(e.startIndex-e.overscan,0),a=Math.min(e.endIndex+e.overscan,e.count-1),o=[];for(let l=c;l<=a;l++)o.push(l);return o},Vt=(e,c)=>{const a=e.scrollElement;if(!a)return;const o=e.targetWindow;if(!o)return;const l=t=>{const{width:n,height:f}=t;c({width:Math.round(n),height:Math.round(f)})};if(l(De(a)),!o.ResizeObserver)return()=>{};const i=new o.ResizeObserver(t=>{const n=()=>{const f=t[0];if(f!=null&&f.borderBoxSize){const v=f.borderBoxSize[0];if(v){l({width:v.inlineSize,height:v.blockSize});return}}l(De(a))};e.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(n):n()});return i.observe(a,{box:"border-box"}),()=>{i.unobserve(a)}},Fe={passive:!0},Le=typeof window>"u"?!0:"onscrollend"in window,Dt=(e,c)=>{const a=e.scrollElement;if(!a)return;const o=e.targetWindow;if(!o)return;let l=0;const i=e.options.useScrollendEvent&&Le?()=>{}:zt(o,()=>{c(l,!1)},e.options.isScrollingResetDelay),t=s=>()=>{const{horizontal:u,isRtl:p}=e.options;l=u?a.scrollLeft*(p&&-1||1):a.scrollTop,i(),c(l,s)},n=t(!0),f=t(!1);f(),a.addEventListener("scroll",n,Fe);const v=e.options.useScrollendEvent&&Le;return v&&a.addEventListener("scrollend",f,Fe),()=>{a.removeEventListener("scroll",n),v&&a.removeEventListener("scrollend",f)}},Ft=(e,c,a)=>{if(c!=null&&c.borderBoxSize){const o=c.borderBoxSize[0];if(o)return Math.round(o[a.options.horizontal?"inlineSize":"blockSize"])}return e[a.options.horizontal?"offsetWidth":"offsetHeight"]},Lt=(e,{adjustments:c=0,behavior:a},o)=>{var l,i;const t=e+c;(i=(l=o.scrollElement)==null?void 0:l.scrollTo)==null||i.call(l,{[o.options.horizontal?"left":"top"]:t,behavior:a})};class Bt{constructor(c){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let a=null;const o=()=>a||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:a=new this.targetWindow.ResizeObserver(l=>{l.forEach(i=>{const t=()=>{this._measureElement(i.target,i)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(t):t()})}));return{disconnect:()=>{var l;(l=o())==null||l.disconnect(),a=null},observe:l=>{var i;return(i=o())==null?void 0:i.observe(l,{box:"border-box"})},unobserve:l=>{var i;return(i=o())==null?void 0:i.unobserve(l)}}})(),this.range=null,this.setOptions=a=>{Object.entries(a).forEach(([o,l])=>{typeof l>"u"&&delete a[o]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:$t,rangeExtractor:Pt,onChange:()=>{},measureElement:Ft,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1,...a}},this.notify=a=>{var o,l;(l=(o=this.options).onChange)==null||l.call(o,this,a)},this.maybeNotify=ie(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),a=>{this.notify(a)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(a=>a()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var a;const o=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==o){if(this.cleanup(),!o){this.maybeNotify();return}this.scrollElement=o,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((a=this.scrollElement)==null?void 0:a.window)??null,this.elementsCache.forEach(l=>{this.observer.observe(l)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,l=>{this.scrollRect=l,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(l,i)=>{this.scrollAdjustments=0,this.scrollDirection=i?this.getScrollOffset()<l?"forward":"backward":null,this.scrollOffset=l,this.isScrolling=i,this.maybeNotify()}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(a,o)=>{const l=new Map,i=new Map;for(let t=o-1;t>=0;t--){const n=a[t];if(l.has(n.lane))continue;const f=i.get(n.lane);if(f==null||n.end>f.end?i.set(n.lane,n):n.end<f.end&&l.set(n.lane,!0),l.size===this.options.lanes)break}return i.size===this.options.lanes?Array.from(i.values()).sort((t,n)=>t.end===n.end?t.index-n.index:t.end-n.end)[0]:void 0},this.getMeasurementOptions=ie(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled],(a,o,l,i,t)=>(this.pendingMeasuredCacheIndexes=[],{count:a,paddingStart:o,scrollMargin:l,getItemKey:i,enabled:t}),{key:!1}),this.getMeasurements=ie(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:a,paddingStart:o,scrollMargin:l,getItemKey:i,enabled:t},n)=>{if(!t)return this.measurementsCache=[],this.itemSizeCache.clear(),[];this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(s=>{this.itemSizeCache.set(s.key,s.size)}));const f=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];const v=this.measurementsCache.slice(0,f);for(let s=f;s<a;s++){const u=i(s),p=this.options.lanes===1?v[s-1]:this.getFurthestMeasurement(v,s),w=p?p.end+this.options.gap:o+l,x=n.get(u),E=typeof x=="number"?x:this.options.estimateSize(s),F=w+E,A=p?p.lane:s%this.options.lanes;v[s]={index:s,start:w,size:E,end:F,key:u,lane:A}}return this.measurementsCache=v,v},{key:!1,debug:()=>this.options.debug}),this.calculateRange=ie(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(a,o,l,i)=>this.range=a.length>0&&o>0?jt({measurements:a,outerSize:o,scrollOffset:l,lanes:i}):null,{key:!1,debug:()=>this.options.debug}),this.getVirtualIndexes=ie(()=>{let a=null,o=null;const l=this.calculateRange();return l&&(a=l.startIndex,o=l.endIndex),this.maybeNotify.updateDeps([this.isScrolling,a,o]),[this.options.rangeExtractor,this.options.overscan,this.options.count,a,o]},(a,o,l,i,t)=>i===null||t===null?[]:a({startIndex:i,endIndex:t,overscan:o,count:l}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=a=>{const o=this.options.indexAttribute,l=a.getAttribute(o);return l?parseInt(l,10):(console.warn(`Missing attribute name '${o}={index}' on measured element.`),-1)},this._measureElement=(a,o)=>{const l=this.indexFromElement(a),i=this.measurementsCache[l];if(!i)return;const t=i.key,n=this.elementsCache.get(t);n!==a&&(n&&this.observer.unobserve(n),this.observer.observe(a),this.elementsCache.set(t,a)),a.isConnected&&this.resizeItem(l,this.options.measureElement(a,o,this))},this.resizeItem=(a,o)=>{const l=this.measurementsCache[a];if(!l)return;const i=this.itemSizeCache.get(l.key)??l.size,t=o-i;t!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(l,t,this):l.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=t,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(l.index),this.itemSizeCache=new Map(this.itemSizeCache.set(l.key,o)),this.notify(!1))},this.measureElement=a=>{if(!a){this.elementsCache.forEach((o,l)=>{o.isConnected||(this.observer.unobserve(o),this.elementsCache.delete(l))});return}this._measureElement(a,void 0)},this.getVirtualItems=ie(()=>[this.getVirtualIndexes(),this.getMeasurements()],(a,o)=>{const l=[];for(let i=0,t=a.length;i<t;i++){const n=a[i],f=o[n];l.push(f)}return l},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=a=>{const o=this.getMeasurements();if(o.length!==0)return Ve(o[_e(0,o.length-1,l=>Ve(o[l]).start,a)])},this.getOffsetForAlignment=(a,o,l=0)=>{const i=this.getSize(),t=this.getScrollOffset();o==="auto"&&(o=a>=t+i?"end":"start"),o==="center"?a+=(l-i)/2:o==="end"&&(a-=i);const n=this.getTotalSize()+this.options.scrollMargin-i;return Math.max(Math.min(n,a),0)},this.getOffsetForIndex=(a,o="auto")=>{a=Math.max(0,Math.min(a,this.options.count-1));const l=this.measurementsCache[a];if(!l)return;const i=this.getSize(),t=this.getScrollOffset();if(o==="auto")if(l.end>=t+i-this.options.scrollPaddingEnd)o="end";else if(l.start<=t+this.options.scrollPaddingStart)o="start";else return[t,o];const n=o==="end"?l.end+this.options.scrollPaddingEnd:l.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(n,o,l.size),o]},this.isDynamicMode=()=>this.elementsCache.size>0,this.scrollToOffset=(a,{align:o="start",behavior:l}={})=>{l==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(a,o),{adjustments:void 0,behavior:l})},this.scrollToIndex=(a,{align:o="auto",behavior:l}={})=>{l==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),a=Math.max(0,Math.min(a,this.options.count-1));let i=0;const t=10,n=v=>{if(!this.targetWindow)return;const s=this.getOffsetForIndex(a,v);if(!s){console.warn("Failed to get offset for index:",a);return}const[u,p]=s;this._scrollToOffset(u,{adjustments:void 0,behavior:l}),this.targetWindow.requestAnimationFrame(()=>{const w=this.getScrollOffset(),x=this.getOffsetForIndex(a,p);if(!x){console.warn("Failed to get offset for index:",a);return}kt(x[0],w)||f(p)})},f=v=>{this.targetWindow&&(i++,i<t?this.targetWindow.requestAnimationFrame(()=>n(v)):console.warn(`Failed to scroll to index ${a} after ${t} attempts.`))};n(o)},this.scrollBy=(a,{behavior:o}={})=>{o==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+a,{adjustments:void 0,behavior:o})},this.getTotalSize=()=>{var a;const o=this.getMeasurements();let l;if(o.length===0)l=this.options.paddingStart;else if(this.options.lanes===1)l=((a=o[o.length-1])==null?void 0:a.end)??0;else{const i=Array(this.options.lanes).fill(null);let t=o.length-1;for(;t>=0&&i.some(n=>n===null);){const n=o[t];i[n.lane]===null&&(i[n.lane]=n.end),t--}l=Math.max(...i.filter(n=>n!==null))}return Math.max(l-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(a,{adjustments:o,behavior:l})=>{this.options.scrollToFn(a,{behavior:l,adjustments:o},this)},this.measure=()=>{this.itemSizeCache=new Map,this.notify(!1)},this.setOptions(c)}}const _e=(e,c,a,o)=>{for(;e<=c;){const l=(e+c)/2|0,i=a(l);if(i<o)e=l+1;else if(i>o)c=l-1;else return l}return e>0?e-1:0};function jt({measurements:e,outerSize:c,scrollOffset:a,lanes:o}){const l=e.length-1,i=f=>e[f].start;if(e.length<=o)return{startIndex:0,endIndex:l};let t=_e(0,l,i,a),n=t;if(o===1)for(;n<l&&e[n].end<a+c;)n++;else if(o>1){const f=Array(o).fill(0);for(;n<l&&f.some(s=>s<a+c);){const s=e[n];f[s.lane]=s.end,n++}const v=Array(o).fill(a+c);for(;t>=0&&v.some(s=>s>=a);){const s=e[t];v[s.lane]=s.start,t--}t=Math.max(0,t-t%o),n=Math.min(l,n+(o-1-n%o))}return{startIndex:t,endIndex:n}}function Nt(e){const c=new Bt(ge(e)),a=at(c),o=c._didMount();return J(()=>ge(e).getScrollElement(),l=>{l&&c._willUpdate()},{immediate:!0}),J(()=>ge(e),l=>{c.setOptions({...l,onChange:(i,t)=>{var n;ke(a),(n=l.onChange)==null||n.call(l,i,t)}}),c._willUpdate(),ke(a)},{immediate:!0}),ot(o),a}function Ht(e){return Nt(m(()=>({observeElementRect:Vt,observeElementOffset:Dt,scrollToFn:Lt,...ge(e)})))}function qt(){let e=Re();return Me(()=>e.dispose()),e}function Wt(){let e=qt();return c=>{e.dispose(),e.nextFrame(c)}}var et=(e=>(e[e.Left=0]="Left",e[e.Right=2]="Right",e))(et||{}),Ut={};function Kt(e,c){return e===c}var Gt=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Gt||{}),Jt=(e=>(e[e.Single=0]="Single",e[e.Multi=1]="Multi",e))(Jt||{}),Qt=(e=>(e[e.Pointer=0]="Pointer",e[e.Focus=1]="Focus",e[e.Other=2]="Other",e))(Qt||{});let tt=Symbol("ComboboxContext");function de(e){let c=Ee(tt,null);if(c===null){let a=new Error(`<${e} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(a,de),a}return c}let lt=Symbol("VirtualContext"),Xt=K({name:"VirtualProvider",setup(e,{slots:c}){let a=de("VirtualProvider"),o=m(()=>{let n=R(a.optionsRef);if(!n)return{start:0,end:0};let f=window.getComputedStyle(n);return{start:parseFloat(f.paddingBlockStart||f.paddingTop),end:parseFloat(f.paddingBlockEnd||f.paddingBottom)}}),l=Ht(m(()=>({scrollPaddingStart:o.value.start,scrollPaddingEnd:o.value.end,count:a.virtual.value.options.length,estimateSize(){return 40},getScrollElement(){return R(a.optionsRef)},overscan:12}))),i=m(()=>{var n;return(n=a.virtual.value)==null?void 0:n.options}),t=D(0);return J([i],()=>{t.value+=1}),Te(lt,a.virtual.value?l:null),()=>[re("div",{style:{position:"relative",width:"100%",height:`${l.value.getTotalSize()}px`},ref:n=>{if(n){if(typeof process<"u"&&Ut.JEST_WORKER_ID!==void 0||a.activationTrigger.value===0)return;a.activeOptionIndex.value!==null&&a.virtual.value.options.length>a.activeOptionIndex.value&&l.value.scrollToIndex(a.activeOptionIndex.value)}}},l.value.getVirtualItems().map(n=>dt(c.default({option:a.virtual.value.options[n.index],open:a.comboboxState.value===0})[0],{key:`${t.value}-${n.index}`,"data-index":n.index,"aria-setsize":a.virtual.value.options.length,"aria-posinset":n.index+1,style:{position:"absolute",top:0,left:0,transform:`translateY(${n.start}px)`,overflowAnchor:"none"}})))]}}),Yt=K({name:"Combobox",emits:{"update:modelValue":e=>!0},props:{as:{type:[Object,String],default:"template"},disabled:{type:[Boolean],default:!1},by:{type:[String,Function],nullable:!0,default:null},modelValue:{type:[Object,String,Number,Boolean],default:void 0},defaultValue:{type:[Object,String,Number,Boolean],default:void 0},form:{type:String,optional:!0},name:{type:String,optional:!0},nullable:{type:Boolean,default:!1},multiple:{type:[Boolean],default:!1},immediate:{type:[Boolean],default:!1},virtual:{type:Object,default:null}},inheritAttrs:!1,setup(e,{slots:c,attrs:a,emit:o}){let l=D(1),i=D(null),t=D(null),n=D(null),f=D(null),v=D({static:!1,hold:!1}),s=D([]),u=D(null),p=D(2),w=D(!1);function x(h=g=>g){let g=u.value!==null?s.value[u.value]:null,C=h(s.value.slice()),M=C.length>0&&C[0].dataRef.order.value!==null?C.sort((P,q)=>P.dataRef.order.value-q.dataRef.order.value):Je(C,P=>R(P.dataRef.domRef)),$=g?M.indexOf(g):null;return $===-1&&($=null),{options:M,activeOptionIndex:$}}let E=m(()=>e.multiple?1:0),F=m(()=>e.nullable),[A,S]=He(m(()=>e.modelValue),h=>o("update:modelValue",h),m(()=>e.defaultValue)),r=m(()=>A.value===void 0?H(E.value,{1:[],0:void 0}):A.value),O=null,d=null;function y(h){return H(E.value,{0(){return S==null?void 0:S(h)},1:()=>{let g=j(b.value.value).slice(),C=j(h),M=g.findIndex($=>b.compare(C,j($)));return M===-1?g.push(C):g.splice(M,1),S==null?void 0:S(g)}})}let I=m(()=>{});J([I],([h],[g])=>{if(b.virtual.value&&h&&g&&u.value!==null){let C=h.indexOf(g[u.value]);C!==-1?u.value=C:u.value=null}});let b={comboboxState:l,value:r,mode:E,compare(h,g){if(typeof e.by=="string"){let C=e.by;return(h==null?void 0:h[C])===(g==null?void 0:g[C])}return e.by===null?Kt(h,g):e.by(h,g)},calculateIndex(h){return b.virtual.value?e.by===null?b.virtual.value.options.indexOf(h):b.virtual.value.options.findIndex(g=>b.compare(g,h)):s.value.findIndex(g=>b.compare(g.dataRef.value,h))},defaultValue:m(()=>e.defaultValue),nullable:F,immediate:m(()=>!1),virtual:m(()=>null),inputRef:t,labelRef:i,buttonRef:n,optionsRef:f,disabled:m(()=>e.disabled),options:s,change(h){S(h)},activeOptionIndex:m(()=>{if(w.value&&u.value===null&&(b.virtual.value?b.virtual.value.options.length>0:s.value.length>0)){if(b.virtual.value){let g=b.virtual.value.options.findIndex(C=>{var M;return!((M=b.virtual.value)!=null&&M.disabled(C))});if(g!==-1)return g}let h=s.value.findIndex(g=>!g.dataRef.disabled);if(h!==-1)return h}return u.value}),activationTrigger:p,optionsPropsRef:v,closeCombobox(){w.value=!1,!e.disabled&&l.value!==1&&(l.value=1,u.value=null)},openCombobox(){if(w.value=!0,!e.disabled&&l.value!==0){if(b.value.value){let h=b.calculateIndex(b.value.value);h!==-1&&(u.value=h)}l.value=0}},setActivationTrigger(h){p.value=h},goToOption(h,g,C){w.value=!1,O!==null&&cancelAnimationFrame(O),O=requestAnimationFrame(()=>{if(e.disabled||f.value&&!v.value.static&&l.value===1)return;if(b.virtual.value){u.value=h===k.Specific?g:we({focus:h},{resolveItems:()=>b.virtual.value.options,resolveActiveIndex:()=>{var P,q;return(q=(P=b.activeOptionIndex.value)!=null?P:b.virtual.value.options.findIndex(Y=>{var le;return!((le=b.virtual.value)!=null&&le.disabled(Y))}))!=null?q:null},resolveDisabled:P=>b.virtual.value.disabled(P),resolveId(){throw new Error("Function not implemented.")}}),p.value=C??2;return}let M=x();if(M.activeOptionIndex===null){let P=M.options.findIndex(q=>!q.dataRef.disabled);P!==-1&&(M.activeOptionIndex=P)}let $=h===k.Specific?g:we({focus:h},{resolveItems:()=>M.options,resolveActiveIndex:()=>M.activeOptionIndex,resolveId:P=>P.id,resolveDisabled:P=>P.dataRef.disabled});u.value=$,p.value=C??2,s.value=M.options})},selectOption(h){let g=s.value.find(M=>M.id===h);if(!g)return;let{dataRef:C}=g;y(C.value)},selectActiveOption(){if(b.activeOptionIndex.value!==null){if(b.virtual.value)y(b.virtual.value.options[b.activeOptionIndex.value]);else{let{dataRef:h}=s.value[b.activeOptionIndex.value];y(h.value)}b.goToOption(k.Specific,b.activeOptionIndex.value)}},registerOption(h,g){let C=rt({id:h,dataRef:g});if(b.virtual.value){s.value.push(C);return}d&&cancelAnimationFrame(d);let M=x($=>($.push(C),$));u.value===null&&b.isSelected(g.value.value)&&(M.activeOptionIndex=M.options.indexOf(C)),s.value=M.options,u.value=M.activeOptionIndex,p.value=2,M.options.some($=>!R($.dataRef.domRef))&&(d=requestAnimationFrame(()=>{let $=x();s.value=$.options,u.value=$.activeOptionIndex}))},unregisterOption(h,g){if(O!==null&&cancelAnimationFrame(O),g&&(w.value=!0),b.virtual.value){s.value=s.value.filter(M=>M.id!==h);return}let C=x(M=>{let $=M.findIndex(P=>P.id===h);return $!==-1&&M.splice($,1),M});s.value=C.options,u.value=C.activeOptionIndex,p.value=2},isSelected(h){return H(E.value,{0:()=>b.compare(j(b.value.value),j(h)),1:()=>j(b.value.value).some(g=>b.compare(j(g),j(h)))})},isActive(h){return u.value===b.calculateIndex(h)}};qe([t,n,f],()=>b.closeCombobox(),m(()=>l.value===0)),Te(tt,b),We(m(()=>H(l.value,{0:te.Open,1:te.Closed})));let T=m(()=>{var h;return(h=R(t))==null?void 0:h.closest("form")});return ue(()=>{J([T],()=>{if(!T.value||e.defaultValue===void 0)return;function h(){b.change(e.defaultValue)}return T.value.addEventListener("reset",h),()=>{var g;(g=T.value)==null||g.removeEventListener("reset",h)}},{immediate:!0})}),()=>{var h,g,C;let{name:M,disabled:$,form:P,...q}=e,Y={open:l.value===0,disabled:$,activeIndex:b.activeOptionIndex.value,activeOption:b.activeOptionIndex.value===null?null:b.virtual.value?b.virtual.value.options[(h=b.activeOptionIndex.value)!=null?h:0]:(C=(g=b.options.value[b.activeOptionIndex.value])==null?void 0:g.dataRef.value)!=null?C:null,value:r.value};return re(Ae,[...M!=null&&r.value!=null?Ue({[M]:r.value}).map(([le,Se])=>re(Ke,Ge({features:Qe.Hidden,key:le,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:P,disabled:$,name:le,value:Se}))):[],X({theirProps:{...a,...ye(q,["by","defaultValue","immediate","modelValue","multiple","nullable","onUpdate:modelValue","virtual"])},ourProps:{},slot:Y,slots:c,attrs:a,name:"Combobox"})])}}}),Zt=K({name:"ComboboxButton",props:{as:{type:[Object,String],default:"button"},id:{type:String,default:null}},setup(e,{attrs:c,slots:a,expose:o}){var l;let i=(l=e.id)!=null?l:`headlessui-combobox-button-${ae()}`,t=de("ComboboxButton");o({el:t.buttonRef,$el:t.buttonRef});function n(s){t.disabled.value||(t.comboboxState.value===0?t.closeCombobox():(s.preventDefault(),t.openCombobox()),N(()=>{var u;return(u=R(t.inputRef))==null?void 0:u.focus({preventScroll:!0})}))}function f(s){switch(s.key){case z.ArrowDown:s.preventDefault(),s.stopPropagation(),t.comboboxState.value===1&&t.openCombobox(),N(()=>{var u;return(u=t.inputRef.value)==null?void 0:u.focus({preventScroll:!0})});return;case z.ArrowUp:s.preventDefault(),s.stopPropagation(),t.comboboxState.value===1&&(t.openCombobox(),N(()=>{t.value.value||t.goToOption(k.Last)})),N(()=>{var u;return(u=t.inputRef.value)==null?void 0:u.focus({preventScroll:!0})});return;case z.Escape:if(t.comboboxState.value!==0)return;s.preventDefault(),t.optionsRef.value&&!t.optionsPropsRef.value.static&&s.stopPropagation(),t.closeCombobox(),N(()=>{var u;return(u=t.inputRef.value)==null?void 0:u.focus({preventScroll:!0})});return}}let v=Ne(m(()=>({as:e.as,type:c.type})),t.buttonRef);return()=>{var s,u;let p={open:t.comboboxState.value===0,disabled:t.disabled.value,value:t.value.value},{...w}=e,x={ref:t.buttonRef,id:i,type:v.value,tabindex:"-1","aria-haspopup":"listbox","aria-controls":(s=R(t.optionsRef))==null?void 0:s.id,"aria-expanded":t.comboboxState.value===0,"aria-labelledby":t.labelRef.value?[(u=R(t.labelRef))==null?void 0:u.id,i].join(" "):void 0,disabled:t.disabled.value===!0?!0:void 0,onKeydown:f,onClick:n};return X({ourProps:x,theirProps:w,slot:p,attrs:c,slots:a,name:"ComboboxButton"})}}}),_t=K({name:"ComboboxInput",props:{as:{type:[Object,String],default:"input"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},displayValue:{type:Function},defaultValue:{type:String,default:void 0},id:{type:String,default:null}},emits:{change:e=>!0},setup(e,{emit:c,attrs:a,slots:o,expose:l}){var i;let t=(i=e.id)!=null?i:`headlessui-combobox-input-${ae()}`,n=de("ComboboxInput"),f=m(()=>it(R(n.inputRef))),v={value:!1};l({el:n.inputRef,$el:n.inputRef});function s(){n.change(null);let d=R(n.optionsRef);d&&(d.scrollTop=0),n.goToOption(k.Nothing)}let u=m(()=>{var d;let y=n.value.value;return R(n.inputRef)?typeof e.displayValue<"u"&&y!==void 0?(d=e.displayValue(y))!=null?d:"":typeof y=="string"?y:"":""});ue(()=>{J([u,n.comboboxState,f],([d,y],[I,b])=>{if(v.value)return;let T=R(n.inputRef);T&&((b===0&&y===1||d!==I)&&(T.value=d),requestAnimationFrame(()=>{var h;if(v.value||!T||((h=f.value)==null?void 0:h.activeElement)!==T)return;let{selectionStart:g,selectionEnd:C}=T;Math.abs((C??0)-(g??0))===0&&g===0&&T.setSelectionRange(T.value.length,T.value.length)}))},{immediate:!0}),J([n.comboboxState],([d],[y])=>{if(d===0&&y===1){if(v.value)return;let I=R(n.inputRef);if(!I)return;let b=I.value,{selectionStart:T,selectionEnd:h,selectionDirection:g}=I;I.value="",I.value=b,g!==null?I.setSelectionRange(T,h,g):I.setSelectionRange(T,h)}})});let p=D(!1);function w(){p.value=!0}function x(){Re().nextFrame(()=>{p.value=!1})}let E=Wt();function F(d){switch(v.value=!0,E(()=>{v.value=!1}),d.key){case z.Enter:if(v.value=!1,n.comboboxState.value!==0||p.value)return;if(d.preventDefault(),d.stopPropagation(),n.activeOptionIndex.value===null){n.closeCombobox();return}n.selectActiveOption(),n.mode.value===0&&n.closeCombobox();break;case z.ArrowDown:return v.value=!1,d.preventDefault(),d.stopPropagation(),H(n.comboboxState.value,{0:()=>n.goToOption(k.Next),1:()=>n.openCombobox()});case z.ArrowUp:return v.value=!1,d.preventDefault(),d.stopPropagation(),H(n.comboboxState.value,{0:()=>n.goToOption(k.Previous),1:()=>{n.openCombobox(),N(()=>{n.value.value||n.goToOption(k.Last)})}});case z.Home:if(d.shiftKey)break;return v.value=!1,d.preventDefault(),d.stopPropagation(),n.goToOption(k.First);case z.PageUp:return v.value=!1,d.preventDefault(),d.stopPropagation(),n.goToOption(k.First);case z.End:if(d.shiftKey)break;return v.value=!1,d.preventDefault(),d.stopPropagation(),n.goToOption(k.Last);case z.PageDown:return v.value=!1,d.preventDefault(),d.stopPropagation(),n.goToOption(k.Last);case z.Escape:if(v.value=!1,n.comboboxState.value!==0)return;d.preventDefault(),n.optionsRef.value&&!n.optionsPropsRef.value.static&&d.stopPropagation(),n.nullable.value&&n.mode.value===0&&n.value.value===null&&s(),n.closeCombobox();break;case z.Tab:if(v.value=!1,n.comboboxState.value!==0)return;n.mode.value===0&&n.activationTrigger.value!==1&&n.selectActiveOption(),n.closeCombobox();break}}function A(d){c("change",d),n.nullable.value&&n.mode.value===0&&d.target.value===""&&s(),n.openCombobox()}function S(d){var y,I,b;let T=(y=d.relatedTarget)!=null?y:ze.find(h=>h!==d.currentTarget);if(v.value=!1,!((I=R(n.optionsRef))!=null&&I.contains(T))&&!((b=R(n.buttonRef))!=null&&b.contains(T))&&n.comboboxState.value===0)return d.preventDefault(),n.mode.value===0&&(n.nullable.value&&n.value.value===null?s():n.activationTrigger.value!==1&&n.selectActiveOption()),n.closeCombobox()}function r(d){var y,I,b;let T=(y=d.relatedTarget)!=null?y:ze.find(h=>h!==d.currentTarget);(I=R(n.buttonRef))!=null&&I.contains(T)||(b=R(n.optionsRef))!=null&&b.contains(T)||n.disabled.value||n.immediate.value&&n.comboboxState.value!==0&&(n.openCombobox(),Re().nextFrame(()=>{n.setActivationTrigger(1)}))}let O=m(()=>{var d,y,I,b;return(b=(I=(y=e.defaultValue)!=null?y:n.defaultValue.value!==void 0?(d=e.displayValue)==null?void 0:d.call(e,n.defaultValue.value):null)!=null?I:n.defaultValue.value)!=null?b:""});return()=>{var d,y,I,b,T,h,g;let C={open:n.comboboxState.value===0},{displayValue:M,onChange:$,...P}=e,q={"aria-controls":(d=n.optionsRef.value)==null?void 0:d.id,"aria-expanded":n.comboboxState.value===0,"aria-activedescendant":n.activeOptionIndex.value===null?void 0:n.virtual.value?(y=n.options.value.find(Y=>!n.virtual.value.disabled(Y.dataRef.value)&&n.compare(Y.dataRef.value,n.virtual.value.options[n.activeOptionIndex.value])))==null?void 0:y.id:(I=n.options.value[n.activeOptionIndex.value])==null?void 0:I.id,"aria-labelledby":(h=(b=R(n.labelRef))==null?void 0:b.id)!=null?h:(T=R(n.buttonRef))==null?void 0:T.id,"aria-autocomplete":"list",id:t,onCompositionstart:w,onCompositionend:x,onKeydown:F,onInput:A,onFocus:r,onBlur:S,role:"combobox",type:(g=a.type)!=null?g:"text",tabIndex:0,ref:n.inputRef,defaultValue:O.value,disabled:n.disabled.value===!0?!0:void 0};return X({ourProps:q,theirProps:P,slot:C,attrs:a,slots:o,features:se.RenderStrategy|se.Static,name:"ComboboxInput"})}}}),el=K({name:"ComboboxOptions",props:{as:{type:[Object,String],default:"ul"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},hold:{type:[Boolean],default:!1}},setup(e,{attrs:c,slots:a,expose:o}){let l=de("ComboboxOptions"),i=`headlessui-combobox-options-${ae()}`;o({el:l.optionsRef,$el:l.optionsRef}),fe(()=>{l.optionsPropsRef.value.static=e.static}),fe(()=>{l.optionsPropsRef.value.hold=e.hold});let t=je(),n=m(()=>t!==null?(t.value&te.Open)===te.Open:l.comboboxState.value===0);st({container:m(()=>R(l.optionsRef)),enabled:m(()=>l.comboboxState.value===0),accept(v){return v.getAttribute("role")==="option"?NodeFilter.FILTER_REJECT:v.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(v){v.setAttribute("role","none")}});function f(v){v.preventDefault()}return()=>{var v,s,u;let p={open:l.comboboxState.value===0},w={"aria-labelledby":(u=(v=R(l.labelRef))==null?void 0:v.id)!=null?u:(s=R(l.buttonRef))==null?void 0:s.id,id:i,ref:l.optionsRef,role:"listbox","aria-multiselectable":l.mode.value===1?!0:void 0,onMousedown:f},x=ye(e,["hold"]);return X({ourProps:w,theirProps:x,slot:p,attrs:c,slots:l.virtual.value&&l.comboboxState.value===0?{...a,default:()=>[re(Xt,{},a.default)]}:a,features:se.RenderStrategy|se.Static,visible:n.value,name:"ComboboxOptions"})}}}),tl=K({name:"ComboboxOption",props:{as:{type:[Object,String],default:"li"},value:{type:[Object,String,Number,Boolean]},disabled:{type:Boolean,default:!1},order:{type:[Number],default:null}},setup(e,{slots:c,attrs:a,expose:o}){let l=de("ComboboxOption"),i=`headlessui-combobox-option-${ae()}`,t=D(null),n=m(()=>e.disabled);o({el:t,$el:t});let f=m(()=>{var S;return l.virtual.value?l.activeOptionIndex.value===l.calculateIndex(e.value):l.activeOptionIndex.value===null?!1:((S=l.options.value[l.activeOptionIndex.value])==null?void 0:S.id)===i}),v=m(()=>l.isSelected(e.value)),s=Ee(lt,null),u=m(()=>({disabled:e.disabled,value:e.value,domRef:t,order:m(()=>e.order)}));ue(()=>l.registerOption(i,u)),Me(()=>l.unregisterOption(i,f.value)),fe(()=>{let S=R(t);S&&(s==null||s.value.measureElement(S))}),fe(()=>{l.comboboxState.value===0&&f.value&&(l.virtual.value||l.activationTrigger.value!==0&&N(()=>{var S,r;return(r=(S=R(t))==null?void 0:S.scrollIntoView)==null?void 0:r.call(S,{block:"nearest"})}))});function p(S){S.preventDefault(),S.button===et.Left&&(n.value||(l.selectOption(i),ut()||requestAnimationFrame(()=>{var r;return(r=R(l.inputRef))==null?void 0:r.focus({preventScroll:!0})}),l.mode.value===0&&l.closeCombobox()))}function w(){var S;if(e.disabled||(S=l.virtual.value)!=null&&S.disabled(e.value))return l.goToOption(k.Nothing);let r=l.calculateIndex(e.value);l.goToOption(k.Specific,r)}let x=Be();function E(S){x.update(S)}function F(S){var r;if(!x.wasMoved(S)||e.disabled||(r=l.virtual.value)!=null&&r.disabled(e.value)||f.value)return;let O=l.calculateIndex(e.value);l.goToOption(k.Specific,O,0)}function A(S){var r;x.wasMoved(S)&&(e.disabled||(r=l.virtual.value)!=null&&r.disabled(e.value)||f.value&&(l.optionsPropsRef.value.hold||l.goToOption(k.Nothing)))}return()=>{let{disabled:S}=e,r={active:f.value,selected:v.value,disabled:S},O={id:i,ref:t,role:"option",tabIndex:S===!0?void 0:-1,"aria-disabled":S===!0?!0:void 0,"aria-selected":v.value,disabled:void 0,onMousedown:p,onFocus:w,onPointerenter:E,onMouseenter:E,onPointermove:F,onMousemove:F,onPointerleave:A,onMouseleave:A},d=ye(e,["order","value"]);return X({ourProps:O,theirProps:d,slot:r,attrs:a,slots:c,name:"ComboboxOption"})}}});function ll(e,c){return e===c}var nl=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(nl||{}),al=(e=>(e[e.Single=0]="Single",e[e.Multi=1]="Multi",e))(al||{}),ol=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(ol||{});function il(e){requestAnimationFrame(()=>requestAnimationFrame(e))}let nt=Symbol("ListboxContext");function Oe(e){let c=Ee(nt,null);if(c===null){let a=new Error(`<${e} /> is missing a parent <Listbox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(a,Oe),a}return c}let ul=K({name:"Listbox",emits:{"update:modelValue":e=>!0},props:{as:{type:[Object,String],default:"template"},disabled:{type:[Boolean],default:!1},by:{type:[String,Function],default:()=>ll},horizontal:{type:[Boolean],default:!1},modelValue:{type:[Object,String,Number,Boolean],default:void 0},defaultValue:{type:[Object,String,Number,Boolean],default:void 0},form:{type:String,optional:!0},name:{type:String,optional:!0},multiple:{type:[Boolean],default:!1}},inheritAttrs:!1,setup(e,{slots:c,attrs:a,emit:o}){let l=D(1),i=D(null),t=D(null),n=D(null),f=D([]),v=D(""),s=D(null),u=D(1);function p(r=O=>O){let O=s.value!==null?f.value[s.value]:null,d=Je(r(f.value.slice()),I=>R(I.dataRef.domRef)),y=O?d.indexOf(O):null;return y===-1&&(y=null),{options:d,activeOptionIndex:y}}let w=m(()=>e.multiple?1:0),[x,E]=He(m(()=>e.modelValue),r=>o("update:modelValue",r),m(()=>e.defaultValue)),F=m(()=>x.value===void 0?H(w.value,{1:[],0:void 0}):x.value),A={listboxState:l,value:F,mode:w,compare(r,O){if(typeof e.by=="string"){let d=e.by;return(r==null?void 0:r[d])===(O==null?void 0:O[d])}return e.by(r,O)},orientation:m(()=>e.horizontal?"horizontal":"vertical"),labelRef:i,buttonRef:t,optionsRef:n,disabled:m(()=>e.disabled),options:f,searchQuery:v,activeOptionIndex:s,activationTrigger:u,closeListbox(){e.disabled||l.value!==1&&(l.value=1,s.value=null)},openListbox(){e.disabled||l.value!==0&&(l.value=0)},goToOption(r,O,d){if(e.disabled||l.value===1)return;let y=p(),I=we(r===k.Specific?{focus:k.Specific,id:O}:{focus:r},{resolveItems:()=>y.options,resolveActiveIndex:()=>y.activeOptionIndex,resolveId:b=>b.id,resolveDisabled:b=>b.dataRef.disabled});v.value="",s.value=I,u.value=d??1,f.value=y.options},search(r){if(e.disabled||l.value===1)return;let O=v.value!==""?0:1;v.value+=r.toLowerCase();let d=(s.value!==null?f.value.slice(s.value+O).concat(f.value.slice(0,s.value+O)):f.value).find(I=>I.dataRef.textValue.startsWith(v.value)&&!I.dataRef.disabled),y=d?f.value.indexOf(d):-1;y===-1||y===s.value||(s.value=y,u.value=1)},clearSearch(){e.disabled||l.value!==1&&v.value!==""&&(v.value="")},registerOption(r,O){let d=p(y=>[...y,{id:r,dataRef:O}]);f.value=d.options,s.value=d.activeOptionIndex},unregisterOption(r){let O=p(d=>{let y=d.findIndex(I=>I.id===r);return y!==-1&&d.splice(y,1),d});f.value=O.options,s.value=O.activeOptionIndex,u.value=1},theirOnChange(r){e.disabled||E(r)},select(r){e.disabled||E(H(w.value,{0:()=>r,1:()=>{let O=j(A.value.value).slice(),d=j(r),y=O.findIndex(I=>A.compare(d,j(I)));return y===-1?O.push(d):O.splice(y,1),O}}))}};qe([t,n],(r,O)=>{var d;A.closeListbox(),vt(O,pt.Loose)||(r.preventDefault(),(d=R(t))==null||d.focus())},m(()=>l.value===0)),Te(nt,A),We(m(()=>H(l.value,{0:te.Open,1:te.Closed})));let S=m(()=>{var r;return(r=R(t))==null?void 0:r.closest("form")});return ue(()=>{J([S],()=>{if(!S.value||e.defaultValue===void 0)return;function r(){A.theirOnChange(e.defaultValue)}return S.value.addEventListener("reset",r),()=>{var O;(O=S.value)==null||O.removeEventListener("reset",r)}},{immediate:!0})}),()=>{let{name:r,modelValue:O,disabled:d,form:y,...I}=e,b={open:l.value===0,disabled:d,value:F.value};return re(Ae,[...r!=null&&F.value!=null?Ue({[r]:F.value}).map(([T,h])=>re(Ke,Ge({features:Qe.Hidden,key:T,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:y,disabled:d,name:T,value:h}))):[],X({ourProps:{},theirProps:{...a,...ye(I,["defaultValue","onUpdate:modelValue","horizontal","multiple","by"])},slot:b,slots:c,attrs:a,name:"Listbox"})])}}}),sl=K({name:"ListboxButton",props:{as:{type:[Object,String],default:"button"},id:{type:String,default:null}},setup(e,{attrs:c,slots:a,expose:o}){var l;let i=(l=e.id)!=null?l:`headlessui-listbox-button-${ae()}`,t=Oe("ListboxButton");o({el:t.buttonRef,$el:t.buttonRef});function n(u){switch(u.key){case z.Space:case z.Enter:case z.ArrowDown:u.preventDefault(),t.openListbox(),N(()=>{var p;(p=R(t.optionsRef))==null||p.focus({preventScroll:!0}),t.value.value||t.goToOption(k.First)});break;case z.ArrowUp:u.preventDefault(),t.openListbox(),N(()=>{var p;(p=R(t.optionsRef))==null||p.focus({preventScroll:!0}),t.value.value||t.goToOption(k.Last)});break}}function f(u){switch(u.key){case z.Space:u.preventDefault();break}}function v(u){t.disabled.value||(t.listboxState.value===0?(t.closeListbox(),N(()=>{var p;return(p=R(t.buttonRef))==null?void 0:p.focus({preventScroll:!0})})):(u.preventDefault(),t.openListbox(),il(()=>{var p;return(p=R(t.optionsRef))==null?void 0:p.focus({preventScroll:!0})})))}let s=Ne(m(()=>({as:e.as,type:c.type})),t.buttonRef);return()=>{var u,p;let w={open:t.listboxState.value===0,disabled:t.disabled.value,value:t.value.value},{...x}=e,E={ref:t.buttonRef,id:i,type:s.value,"aria-haspopup":"listbox","aria-controls":(u=R(t.optionsRef))==null?void 0:u.id,"aria-expanded":t.listboxState.value===0,"aria-labelledby":t.labelRef.value?[(p=R(t.labelRef))==null?void 0:p.id,i].join(" "):void 0,disabled:t.disabled.value===!0?!0:void 0,onKeydown:n,onKeyup:f,onClick:v};return X({ourProps:E,theirProps:x,slot:w,attrs:c,slots:a,name:"ListboxButton"})}}}),rl=K({name:"ListboxOptions",props:{as:{type:[Object,String],default:"ul"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:null}},setup(e,{attrs:c,slots:a,expose:o}){var l;let i=(l=e.id)!=null?l:`headlessui-listbox-options-${ae()}`,t=Oe("ListboxOptions"),n=D(null);o({el:t.optionsRef,$el:t.optionsRef});function f(u){switch(n.value&&clearTimeout(n.value),u.key){case z.Space:if(t.searchQuery.value!=="")return u.preventDefault(),u.stopPropagation(),t.search(u.key);case z.Enter:if(u.preventDefault(),u.stopPropagation(),t.activeOptionIndex.value!==null){let p=t.options.value[t.activeOptionIndex.value];t.select(p.dataRef.value)}t.mode.value===0&&(t.closeListbox(),N(()=>{var p;return(p=R(t.buttonRef))==null?void 0:p.focus({preventScroll:!0})}));break;case H(t.orientation.value,{vertical:z.ArrowDown,horizontal:z.ArrowRight}):return u.preventDefault(),u.stopPropagation(),t.goToOption(k.Next);case H(t.orientation.value,{vertical:z.ArrowUp,horizontal:z.ArrowLeft}):return u.preventDefault(),u.stopPropagation(),t.goToOption(k.Previous);case z.Home:case z.PageUp:return u.preventDefault(),u.stopPropagation(),t.goToOption(k.First);case z.End:case z.PageDown:return u.preventDefault(),u.stopPropagation(),t.goToOption(k.Last);case z.Escape:u.preventDefault(),u.stopPropagation(),t.closeListbox(),N(()=>{var p;return(p=R(t.buttonRef))==null?void 0:p.focus({preventScroll:!0})});break;case z.Tab:u.preventDefault(),u.stopPropagation();break;default:u.key.length===1&&(t.search(u.key),n.value=setTimeout(()=>t.clearSearch(),350));break}}let v=je(),s=m(()=>v!==null?(v.value&te.Open)===te.Open:t.listboxState.value===0);return()=>{var u,p;let w={open:t.listboxState.value===0},{...x}=e,E={"aria-activedescendant":t.activeOptionIndex.value===null||(u=t.options.value[t.activeOptionIndex.value])==null?void 0:u.id,"aria-multiselectable":t.mode.value===1?!0:void 0,"aria-labelledby":(p=R(t.buttonRef))==null?void 0:p.id,"aria-orientation":t.orientation.value,id:i,onKeydown:f,role:"listbox",tabIndex:0,ref:t.optionsRef};return X({ourProps:E,theirProps:x,slot:w,attrs:c,slots:a,features:se.RenderStrategy|se.Static,visible:s.value,name:"ListboxOptions"})}}}),dl=K({name:"ListboxOption",props:{as:{type:[Object,String],default:"li"},value:{type:[Object,String,Number,Boolean]},disabled:{type:Boolean,default:!1},id:{type:String,default:null}},setup(e,{slots:c,attrs:a,expose:o}){var l;let i=(l=e.id)!=null?l:`headlessui-listbox-option-${ae()}`,t=Oe("ListboxOption"),n=D(null);o({el:n,$el:n});let f=m(()=>t.activeOptionIndex.value!==null?t.options.value[t.activeOptionIndex.value].id===i:!1),v=m(()=>H(t.mode.value,{0:()=>t.compare(j(t.value.value),j(e.value)),1:()=>j(t.value.value).some(r=>t.compare(j(r),j(e.value)))})),s=m(()=>H(t.mode.value,{1:()=>{var r;let O=j(t.value.value);return((r=t.options.value.find(d=>O.some(y=>t.compare(j(y),j(d.dataRef.value)))))==null?void 0:r.id)===i},0:()=>v.value})),u=ct(n),p=m(()=>({disabled:e.disabled,value:e.value,get textValue(){return u()},domRef:n}));ue(()=>t.registerOption(i,p)),Me(()=>t.unregisterOption(i)),ue(()=>{J([t.listboxState,v],()=>{t.listboxState.value===0&&v.value&&H(t.mode.value,{1:()=>{s.value&&t.goToOption(k.Specific,i)},0:()=>{t.goToOption(k.Specific,i)}})},{immediate:!0})}),fe(()=>{t.listboxState.value===0&&f.value&&t.activationTrigger.value!==0&&N(()=>{var r,O;return(O=(r=R(n))==null?void 0:r.scrollIntoView)==null?void 0:O.call(r,{block:"nearest"})})});function w(r){if(e.disabled)return r.preventDefault();t.select(e.value),t.mode.value===0&&(t.closeListbox(),N(()=>{var O;return(O=R(t.buttonRef))==null?void 0:O.focus({preventScroll:!0})}))}function x(){if(e.disabled)return t.goToOption(k.Nothing);t.goToOption(k.Specific,i)}let E=Be();function F(r){E.update(r)}function A(r){E.wasMoved(r)&&(e.disabled||f.value||t.goToOption(k.Specific,i,0))}function S(r){E.wasMoved(r)&&(e.disabled||f.value&&t.goToOption(k.Nothing))}return()=>{let{disabled:r}=e,O={active:f.value,selected:v.value,disabled:r},{value:d,disabled:y,...I}=e,b={id:i,ref:n,role:"option",tabIndex:r===!0?void 0:-1,"aria-disabled":r===!0?!0:void 0,"aria-selected":v.value,disabled:void 0,onClick:w,onFocus:x,onPointerenter:F,onMouseenter:F,onPointermove:A,onMousemove:A,onPointerleave:S,onMouseleave:S};return X({ourProps:b,theirProps:I,slot:O,attrs:a,slots:c,name:"ListboxOption"})}}});const G=Ze(ne.ui.strategy,ne.ui.select,wt),me=Ze(ne.ui.strategy,ne.ui.selectMenu,Mt),cl=K({components:{HCombobox:Yt,HComboboxButton:Zt,HComboboxOptions:el,HComboboxOption:tl,HComboboxInput:_t,HListbox:ul,HListboxButton:sl,HListboxOptions:rl,HListboxOption:dl,UIcon:Xe,UAvatar:Ye},inheritAttrs:!1,props:{modelValue:{type:[String,Number,Object,Array,Boolean],default:""},query:{type:String,default:null},by:{type:String,default:void 0},options:{type:Array,default:()=>[]},id:{type:String,default:null},name:{type:String,default:null},required:{type:Boolean,default:!1},icon:{type:String,default:null},loadingIcon:{type:String,default:()=>G.default.loadingIcon},leadingIcon:{type:String,default:null},trailingIcon:{type:String,default:()=>G.default.trailingIcon},trailing:{type:Boolean,default:!1},leading:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},selectedIcon:{type:String,default:()=>me.default.selectedIcon},disabled:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},searchable:{type:[Boolean,Function],default:!1},searchablePlaceholder:{type:String,default:"Search..."},clearSearchOnClose:{type:Boolean,default:()=>me.default.clearSearchOnClose},debounce:{type:Number,default:200},creatable:{type:Boolean,default:!1},showCreateOptionWhen:{type:String,default:()=>me.default.showCreateOptionWhen},placeholder:{type:String,default:null},padded:{type:Boolean,default:!0},size:{type:String,default:null,validator(e){return Object.keys(G.size).includes(e)}},color:{type:String,default:()=>G.default.color,validator(e){return[...ne.ui.colors,...Object.keys(G.color)].includes(e)}},variant:{type:String,default:()=>G.default.variant,validator(e){return[...Object.keys(G.variant),...Object.values(G.color).flatMap(c=>Object.keys(c))].includes(e)}},optionAttribute:{type:String,default:"label"},valueAttribute:{type:String,default:null},searchAttributes:{type:Array,default:null},popper:{type:Object,default:()=>({})},selectClass:{type:String,default:null},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})},uiMenu:{type:Object,default:()=>({})}},emits:["update:modelValue","update:query","open","close","change"],setup(e,{emit:c,slots:a}){const{ui:o,attrs:l}=Pe("select",Ce(e,"ui"),G,Ce(e,"class")),{ui:i}=Pe("selectMenu",Ce(e,"uiMenu"),me),t=m(()=>yt({},e.popper,i.value.popper)),[n,f]=Ot(t.value),{size:v,rounded:s}=St({ui:o,props:e}),{emitFormBlur:u,emitFormChange:p,inputId:w,color:x,size:E,name:F}=xt(e,G),A=m(()=>v.value||E.value),S=D(""),r=m({get(){return e.query??S.value},set(L){S.value=L,c("update:query",L)}}),O=m(()=>{if(e.multiple)return Array.isArray(e.modelValue)&&e.modelValue.length?`${e.modelValue.length} selected`:null;if(e.modelValue!==void 0&&e.modelValue!==null)if(e.valueAttribute){const L=e.options.find(U=>U[e.valueAttribute]===e.modelValue);return L?L[e.optionAttribute]:null}else return["string","number"].includes(typeof e.modelValue)?e.modelValue:e.modelValue[e.optionAttribute];return null}),d=m(()=>{var U,be;const L=((be=(U=o.value.color)==null?void 0:U[x.value])==null?void 0:be[e.variant])||o.value.variant[e.variant];return It(pe(o.value.base,i.value.select,s.value,o.value.size[A.value],o.value.gap[A.value],e.padded?o.value.padding[A.value]:"p-0",L==null?void 0:L.replaceAll("{color}",x.value),(y.value||a.leading)&&o.value.leading.padding[A.value],(I.value||a.trailing)&&o.value.trailing.padding[A.value]),e.placeholder&&e.modelValue===void 0&&e.modelValue===null&&o.value.placeholder,e.selectClass)}),y=m(()=>e.icon&&e.leading||e.icon&&!e.trailing||e.loading&&!e.trailing||e.leadingIcon),I=m(()=>e.icon&&e.trailing||e.loading&&e.trailing||e.trailingIcon),b=m(()=>e.loading?e.loadingIcon:e.leadingIcon||e.icon),T=m(()=>e.loading&&!y.value?e.loadingIcon:e.trailingIcon||e.icon),h=m(()=>pe(o.value.icon.leading.wrapper,o.value.icon.leading.pointer,o.value.icon.leading.padding[A.value])),g=m(()=>pe(o.value.icon.base,x.value&&ne.ui.colors.includes(x.value)&&o.value.icon.color.replaceAll("{color}",x.value),o.value.icon.size[A.value],e.loading&&o.value.icon.loading)),C=m(()=>pe(o.value.icon.trailing.wrapper,o.value.icon.trailing.pointer,o.value.icon.trailing.padding[A.value])),M=m(()=>pe(o.value.icon.base,x.value&&ne.ui.colors.includes(x.value)&&o.value.icon.color.replaceAll("{color}",x.value),o.value.icon.size[A.value],e.loading&&!y.value&&o.value.icon.loading)),$=typeof e.searchable=="function"?Ct(e.searchable,e.debounce):void 0,P=Rt(async()=>e.searchable&&$?await $(r.value):r.value===""?e.options:e.options.filter(L=>{var U;return((U=e.searchAttributes)!=null&&U.length?e.searchAttributes:[e.optionAttribute]).some(be=>{if(["string","number"].includes(typeof L))return String(L).search(new RegExp(r.value,"i"))!==-1;const xe=Et(L,be);return xe!=null&&String(xe).search(new RegExp(r.value,"i"))!==-1})})),q=m(()=>r.value===""||e.showCreateOptionWhen==="empty"&&P.value.length||e.showCreateOptionWhen==="always"&&P.value.find(U=>["string","number"].includes(typeof U)?U===r.value:U[e.optionAttribute]===r.value)?null:["string","number"].includes(typeof e.modelValue)?r.value:{[e.optionAttribute]:r.value});function Y(){e.clearSearchOnClose&&(r.value="")}J(f,L=>{L?c("open"):(Y(),c("close"),u())});function le(L){c("update:modelValue",L)}function Se(L){c("change",L.target.value),p(),r.value=L.target.value}return At(()=>Tt()),{ui:o,uiMenu:i,attrs:l,name:F,inputId:w,popper:t,trigger:n,container:f,label:O,isLeading:y,isTrailing:I,selectClass:d,leadingIconName:b,leadingIconClass:g,leadingWrapperIconClass:h,trailingIconName:T,trailingIconClass:M,trailingWrapperIconClass:C,filteredOptions:P,createOption:q,query:r,onUpdate:le,onChange:Se}}}),vl=["value","required"],pl=["id","disabled"],fl={class:"truncate"};function bl(e,c,a,o,l,i){const t=Xe,n=bt("HComboboxInput"),f=Ye;return B(),Z(ce(e.searchable?"HCombobox":"HListbox"),{by:e.by,name:e.name,"model-value":e.modelValue,multiple:e.multiple,disabled:e.disabled,as:"div",class:V(e.ui.wrapper),"onUpdate:modelValue":e.onUpdate},{default:oe(({open:v})=>[e.required?(B(),W("input",{key:0,value:e.modelValue,required:e.required,class:V(e.uiMenu.required),tabindex:"-1","aria-hidden":"true"},null,10,vl)):Q("",!0),(B(),Z(ce(e.searchable?"HComboboxButton":"HListboxButton"),{ref:"trigger",as:"div",role:"button",class:V(e.uiMenu.trigger)},{default:oe(()=>[_(e.$slots,"default",{open:v,disabled:e.disabled,loading:e.loading},()=>[ee("button",Ie({id:e.inputId,class:e.selectClass,disabled:e.disabled,type:"button"},e.attrs),[e.isLeading&&e.leadingIconName||e.$slots.leading?(B(),W("span",{key:0,class:V(e.leadingWrapperIconClass)},[_(e.$slots,"leading",{disabled:e.disabled,loading:e.loading},()=>[he(t,{name:e.leadingIconName,class:V(e.leadingIconClass)},null,8,["name","class"])])],2)):Q("",!0),_(e.$slots,"label",{},()=>[e.label?(B(),W("span",{key:0,class:V(e.uiMenu.label)},ve(e.label),3)):(B(),W("span",{key:1,class:V(e.uiMenu.label)},ve(e.placeholder||" "),3))]),e.isTrailing&&e.trailingIconName||e.$slots.trailing?(B(),W("span",{key:1,class:V(e.trailingWrapperIconClass)},[_(e.$slots,"trailing",{disabled:e.disabled,loading:e.loading},()=>[he(t,{name:e.trailingIconName,class:V(e.trailingIconClass),"aria-hidden":"true"},null,8,["name","class"])])],2)):Q("",!0)],16,pl)])]),_:2},1032,["class"])),v?(B(),W("div",{key:1,ref:"container",class:V([e.uiMenu.container,e.uiMenu.width])},[he(ht,Ie({appear:""},e.uiMenu.transition),{default:oe(()=>[ee("div",null,[e.popper.arrow?(B(),W("div",{key:0,"data-popper-arrow":"",class:V(Object.values(e.uiMenu.arrow))},null,2)):Q("",!0),(B(),Z(ce(e.searchable?"HComboboxOptions":"HListboxOptions"),{static:"",class:V([e.uiMenu.base,e.uiMenu.ring,e.uiMenu.rounded,e.uiMenu.shadow,e.uiMenu.background,e.uiMenu.padding,e.uiMenu.height])},{default:oe(()=>{var s,u;return[e.searchable?(B(),Z(n,{key:0,"display-value":()=>e.query,name:"q",placeholder:e.searchablePlaceholder,autofocus:"",autocomplete:"off",class:V(e.uiMenu.input),onChange:e.onChange},null,8,["display-value","placeholder","class","onChange"])):Q("",!0),(B(!0),W(Ae,null,mt(e.filteredOptions,(p,w)=>(B(),Z(ce(e.searchable?"HComboboxOption":"HListboxOption"),{key:w,as:"template",value:e.valueAttribute?p[e.valueAttribute]:p,disabled:p.disabled},{default:oe(({active:x,selected:E,disabled:F})=>[ee("li",{class:V([e.uiMenu.option.base,e.uiMenu.option.rounded,e.uiMenu.option.padding,e.uiMenu.option.size,e.uiMenu.option.color,x?e.uiMenu.option.active:e.uiMenu.option.inactive,E&&e.uiMenu.option.selected,F&&e.uiMenu.option.disabled])},[ee("div",{class:V(e.uiMenu.option.container)},[_(e.$slots,"option",{option:p,active:x,selected:E},()=>[p.icon?(B(),Z(t,{key:0,name:p.icon,class:V([e.uiMenu.option.icon.base,x?e.uiMenu.option.icon.active:e.uiMenu.option.icon.inactive,p.iconClass]),"aria-hidden":"true"},null,8,["name","class"])):p.avatar?(B(),Z(f,Ie({key:1,ref_for:!0},{size:e.uiMenu.option.avatar.size,...p.avatar},{class:e.uiMenu.option.avatar.base,"aria-hidden":"true"}),null,16,["class"])):p.chip?(B(),W("span",{key:2,class:V(e.uiMenu.option.chip.base),style:gt({background:`#${p.chip}`})},null,6)):Q("",!0),ee("span",fl,ve(["string","number"].includes(typeof p)?p:p[e.optionAttribute]),1)])],2),E?(B(),W("span",{key:0,class:V([e.uiMenu.option.selectedIcon.wrapper,e.uiMenu.option.selectedIcon.padding])},[he(t,{name:e.selectedIcon,class:V(e.uiMenu.option.selectedIcon.base),"aria-hidden":"true"},null,8,["name","class"])],2)):Q("",!0)],2)]),_:2},1032,["value","disabled"]))),128)),e.creatable&&e.createOption?(B(),Z(ce(e.searchable?"HComboboxOption":"HListboxOption"),{key:1,value:e.createOption,as:"template"},{default:oe(({active:p,selected:w})=>[ee("li",{class:V([e.uiMenu.option.base,e.uiMenu.option.rounded,e.uiMenu.option.padding,e.uiMenu.option.size,e.uiMenu.option.color,p?e.uiMenu.option.active:e.uiMenu.option.inactive])},[ee("div",{class:V(e.uiMenu.option.container)},[_(e.$slots,"option-create",{option:e.createOption,active:p,selected:w},()=>[ee("span",{class:V(e.uiMenu.option.create)},'Create "'+ve(e.createOption[e.optionAttribute])+'"',3)])],2)],2)]),_:3},8,["value"])):e.searchable&&e.query&&!((s=e.filteredOptions)!=null&&s.length)?(B(),W("p",{key:2,class:V(e.uiMenu.option.empty)},[_(e.$slots,"option-empty",{query:e.query},()=>[$e(' No results for "'+ve(e.query)+'". ',1)])],2)):(u=e.filteredOptions)!=null&&u.length?Q("",!0):(B(),W("p",{key:3,class:V(e.uiMenu.empty)},[_(e.$slots,"empty",{query:e.query},()=>[c[0]||(c[0]=$e(" No options. "))])],2))]}),_:3},8,["class"]))])]),_:3},16)],2)):Q("",!0)]),_:3},8,["by","name","model-value","multiple","disabled","class","onUpdate:modelValue"])}const ml=ft(cl,[["render",bl]]);export{ml as _};
