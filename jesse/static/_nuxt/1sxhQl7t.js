import{o as s,c as l,a as t,g as U,x as w,t as $,n as v,k as a,p as ee,f as te,_ as T,C as oe,D as I,E as z,G as J,X as D,H as se,I as ae,J as N,K as ne,L as y,M as f,O as i,N as B,d as P,F as L,i as R,j,an as re,ao as le,a3 as ie,P as de,a9 as ce,r as A,b as c,w as M,S as ue,l as pe,v as ge,a5 as me,V as S,ai as fe,ab as he,Z as be,$ as ve,ac as ye,W as ke}from"./BLm-LuZL.js";function _e(e,o){return s(),l("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184"})])}function we(e,o){return s(),l("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 3v1.5M3 21v-6m0 0 2.77-.693a9 9 0 0 1 6.208.682l.108.054a9 9 0 0 0 6.086.71l3.114-.732a48.524 48.524 0 0 1-.005-10.499l-3.11.732a9 9 0 0 1-6.085-.711l-.108-.054a9 9 0 0 0-6.208-.682L3 4.5M3 15V4.5"})])}function $e(e,o){return s(),l("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})])}const xe={wrapper:"w-full relative overflow-hidden",inner:"w-0 flex-1",title:"text-sm font-medium",description:"mt-1 text-sm leading-4 opacity-90",actions:"flex items-center gap-2 mt-3 flex-shrink-0",shadow:"",rounded:"rounded-lg",padding:"p-4",gap:"gap-3",icon:{base:"flex-shrink-0 w-5 h-5"},avatar:{base:"flex-shrink-0 self-center",size:"md"},color:{white:{solid:"text-gray-900 dark:text-white bg-white dark:bg-gray-900 ring-1 ring-gray-200 dark:ring-gray-800"}},variant:{solid:"bg-{color}-500 dark:bg-{color}-400 text-white dark:text-gray-900",outline:"text-{color}-500 dark:text-{color}-400 ring-1 ring-inset ring-{color}-500 dark:ring-{color}-400",soft:"bg-{color}-50 dark:bg-{color}-400 dark:bg-opacity-10 text-{color}-500 dark:text-{color}-400",subtle:"bg-{color}-50 dark:bg-{color}-400 dark:bg-opacity-10 text-{color}-500 dark:text-{color}-400 ring-1 ring-inset ring-{color}-500 dark:ring-{color}-400 ring-opacity-25 dark:ring-opacity-25"},default:{color:"white",variant:"solid",icon:null,closeButton:null,actionButton:{size:"xs",color:"primary",variant:"link"}}},Ce=e=>(ee("data-v-88f4951a"),e=e(),te(),e),Be=Ce(()=>t("div",{class:"left-half-clipper"},[t("div",{class:"first50-bar"}),t("div",{class:"value-bar"})],-1)),Me=U({__name:"CircleProgressbar",props:{progress:{}},setup(e){const o=e,d=w(()=>{let u="progress-circle";return o.progress>50&&(u+=" over50"),u+=` p${Math.round(o.progress)}`,u});return(u,x)=>(s(),l("div",{class:v(a(d))},[t("span",null,$(u.progress)+"%",1),Be],2))}}),nt=T(Me,[["__scopeId","data-v-88f4951a"]]),h=oe(I.ui.strategy,I.ui.alert,xe),Ve=U({components:{UIcon:z,UAvatar:J,UButton:D},inheritAttrs:!1,props:{title:{type:String,default:null},description:{type:String,default:null},icon:{type:String,default:()=>h.default.icon},avatar:{type:Object,default:null},closeButton:{type:Object,default:()=>h.default.closeButton},actions:{type:Array,default:()=>[]},color:{type:String,default:()=>h.default.color,validator(e){return[...I.ui.colors,...Object.keys(h.color)].includes(e)}},variant:{type:String,default:()=>h.default.variant,validator(e){return[...Object.keys(h.variant),...Object.values(h.color).flatMap(o=>Object.keys(o))].includes(e)}},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},emits:["close"],setup(e){const{ui:o,attrs:d}=se("alert",ae(e,"ui"),h),u=w(()=>{var k,g;const n=((g=(k=o.value.color)==null?void 0:k[e.color])==null?void 0:g[e.variant])||o.value.variant[e.variant];return N(ne(o.value.wrapper,o.value.rounded,o.value.shadow,o.value.padding,n==null?void 0:n.replaceAll("{color}",e.color)),e.class)});function x(n){n.click&&n.click()}return{ui:o,attrs:d,alertClass:u,onAction:x,twMerge:N}}});function Se(e,o,d,u,x,n){const k=z,g=J,b=D;return s(),l("div",B({class:e.alertClass},e.attrs),[t("div",{class:v(["flex",[e.ui.gap,{"items-start":e.description||e.$slots.description,"items-center":!e.description&&!e.$slots.description}]])},[y(e.$slots,"icon",{icon:e.icon},()=>[e.icon?(s(),f(k,{key:0,name:e.icon,ui:e.ui.icon.base},null,8,["name","ui"])):i("",!0)]),y(e.$slots,"avatar",{avatar:e.avatar},()=>[e.avatar?(s(),f(g,B({key:0},{size:e.ui.avatar.size,...e.avatar},{class:e.ui.avatar.base}),null,16,["class"])):i("",!0)]),t("div",{class:v(e.ui.inner)},[e.title||e.$slots.title?(s(),l("p",{key:0,class:v(e.ui.title)},[y(e.$slots,"title",{title:e.title},()=>[P($(e.title),1)])],2)):i("",!0),e.description||e.$slots.description?(s(),l("p",{key:1,class:v(e.twMerge(e.ui.description,!(e.title&&e.$slots.title)&&"mt-0 leading-5"))},[y(e.$slots,"description",{description:e.description},()=>[P($(e.description),1)])],2)):i("",!0),(e.description||e.$slots.description)&&e.actions.length?(s(),l("div",{key:2,class:v(e.ui.actions)},[(s(!0),l(L,null,R(e.actions,(p,C)=>(s(),f(b,B({key:C},{...e.ui.default.actionButton||{},...p},{onClick:j(V=>e.onAction(p),["stop"])}),null,16,["onClick"]))),128))],2)):i("",!0)],2),e.closeButton||!e.description&&!e.$slots.description&&e.actions.length?(s(),l("div",{key:0,class:v(e.twMerge(e.ui.actions,"mt-0"))},[!e.description&&!e.$slots.description&&e.actions.length?(s(!0),l(L,{key:0},R(e.actions,(p,C)=>(s(),f(b,B({key:C},{...e.ui.default.actionButton||{},...p},{onClick:j(V=>e.onAction(p),["stop"])}),null,16,["onClick"]))),128)):i("",!0),e.closeButton?(s(),f(b,B({key:1,"aria-label":"Close"},{...e.ui.default.closeButton||{},...e.closeButton},{onClick:o[0]||(o[0]=j(p=>e.$emit("close"),["stop"]))}),null,16)):i("",!0)],2)):i("",!0)],2)],16)}const Ue=T(Ve,[["render",Se]]),je={class:"w-full flex justify-between items-center"},Ae=["textContent"],Ie=t("div",{class:"w-full flex items-center","aria-hidden":"true"},[t("div",{class:"w-full border-t-2 border-dashed border-gray-300 dark:border-gray-600"})],-1),Le={class:"whitespace-nowrap ml-2"},Te=U({__name:"DividerWithButtons",props:{title:{}},setup(e){return(o,d)=>(s(),l("div",je,[t("span",{class:"pr-3 bg-gray-50 dark:bg-backdrop-dark text-lg font-semibold text-gray-900 dark:text-gray-200",textContent:$(o.title)},null,8,Ae),Ie,t("span",Le,[y(o.$slots,"default")])]))}}),De={key:0,class:"mb-4"},Oe=t("p",null," If the exception you're seeing is not clear and you think it might be a bug, please send us a report to help us debugging and fixing it in a future release. ",-1),Ee=t("br",null,null,-1),He=t("label",{class:"font-semibold"},"Exception:",-1),Ne=["innerHTML"],Pe={class:"flex justify-end"},Re=t("span",null,"Report",-1),ze={class:"rounded-md bg-red-50 p-4 my-4 select-text"},Je={class:"flex"},Fe={class:"flex-shrink-0"},We={class:"ml-3 overflow-hidden w-full"},Ge=["textContent"],Ze=["innerHTML"],qe=["value"],rt=U({__name:"Exception",props:re({title:String,content:{type:String,default:""},mode:String,debugMode:{type:Boolean,default:!1}},{modelValue:{type:Boolean,default:!1},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const o=e,d=le(e,"modelValue"),u=w(()=>ie().params.id),x=de(),n=ce({description:"",attachLogs:!0,email:""}),k=A(!1),g=A(!1),b=A(!1),p=w(()=>o.mode==="backtest"&&!o.debugMode?{message:'It is highly recommended to attach log files with reports. To do that, press cancel, enable "Debug Mode", and  run again. ',type:"warning"}:{message:"",type:""}),C=w(()=>o.mode==="backtest"&&o.debugMode||o.mode==="live"),V=w(()=>x.hasLivePluginInstalled),F=async()=>{b.value=!0;const{data:O,error:r}=await me("/report-exception",{description:n.description,email:n.email,traceback:o.content,mode:o.mode,attach_logs:n.attachLogs,session_id:u},!0);if(b.value=!1,r.value&&r.value.statusCode!==200){S("error",`[${r.value.statusCode}]: ${r.value.message}`);return}const _=O.value;_.data.status==="success"?(n.description="",n.email="",S("success",_.data.message),d.value=!1):_.data.status==="error"&&S("error",_.data.message)},W=()=>{navigator.clipboard.writeText(o.content),S("success","Copied successfully"),g.value=!0,setTimeout(()=>{g.value=!1},2e3)},G=()=>{d.value=!0};return(O,r)=>{const _=Ue,Z=fe,E=he,q=be,K=ve,H=D,X=ye,Q=ke,Y=Te;return s(),l(L,null,[c(Q,{modelValue:d.value,"onUpdate:modelValue":r[5]||(r[5]=m=>d.value=m),title:"Report"},{default:M(()=>[a(p).message?(s(),l("div",De,[c(_,{color:"teal",icon:"i-heroicons-check-circle",title:a(p).message,"close-button":{icon:"i-heroicons-x-mark-20-solid",color:"white",variant:"link"},onClose:r[0]||(r[0]=m=>a(p).message="")},null,8,["title"])])):i("",!0),Oe,Ee,He,t("pre",{class:"break-all lg:break-normal mt-2 text-sm whitespace-pre-line px-6 py-6 rounded-md bg-gray-50 dark:bg-gray-700 text-gray-700 dark:text-gray-300 dark:border-gray-800 border border-gray-200",innerHTML:e.content},null,8,Ne),c(X,{state:a(n),class:"space-y-4 mt-4",onSubmit:F},{default:M(()=>[c(E,{label:"Description (optional):",name:"Description (optional):"},{default:M(()=>[c(Z,{modelValue:a(n).description,"onUpdate:modelValue":r[1]||(r[1]=m=>a(n).description=m),rows:10,placeholder:"Describe how the exception occurred..."},null,8,["modelValue"])]),_:1}),a(V)?i("",!0):(s(),f(E,{key:0,label:"Email (must be registered with on Jesse.Trade)",help:"Enter your email address for us to know who sent the feedback and possibly reply back to you. It must be the email address of your account on Jesse.Trade",required:""},{default:M(()=>[c(q,{modelValue:a(n).email,"onUpdate:modelValue":r[2]||(r[2]=m=>a(n).email=m),placeholder:"Email address...",type:"email"},null,8,["modelValue"])]),_:1})),a(C)?(s(),f(K,{key:1,modelValue:a(n).attachLogs,"onUpdate:modelValue":r[3]||(r[3]=m=>a(n).attachLogs=m),title:"Attach Debugging Logs",help:"Attach the log file of this session along with this report which helps Jesse's team"},null,8,["modelValue"])):i("",!0),t("div",Pe,[c(H,{id:"feedback-cancel-button",color:"gray",variant:"link",class:"mr-8",label:"Cancel",onClick:r[4]||(r[4]=m=>d.value=!1)}),c(H,{id:"feedback-submit-button",type:"submit",class:"w-48 flex justify-center",label:"Submit",loading:a(b),disabled:!a(n).description.length||!a(n).email.length&&!a(V)},null,8,["loading","disabled"])])]),_:1},8,["state"])]),_:1},8,["modelValue"]),c(Y,{title:"Exception"},{default:M(()=>[t("button",{type:"button",class:"inline-flex items-center shadow-sm px-4 py-1.5 border border-gray-300 dark:border-gray-600 text-sm leading-5 font-medium rounded-l-full text-gray-700 dark:text-gray-100 bg-white dark:bg-backdrop-dark hover:bg-gray-50 dark:hover:bg-gray-800 focus:outline-none",onClick:G},[c(a(we),{class:"-ml-1.5 mr-1 h-5 w-5 text-gray-400","aria-hidden":"true"}),Re]),t("button",{type:"button",class:"inline-flex items-center shadow-sm px-4 py-1.5 border border-gray-300 dark:border-gray-600 text-sm leading-5 font-medium rounded-r-full text-gray-700 dark:text-gray-100 bg-white dark:bg-backdrop-dark hover:bg-gray-50 dark:hover:bg-gray-800 focus:outline-none",onClick:W},[a(g)?(s(),f(a(ue),{key:0,class:"-ml-1.5 mr-1 h-5 w-5 text-gray-400","aria-hidden":"true"})):(s(),f(a(_e),{key:1,class:"-ml-1.5 mr-1 h-5 w-5 text-gray-400","aria-hidden":"true"})),t("span",null,$(a(g)?"Copied":"Copy"),1)])]),_:1}),t("div",ze,[t("div",Je,[t("div",Fe,[c(a($e),{class:"h-5 w-5 text-red-400","aria-hidden":"true"})]),t("div",We,[t("h3",{class:"text-base font-medium text-red-800 mb-6",textContent:$(e.title)},null,8,Ge),e.content?(s(),l("pre",{key:0,class:"mt-2 text-sm text-red-700 whitespace-pre-line px-6 py-6 rounded-md border-2 border-dashed border-red-200",innerHTML:e.content},null,8,Ze)):i("",!0)])]),pe(t("textarea",{id:"exception-info",value:e.content,class:"fixed left-0 bottom-0 opacity-0"},null,8,qe),[[ge,a(k)]])])],64)}}}),Ke={},Xe={class:"grid grid-cols-1 gap-4 items-start lg:grid-cols-3 p-6"},Qe={class:"grid grid-cols-1 gap-4 lg:col-span-2 px-1"},Ye={"aria-labelledby":"section-1-title"},et={class:"rounded-lg"},tt={class:"grid grid-cols-1 gap-4"},ot={"aria-labelledby":"section-2-title"};function st(e,o){return s(),l("div",Xe,[t("div",Qe,[t("section",Ye,[t("div",et,[y(e.$slots,"left")])])]),t("div",tt,[t("section",ot,[y(e.$slots,"right")])])])}const lt=T(Ke,[["render",st]]);export{nt as _,rt as a,lt as b,Ue as c,Te as d,_e as r};
